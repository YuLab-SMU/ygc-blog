{"MyPackages/clusterProfiler/KEGGçš„åˆ†ç±»æ•°æ®æ›´æ–°":{"slug":"MyPackages/clusterProfiler/KEGGçš„åˆ†ç±»æ•°æ®æ›´æ–°","filePath":"MyPackages/clusterProfiler/KEGGçš„åˆ†ç±»æ•°æ®æ›´æ–°.md","title":"KEGGçš„åˆ†ç±»æ•°æ®æ›´æ–°","links":[],"tags":["clusterProfiler","KEGG"],"content":"Dear clusterProfiler maintainers,\nFirst, thank you for developing and maintaining this incredibly useful package! Iâ€™ve been using clusterProfiler extensively for enrichment analysis and itâ€™s been invaluable for my research.\nIâ€™m encountering an issue with KEGG enrichment analysis where some pathways show NA values for both category and subcategory fields, even though the pathways themselves are valid and statistically significant.\nDescription\nWhen performing KEGG enrichment analysis using enrichKEGG followed by setReadable, some pathways show NA values for both category and subcategory fields, even though the pathways themselves are valid and significant.\nProblem\nThe pathways mmu04082 (Neuroactive ligand-receptor interaction) and mmu04517 (IgSF CAM signaling) return NA for category and subcategory columns in the results, while other pathways have proper classification information.\nQuestions\nIs this a known issue with specific KEGG pathways?\nIs there a way to automatically retrieve the missing category information?\nShould the category information be populated from a different source or database?\nIâ€™ve verified that these pathways exist in the KEGG database and are valid, but the classification metadata seems to be missing in the enrichment results.\nAny guidance on how to resolve this would be greatly appreciated. Thank you for your time and continued support of this excellent package!\nBest regards,\nSophia\nformula &lt;- compareCluster(ENTREZID~cluster, data=GeneClusterDF,\n                          fun=&#039;enrichKEGG&#039;, \n                          organism = &quot;mmu&quot;,  # å°é¼ çš„KEGG organism code\n                          pvalueCutoff=0.05,\n                          pAdjustMethod = &quot;BH&quot;)\nformula &lt;- setReadable(formula, \n                       OrgDb = &quot;org.Mm.eg.db&quot;, \n                       keyType = &quot;ENTREZID&quot;)\nhead(as.data.frame(formula))\n&gt; head(as.data.frame(formula))\n  Cluster cluster                             category         subcategory       ID                  Description GeneRatio   BgRatio RichFactor FoldEnrichment\n1       0       0                                 &lt;NA&gt;                &lt;NA&gt; mmu04082 Neuroactive ligand signaling    14/113 196/10632 0.07142857       6.720607\n2       0       0                                 &lt;NA&gt;                &lt;NA&gt; mmu04517           IgSF CAM signaling    16/113 300/10632 0.05333333       5.018053\n3       0       0                   Organismal Systems      Nervous system mmu04724        Glutamatergic synapse    10/113 117/10632 0.08547009       8.041752\n4       0       0 Environmental Information Processing Signal transduction mmu04020    Calcium signaling pathway    13/113 255/10632 0.05098039       4.796668\n5       0       0                   Organismal Systems      Nervous system mmu04727            GABAergic synapse     8/113  91/10632 0.08791209       8.271516\n6       0       0 Environmental Information Processing Signal transduction mmu04024       cAMP signaling pathway    11/113 224/10632 0.04910714       4.620417\n    zScore       pvalue     p.adjust       qvalue                                                                                              geneID Count\n1 8.378035 1.822353e-08 4.355424e-06 3.356966e-06          Adcy2/Gabbr2/Gabra2/Gabrb1/Gnao1/Gria2/Grin2c/Grm3/Hrh1/Plcb1/Slc1a2/Slc1a3/Slc6a1/Slc6a11    14\n2 7.316833 1.016818e-07 1.215097e-05 9.365424e-06 Actr3b/Ank2/Cables1/Cadm1/Cadm2/Cntn1/Kcnq3/Kirrel3/Lrrc4c/Mapk10/Ncam1/Nrcam/Nrp1/Srgap1/Tjp1/Vav3    16\n3 7.937944 4.238134e-07 3.376380e-05 2.602363e-05                                        Adcy2/Glul/Gnao1/Gria2/Grin2c/Grm3/Itpr2/Plcb1/Slc1a2/Slc1a3    10\n4 6.360275 2.911406e-06 1.739565e-04 1.340779e-04                     Adcy2/Atp2b2/Camk1d/Camk2g/Fgf1/Fgfr3/Grin2c/Hrh1/Itpr2/Phka1/Phkg1/Plcb1/Vegfa    13\n5 7.220110 5.181671e-06 2.476839e-04 1.909037e-04                                                Adcy2/Gabbr2/Gabra2/Gabrb1/Glul/Gnao1/Slc6a1/Slc6a11     8\n6 5.675943 2.505014e-05 9.978306e-04 7.690833e-04                               Adcy2/Atp1a2/Atp2b2/Camk2g/Gabbr2/Gli3/Gria2/Grin2c/Mapk10/Ptch1/Vav3    11\n&gt; sessionInfo()\nR version 4.5.2 (2025-10-31 ucrt)\nPlatform: x86_64-w64-mingw32/x64\nRunning under: Windows 11 x64 (build 22000)\n \nMatrix products: default\n  LAPACK version 3.12.1\n \nlocale:\n[1] LC_COLLATE=Chinese (Simplified)_China.utf8  LC_CTYPE=Chinese (Simplified)_China.utf8    LC_MONETARY=Chinese (Simplified)_China.utf8\n[4] LC_NUMERIC=C                                LC_TIME=Chinese (Simplified)_China.utf8    \n \ntime zone: Asia/Shanghai\ntzcode source: internal\n \nattached base packages:\n[1] stats4    stats     graphics  grDevices utils     datasets  methods   base     \n \nother attached packages:\n [1] dplyr_1.1.4            ReactomePA_1.54.0      GseaVis_0.0.5          pathview_1.50.0        DOSE_4.4.0             enrichplot_1.30.0     \n [7] ggplot2_4.0.1          msigdbr_25.1.1         org.Mm.eg.db_3.22.0    AnnotationDbi_1.72.0   IRanges_2.44.0         S4Vectors_0.48.0      \n[13] Biobase_2.70.0         BiocGenerics_0.56.0    generics_0.1.4         clusterProfiler_4.18.0\n \nloaded via a namespace (and not attached):\n  [1] pheatmap_1.0.13         pak_0.9.0               DBI_1.2.3               httr_1.4.7              BiocParallel_1.44.0     yulab.utils_0.2.1      \n  [7] ggplotify_0.1.3         babelgene_22.9          pillar_1.11.1           Rgraphviz_2.54.0        R6_2.6.1                mime_0.13              \n [13] reticulate_1.44.1       viridis_0.6.5           ROCR_1.0-11             graphite_1.56.0         S7_0.2.1                parallelly_1.45.1      \n [19] GlobalOptions_0.1.2     polyclip_1.10-7         htmltools_0.5.8.1       remotes_2.5.0           ggrepel_0.9.6           fgsea_1.36.0           \n [25] forcats_1.0.1           spatstat.utils_3.2-0    fitdistrplus_1.2-4      tidyselect_1.2.1        utf8_1.2.6              RSQLite_2.4.4          \n [31] cowplot_1.2.0           scattermore_1.2         sessioninfo_1.2.3       spatstat.data_3.1-9     gridExtra_2.3           fs_1.6.6               \n [37] sctransform_0.4.2       RColorBrewer_1.1-3      future.apply_1.20.0     graph_1.88.0            R.oo_1.27.1             RcppHNSW_0.6.0         \n [43] reactome.db_1.94.0      Rtsne_0.17              lazyeval_0.2.2          scales_1.4.0            treeio_1.34.0           R.utils_2.13.0         \n [49] KEGGgraph_1.70.0        bitops_1.0-9            R.methodsS3_1.8.2       KEGGREST_1.50.0         promises_1.5.0          shape_1.4.6.1          \n [55] zoo_1.8-14              RSpectra_0.16-2         assertthat_0.2.1        tools_4.5.2             ape_5.8-1               shiny_1.11.1           \n [61] rlang_1.1.6             ggridges_0.5.7          evaluate_1.0.5          otel_0.2.0              reshape2_1.4.5          devtools_2.4.6         \n [67] colorspace_2.1-2        ellipsis_0.3.2          data.table_1.17.8       withr_3.0.2             tibble_3.3.0            RCurl_1.98-1.17        \n [73] xtable_1.8-4            plyr_1.8.9              aplot_0.2.9             systemfonts_1.3.1       httpuv_1.6.16           MASS_7.3-65            \n [79] stringr_1.6.0           openxlsx_4.2.8.1        GO.db_3.22.0            vctrs_0.6.5             lifecycle_1.0.4         codetools_0.2-20       \n [85] fastDummies_1.7.5       nlme_3.1-168            Seqinfo_1.0.0           future_1.68.0           pkgload_1.4.1           Rcpp_1.1.0             \n [91] rstudioapi_0.17.1       patchwork_1.3.2         stringi_1.8.7           pbapply_1.7-4           cachem_1.1.0            BiocManager_1.30.27    \n [97] tidytree_0.4.6          listenv_0.10.0          XVector_0.50.0          plotly_4.11.0           ggtree_4.0.1            pkgbuild_1.4.8         \n[103] ggfun_0.2.0             ggtangle_0.0.8          htmlwidgets_1.6.4       memoise_2.0.1           crayon_1.5.3            gridGraphics_0.5-1     \n[109] rappdirs_0.3.3          GOSemSim_2.36.0         png_0.1-8               progressr_0.18.0        fastmap_1.2.0           tidygraph_1.3.1        \n[115] tidyr_1.3.1             pkgconfig_2.0.3         cli_3.6.5               ggforce_0.5.0           ggiraph_0.9.2           lmtest_0.9-40          \n[121] usethis_3.2.1           RcppAnnoy_0.0.22        gdtools_0.4.4           viridisLite_0.4.2       splines_4.5.2           blob_1.2.4             \n[127] XML_3.99-0.20           globals_0.18.0          knitr_1.50              ica_1.0-3               spam_2.11-1             dichromat_2.0-0.1      \n[133] compiler_4.5.2          grid_4.5.2              bit_4.6.0               ggpp_0.5.9              glue_1.8.0              sp_2.2-0               \n[139] digest_0.6.38           irlba_2.3.5.1           graphlayouts_1.2.2      fontLiberation_0.1.0    fontBitstreamVera_0.1.1 dotCall64_1.2          \n[145] tweenr_2.0.3            lattice_0.22-7          ggraph_2.2.2            gson_0.1.0              igraph_2.2.1            ggnewscale_0.5.2       \n[151] qvalue_2.42.0           later_1.4.4             parallel_4.5.2          fontquiver_0.2.1        miniUI_0.1.2            gtable_0.3.6           \n[157] xfun_0.54               Biostrings_2.78.0       curl_7.0.0              org.Hs.eg.db_3.22.0     KernSmooth_2.23-26      survival_3.8-3         \n[163] jsonlite_2.0.0          magrittr_2.0.4          purrr_1.2.0             matrixStats_1.5.0       Matrix_1.7-4            SeuratObject_5.2.0     \n[169] fastmatch_1.1-6         RANN_2.6.2              circlize_0.4.16         polynom_1.4-1           bit64_4.6.0-1           cluster_2.1.8.1        \n[175] farver_2.1.2            zip_2.3.3  \næ¥è‡ªç”¨æˆ·çš„çµé­‚æ‹·é—®ï¼Œè¿ç€ä¸‰ä¸ªé—®å¥ï¼Œè¿™å¿…é¡»æ˜¯æœ‰ç»å†è¿‡æ¢ç´¢çš„ã€‚æˆ‘çœ‹äº†ä¸€ä¸‹ï¼Œè¿™ä¸ªKEGG categoryçš„æ˜ å°„å…³ç³»æ˜¯é¢„å­˜åœ¨åŒ…é‡Œçš„ï¼Œç„¶ååœ¨Bioconductor 3.22æ–°å‘è¡Œç‰ˆçš„æ—¶å€™ï¼Œæˆ‘å¿˜è®°å»æ›´ä¸€ä¸‹æ•°æ®äº†ã€‚\né‚£ä¹ˆKEGGæœ¬æ¥å°±æ˜¯åœ¨çº¿æŠ“å–æ•°æ®ï¼Œä¸ºä»€ä¹ˆè¿™ä¸ªè¦é¢„å­˜æ•°æ®å‘¢ï¼Ÿä¹Ÿåœ¨çº¿çˆ¬å®ƒä¸é¦™å—ï¼Ÿè¿™ä¸ªæˆ‘è‚¯å®šæ˜¯æœ‰åŸå› çš„ã€‚\n\n\nå› ä¸ºè¿™ä¸ªcategoryï¼Œä¸ç®¡ä½ æ˜¯ä»€ä¹ˆç‰©ç§ï¼Œéƒ½æ˜¯è¿™æ ·çš„åˆ†ç±»ï¼Œæ‰€ä»¥å®ƒæ˜¯é€šç”¨çš„ã€‚æ‰€æœ‰äººä¸€æ ·ç”¨ï¼Œè¿™å°±é€‚åˆå­˜ä¸€ä»½ã€‚\n\n\nå¦ä¸€æ–¹é¢ï¼Œçˆ¬è¿™ä¸ªcategoryçš„ä¿¡æ¯ï¼Œæˆ‘ç”¨çš„rvestå»å†™çš„çˆ¬è™«ï¼Œæˆ‘ä¸æƒ³æ”¾åˆ°clusterProfilerçš„ä»£ç é‡Œï¼Œå› ä¸ºæ”¾è¿›å»ï¼Œå°±ä¼šå¢åŠ ä¾èµ–åŒ…ã€‚\n\n\næˆ‘ç»™ç”¨æˆ·çš„å›å¤ï¼š\nThe KEGG pathway information is cached within the package. I apologize for not updating it before the latest release. Thank you for bringing this to my attention; the issue has now been resolved.\n&gt; head(x, 2)\n                                     category                         subcategory       ID                  Description GeneRatio   BgRatio RichFactor FoldEnrichment   zScore       pvalue     p.adjust       qvalue\nmmu04082 Environmental Information Processing Signaling molecules and interaction mmu04082 Neuroactive ligand signaling     30/30 196/10632  0.1530612       54.24490 40.02145 9.349530e-54 1.084545e-51 4.527141e-52\nmmu05032                       Human Diseases                Substance dependence mmu05032           Morphine addiction     13/30  93/10632  0.1397849       49.53978 25.00883 7.801411e-20 4.524818e-18 1.888763e-18\n                                                                                                                                                                                             geneID Count\nmmu04082 216227/11423/14678/14701/11549/14654/18750/57385/11539/15559/14683/11515/11541/104111/18442/242425/14806/13491/21334/63993/13488/213788/57014/108015/14396/21337/53623/110886/11513/210044    30\nmmu05032  \næ˜¨æ™šç»™æˆ‘çš„ç•™è¨€ï¼Œæ—©ä¸Šå°±è®¸æ„¿æˆåŠŸã€‚\n\nè¿™ä¸ªé”…æˆ‘æ˜¯è®¤çš„ã€‚\n\n\næ­£å¦‚å‰æ–‡æ‰€çš„ï¼Œé¢„å­˜æ•°æ®æ˜¯æœ‰åŸå› çš„ï¼Œä½†è¿™ä¹Ÿå¸¦æ¥äº†è¦å®šæœŸæ›´æ–°çš„é—®é¢˜ã€‚å› ä¸ºè¿™æ‰æ›´æ²¡å¤šä¹…ï¼Œåˆæ¥åæ˜ æ²¡æ›´äº†ã€‚è¿™æ ·å­æ‰‹å·¥æ›´ï¼Œå°±å¤ªè´¹å”äº†ï¼Œä¸€ä¸‹å­æŠŠè‡ªå·±ææ‰‹æ®‹äº†ã€‚\næ‰€è°“é‚£é‡Œæœ‰å‹è¿«ï¼Œé‚£é‡Œå°±æœ‰åæŠ—ï¼Œä¸èƒ½è®©å®ƒæŠŠæˆ‘ä»¬ç»™æ¬ºè´Ÿäº†ã€‚\næˆ‘çš„è§£å†³æ–¹æ¡ˆå°±æ˜¯ç”¨github actionã€‚å†™ä¸ªworkflowæ¥å¹²è¿™ä¸ªäº‹æƒ…ã€‚\n\nè§¦å‘æ¡ä»¶ ï¼šæ¯å‘¨æ—¥ UTC æ—¶é—´ 00:00 ( cron: â€˜0 0 * * 0â€™ ) æˆ–æ‰‹åŠ¨è§¦å‘ ( workflow_dispatch )ã€‚\nç¯å¢ƒé…ç½® ï¼šè‡ªåŠ¨å®‰è£… R ç¯å¢ƒå’Œå¿…è¦çš„ä¾èµ–ï¼ˆåŒ…æ‹¬ rvest , tibble , tidyr ä»¥åŠ clusterProfiler è‡ªèº«ï¼‰ã€‚\næ‰§è¡Œæ›´æ–° ï¼šå®‰è£…å½“å‰åŒ…åï¼Œå®Œå…¨æŒ‰ç…§æˆ‘å†™å¥½çš„ make updatedata é€»è¾‘è¿è¡Œã€‚\nè‡ªåŠ¨ PR ï¼šå¦‚æœæœ‰æ–‡ä»¶å˜åŠ¨ï¼ˆ .rda æ–‡ä»¶æ›´æ–°ï¼‰ï¼Œè‡ªåŠ¨åˆ›å»ºä¸€ä¸ªåä¸º update-kegg-data çš„åˆ†æ”¯å¹¶æäº¤ PRã€‚\n\næˆ‘æ‰‹åŠ¨è§¦å‘ï¼Œè¯•ä¸€ä¸‹å®ƒworkä¸workã€‚æ˜¾ç„¶æ˜¯æ²¡æœ‰é—®é¢˜çš„ï¼Œpull requestå·²ç»æ­£å¸¸å‡ºç°ã€‚é‚£ä¹ˆæˆ‘åªè¦mergeå°±è¡Œäº†ã€‚åšåˆ°æ•°æ®æ¯å‘¨å®šæœŸæ£€æŸ¥ï¼Œå¦‚æœ‰æ›´æ–°ï¼Œå°±è‡ªåŠ¨æ›´æ–°ã€‚\n\nå¥½äº†ï¼Œæ´»äººç»ˆç©¶ä¸èƒ½è¢«å°¿æ†‹æ­»ã€‚\nåç»­\nç»ˆç©¶æˆ‘è¿˜æ˜¯æ‡’ï¼ŒKEGGæ›´æ–°è¿˜æŒºé¢‘ç¹çš„ï¼Œæˆ‘ä¸æƒ³æ‰‹å·¥mergeï¼Œå†pushåˆ°Bioconductorã€‚äºæ˜¯æ•°æ®å’ŒåŒ…åˆ†ç¦»ï¼Œæ•°æ®æ˜¯é¢„å­˜æ²¡é”™ï¼Œä½†ä¸æ”¾åœ¨åŒ…é‡Œï¼Œè€Œæ˜¯æ”¾åˆ°githubä¸Šï¼Œç„¶åGitHub Actionsè‡ªåŠ¨æ›´æ–°ã€‚åŒ…é‡Œä¸å¸¦æ•°æ®ï¼Œæ€»æ˜¯ä»githubä¸Šè·å–ï¼Œè¿™æ ·æœ€ç»ˆå¯ä»¥åšåˆ°ä¸ç”¨ç®¡ã€‚"},"MyPackages/enrichplot/gseaplot2ä¸­çš„pvalue_tableå®šåˆ¶åŒ–":{"slug":"MyPackages/enrichplot/gseaplot2ä¸­çš„pvalue_tableå®šåˆ¶åŒ–","filePath":"MyPackages/enrichplot/gseaplot2ä¸­çš„pvalue_tableå®šåˆ¶åŒ–.md","title":"gseaplot2ä¸­çš„pvalue_tableå®šåˆ¶åŒ–","links":[],"tags":["enrichplot","GSEA","visualization"],"content":"\næ¥è‡ªäºGitHubä¸­çš„éœ€æ±‚ï¼Œä¸¤ä¸ªé—®é¢˜ï¼š\n\n\nåªç”»ä¸€æ¡é€šè·¯ï¼Œä¸æƒ³è¦pvalue_tableçš„rowname\n\n\nå¸Œæœ›pvalue_tableå¯å®šåˆ¶ï¼Œæ¯”å¦‚å¯ä»¥æŠŠNESæ”¾è¿›å»ã€‚\n\n\nå…ˆè·‘ä¸ªç¤ºä¾‹ï¼š\nlibrary(DOSE)\ndata(geneList)\nx &lt;- gseDO(geneList)\né‚£ä¹ˆæˆ‘åœ¨gseaplot2è¿™ä¸ªå‡½æ•°é‡ŒåŠ äº†ä¸¤ä¸ªå‚æ•°ï¼Œåˆ†åˆ«åº”å¯¹è¿™ä¸¤ä¸ªé—®é¢˜ï¼š\n\n\npvalue_table_columnsï¼šç”¨äºæŒ‡å®šä»€ä¹ˆä¿¡æ¯æ”¾è¿›è¡¨æ ¼é‡Œå±•ç¤º\n\n\npvalue_table_rownamesï¼šç”¨äºæŒ‡å®šé‚£ä¸ªä¿¡æ¯æ‹¿æ¥å½“rownames\n\n\né»˜è®¤è¡Œä¸ºä¿æŒä¸å˜ï¼š\ngseaplot2(x, 1, pvalue_table=T)\n\nå»æ‰rownamesï¼Œåªéœ€å°†pvalue_table_rownamesè®¾ä¸ºNULL:\ngseaplot2(x, 1, pvalue_table=T, pvalue_table_rownames=NULL)\n\nå¯ä»¥æŒ‡å®šrownamesç”¨ä»€ä¹ˆä¿¡æ¯ï¼Œæ¯”å¦‚æ­¤å¤„ç”¨IDï¼Œè¡¨æ ¼é€šè¿‡pvalue_table_columnså¯ä»¥è‡ªç”±æŒ‡å®šï¼š\ngseaplot2(x, 1, pvalue_table=T, \n    pvalue_table_rownames=&quot;ID&quot;, \n    pvalue_table_columns=c(&quot;NES&quot;, &quot;p.adjust&quot;))\n\nåƒä¸Šé¢è¿™ä¸ªå›¾ï¼Œä¹Ÿå¯ä»¥ä¸è¦rownamesï¼Œç„¶åæŠŠè¿™ä¸ªä¿¡æ¯æ”¾åˆ°tableé‡Œï¼š\ngseaplot2(x, 1, pvalue_table=T, \n    pvalue_table_rownames=NULL, \n    pvalue_table_columns=c(&quot;ID&quot;, &quot;NES&quot;, &quot;p.adjust&quot;))\n"},"MyPackages/enrichplot/på€¼çš„åˆ†å¸ƒä½ è€ƒè™‘è¿‡æ²¡æœ‰ï¼Ÿ":{"slug":"MyPackages/enrichplot/på€¼çš„åˆ†å¸ƒä½ è€ƒè™‘è¿‡æ²¡æœ‰ï¼Ÿ","filePath":"MyPackages/enrichplot/på€¼çš„åˆ†å¸ƒä½ è€ƒè™‘è¿‡æ²¡æœ‰ï¼Ÿ.md","title":"på€¼çš„åˆ†å¸ƒä½ è€ƒè™‘è¿‡æ²¡æœ‰ï¼Ÿ","links":[],"tags":["enrichplot","visualization","pvalue"],"content":"ç”»å›¾æ‹¿på€¼æ¥ä¸Šè‰²ï¼ŒåŸºæœ¬ä¸Šå¾ˆå¤šäººæ²¡æœ‰æ³¨æ„på€¼çš„åˆ†å¸ƒï¼Œé™¤éæ˜¯å·¥å…·åŸ¹å…»äº†ä¹ æƒ¯ï¼Œæ¯”å¦‚è¯´ç«å±±å›¾ï¼Œpå€¼å°±è¢«è½¬æ¢æˆ-10*log10(pvalue)ï¼Œæ‰€æœ‰äººå°±é»˜è®¤è¿™æ ·ç”»ï¼Œä½†æ¢ä¸€ä¸ªå°±ä¸æ¸…ä¸æ¥šäº†ã€‚\nå¦‚æœæ˜¯ä¸€ä¸ªéšæœºçš„ä¸œè¥¿ï¼Œå»åšæ£€éªŒï¼Œé‚£på€¼çš„åˆ†å¸ƒä¹Ÿä¼šç›¸å¯¹æ¯”è¾ƒå‡ä¸€ï¼Œæˆ–è€…æ˜¯æ¯”è¾ƒæ­£æ€ï¼Œå‡å€¼åœ¨0.5é™„è¿‘ä¹‹ç±»çš„ã€‚\nè¿™ä¸ªæˆ‘ä»¬éƒ½å¯ä»¥è¯•ä¸€ä¸‹çš„ï¼Œæ‹¿éšæœºçš„åŸºå› IDæ¥æä¸ªå¯Œé›†åˆ†æï¼š\nrequire(clusterProfiler)\ndata(geneList, package=&quot;DOSE&quot;)\n \nset.seed(42)\nde2 = sample(names(geneList), 200)\n \ny = enrichGO(de2, OrgDb=&#039;org.Hs.eg.db&#039;)\nplot(density(y@result$p.adjust, bw=0.01))\n\næˆ‘ä»¬æ‹¿ä¸ªå·®å¼‚åŸºå› æ¥åšå¯Œé›†çš„è¯ï¼Œç»“æœæ˜¯ä¸ä¸€æ ·çš„ã€‚\nde &lt;- names(geneList)[1:200]\nx = enrichGO(de, OrgDb=&#039;org.Hs.eg.db&#039;)\nplot(density(x@result$pvalue, bw=0.01))\n\nå°±ä¼šæœ‰æ¯”è¾ƒå¤šçš„å¾ˆå°çš„på€¼ï¼Œæ˜¯ä¸€ä¸ªåæ€åˆ†å¸ƒã€‚\næ¯”å¦‚æˆ‘æ‹¿å‰é¢20æ¡é€šè·¯æ¥ç”»å›¾ï¼Œæˆ‘ä»¬çœ‹ä¸€ä¸‹på€¼çš„åˆ†å¸ƒï¼š\nplot(x@result$pvalue[1:20])\n\nè¿™æ ·æ‹¿å»æ˜ å°„é¢œè‰²çš„è¯ï¼Œæ¯”å¦‚è¯´çº¢-è“ï¼Œç»“æœå°±æ˜¯å°¾éƒ¨å‡ ä¸ªpå€¼å¤§ç‚¹çš„æ˜¯è“è‰²ï¼Œå…¶å®ƒçš„ä¸€ç‰‡çº¢è‰²ï¼ŒåŒºåˆ†ä¸å¼€ã€‚\næˆ‘ä»¬å–ä¸ªå¯¹æ•°çœ‹çœ‹ï¼š\nplot(log10(x@result$pvalue[1:20]))\n\nåŒºåˆ†åº¦å°±æœ‰äº†ã€‚æˆ‘ä»¬ä»æ•´ä½“ä¸Šçœ‹çš„è¯ï¼Œpå€¼å°çš„å°±è¢«æ‹‰å¼€äº†ï¼Œpå€¼å¤§çš„ï¼Œä¼šèšé›†ã€‚\nplot(density(log10(x@result$pvalue), bw=0.01))\n\næ‰€ä»¥å¦‚æœåªæ˜¯å•çº¯åœ°æŠŠpå€¼æ˜ å°„åˆ°é¢œè‰²ï¼Œå°±ä¼šæ˜¯ä¸‹é¢è¿™ä¸¤ä¸ªå›¾è¿™æ ·å­ï¼Œä¸€ç‰‡çº¢åŒºåˆ†ä¸å¼€ã€‚è¿™æ ·çš„å›¾ç›¸ä¿¡å¤§å®¶ç»å¸¸çœ‹åˆ°ã€‚\n\n\næ‰€ä»¥æˆ‘è‡ªå·±ç”»å›¾çš„æ—¶å€™ï¼Œæˆ‘æ˜¯ä¼šå¯¹på€¼å–å¯¹æ•°æ¥æ˜ å°„çš„ã€‚ä½ çœ‹çœ‹æˆ‘ä»¬2021å¹´åœ¨The Innovationä¸Šå‘çš„clusterProfiler 4.0çš„æ–‡ç« ï¼Œå›¾å…¨éƒ¨æ˜¯æˆ‘æ“åˆ€çš„ã€‚\n\n\nè¿™äº›å›¾çš„é¢œè‰²åŒºåˆ†åº¦æ˜¯æœ‰çš„ã€‚è€Œç”»å›¾çš„ä»£ç æˆ‘æ˜¯æœ‰æä¾›çš„ã€‚å¤§å®¶å¯èƒ½æ²¡æ³¨æ„åˆ°è¿™ä¸ªç»†èŠ‚ï¼Œä¹Ÿå°±æ²¡æœ‰å»æŠ„æˆ‘çš„ä»£ç ã€‚\nå¯¹äºä¸Šé¢çš„xå¯¹è±¡ï¼Œä½ ç”¨dotplot()æ¥ç”»ï¼Œå‡ºæ¥çš„å›¾æ˜¯è¿™æ ·å­çš„ï¼š\ndotplot(x)\n\nå°±æ˜¯è¿™æ ·å­çº¢ç‚¹å¤šï¼Œä¸”æ²¡æœ‰åŒºåˆ†åº¦ã€‚\nä½ æ˜¯å¯ä»¥è¿›è¡Œå˜æ¢çš„ã€‚\ndotplot(x) + set_enrichplot_color(type=&#039;fill&#039;, transform=&#039;log10&#039;) \nå‡ºæ¥çš„å›¾å°±æ˜¯è¿™æ ·å­ï¼Œæœ‰åŒºåˆ†åº¦äº†ã€‚\n\nè¿™ä¸ªåŠŸèƒ½å¾ˆå¤šäººå¯èƒ½ä¸çŸ¥é“ã€‚enrichplotä¸­ä¸åŒçš„å›¾ï¼Œé…è‰²ä¸€è‡´ï¼Œæˆ‘ä¸æƒ³è¦åœ¨ä¸åŒçš„å‡½æ•°é‡Œæœ‰å·®ä¸å¤šçš„è®¾ç½®é¢œè‰²ä»£ç ï¼Œäºæ˜¯å°±å†™äº†è¿™ä¸ªset_enrichplot_coloræ¥ç»Ÿä¸€è®¾ç½®é¢œè‰²ã€‚å®ƒè¿˜æ˜¯è›®å¥½ç”¨çš„ã€‚æ¯”å¦‚è¯´æˆ‘æƒ³æŠŠé¢œè‰²æ¢æˆä»¥å‰ç»å…¸çš„çº¢-è“é…è‰²ã€‚åªéœ€è¦æŒ‡å®šcolors=c(&quot;red&quot;, &quot;blue&quot;)å³å¯ã€‚\ndotplot(x) + set_enrichplot_color(type=&#039;fill&#039;, transform=&#039;log10&#039;, colors=c(&quot;red&quot;, &quot;blue&quot;))\n\nè™½ç„¶é•¿æœŸä»¥æ¥ï¼Œæˆ‘ä»¬æ˜¯å¯ä»¥å¯¹på€¼å–å¯¹æ•°çš„ï¼Œä½†å¤ªå¤šäººä¸ä¼šç”¨äº†ï¼Œå¤ªå¤šçš„å›¾ï¼Œéƒ½æ˜¯ä¸€ç‰‡çº¢äº†ã€‚äºæ˜¯æˆ‘å†³å®šåœ¨æ–°çš„ç‰ˆæœ¬ä¸­ï¼Œè®©å–å¯¹æ•°æˆä¸ºé»˜è®¤ã€‚æ‰€ä»¥å¦‚æœä½ ç”¨äº†v&gt;=1.29.2ï¼Œé‚£ä¹ˆä½ ç”¨dotplot(x)å‡ºæ¥çš„ï¼Œå°±æ˜¯å–äº†å¯¹æ•°çš„på€¼è¿›è¡Œé¢œè‰²æ˜ å°„çš„ã€‚\nä½ å¯èƒ½åˆä¼šæƒ³ï¼Œä½ å…¨éƒ½è¦ï¼Œæ–°çš„é»˜è®¤ä½ æƒ³è¦ï¼Œæ—§çš„é»˜è®¤ï¼Œä½ è¿˜æƒ³è¦ï¼Œæ€ä¹ˆåŠï¼Ÿç®€å•ï¼Œè¿˜æ˜¯ç”¨set_enrichplot_colorï¼Œä½ åªè¦æŠŠtransform=&quot;identity&quot;ä¼ å…¥å³å¯ã€‚ä¹Ÿå°±æ˜¯ï¼š\ndotplot(x) + set_enrichplot_color(type=&#039;fill&#039;, transform=&#039;identity&#039;) "},"MyPackages/ggtree/å¯äº¤äº’çš„ggtree":{"slug":"MyPackages/ggtree/å¯äº¤äº’çš„ggtree","filePath":"MyPackages/ggtree/å¯äº¤äº’çš„ggtree.md","title":"å¯äº¤äº’çš„ggtree","links":[],"tags":["ggtree","interactive"],"content":"\n\nå¼€å‘ggtreeå°±æ˜¯æˆ‘çš„ä½¿å‘½ï¼\n\nå¯äº¤äº’è¿™ä¸ªåŠŸèƒ½æ˜¯GISAIDçš„åˆ›å§‹äººPeter Bognerå’Œæˆ‘æå‡ºæ¥çš„ï¼Œæˆ‘ä»¬æ‹‰äº†ä¸ªçº¿ä¸ŠZoomä¼šè®®ï¼ŒèŠäº†èŠã€‚äºæ˜¯æˆ‘å’ŒåŒæ–Œå°±ç€æ‰‹æ¥åšè¿™ä¸‹äº‹æƒ…ã€‚\nå½“æˆ‘ä»¬åšäº†ä¸ªdemoï¼Œå‘ç»™ä»–ä»¬çš„æ—¶å€™ï¼Œè·Ÿæˆ‘è¯´ï¼Œä¸¤å‘¨åWHOè¦å¼€ä¼šé€‰ç–«è‹—æ ªï¼Œä»–ä»¬æŠŠæ•°æ®æ•´ç†äº†å‘æˆ‘ï¼Œæˆ‘æ¥å¸®ä»–ä»¬ç”»ã€‚\n\nè¿™æ—¶å€™ï¼Œæˆ‘åŸºæœ¬ä¸Šå°±æœ‰æ±‚å¿…åº”ï¼Œä¹ƒè‡³äºè¯´åŠ ç­åŠ ç‚¹ä¹Ÿè¦å¸®ä»–ä»¬å¼„äº†ã€‚å› ä¸ºå¯ä»¥è¯´ï¼Œè¿™æ˜¯åœ¨ç»™ä¸–ç•Œåšè´¡çŒ®ã€‚\nggtreeçš„äº¤äº’ï¼Œå‡ºç°å¾—æ‚„æ— å£°æ¯\nlibrary(ggtree)\n \n  \nset.seed(123)\ntr &lt;- rtree(20)\n# è¿™æ˜¯é™æ€çš„ï¼Œå’ŒåŸæ¥ä¸€æ ·\np &lt;- ggtree(tr)\n \n# äº¤äº’å¼€å…³ï¼Œè¿™ç¬¬äºŒä¸ªpï¼Œæ˜¯å¯äº¤äº’çš„å›¾äº†\nggtree_set_interactive()\np\n\nå°±æ˜¯è¿™ä¹ˆç®€å•ï¼Œè¿™æ˜¯ä¸€ä¸ªæˆªå›¾ï¼Œæ‰€ä»¥çœ‹ä¸å‡ºå•¥ï¼Œä½†æˆ‘ä»¬ä»çº¢è‰²æ¡†å‡ºæ¥çš„åœ°æ–¹ï¼Œå¯ä»¥çœ‹åˆ°ï¼Œè¿™æ˜¯ä¸€å¼ htmlçš„ã€å¯äº¤äº’ã€‘çš„å›¾ã€‚\nå½“ç„¶è¿™å¼ å›¾ï¼Œäº‹å®ä¸Šæˆ‘ä»¬æ²¡æœ‰ä»»ä½•å¯äº¤äº’çš„è®¾ç½®ï¼Œå®ƒå…¶å®æ˜¯æ²¡æœ‰äº¤äº’å…ƒç´ çš„å¯äº¤äº’å›¾ï¼Œæœ‰ç‚¹ç»•å£ï¼Œä½†å·®ä¸å¤šå¯ä»¥è¯´ï¼Œæäº†ä¸ªå¯‚å¯ã€‚\nä½†å®ƒå°±æ˜¯è¿™ä¹ˆç®€å•ï¼Œæœ‰ä¸ªå¼€å…³ï¼Œä½ å¼€äº†ï¼Œæ˜¯äº¤äº’çš„ï¼Œå…³äº†ï¼Œæ˜¯é™æ€çš„ã€‚ä½ æ„Ÿè§‰ä¸åˆ°å®ƒçš„å­˜åœ¨ã€‚è¿™å°±æ˜¯æˆ‘ä»¬æ‰€è¿½æ±‚çš„ï¼Œæè‡´çš„ç®€å•ï¼Œæ²¡æœ‰å­¦ä¹ æˆæœ¬ã€‚\nå°±è¿™ä¸ªäº‹æƒ…ï¼ŒåŒæ–Œç»™æˆ‘æäº†æ„è§ï¼Œè¯´æä¸ªå¯‚å¯è¿™ç§ï¼Œè¦ç»™ä¸ªwarningã€‚\n\næˆ‘ç»™ä»–çš„å›å¤å°±æ˜¯ï¼Œæä¸ªå¯‚å¯åœ¨æŸä¸ªåœºæ™¯ä¸‹ï¼Œæˆ–è€…æ˜¯æœ‰ç”¨çš„ã€‚æˆ‘å†åŠ ä¸ªå¼€å…³ï¼Œå¯ä»¥å…³æ‰warningã€‚\n\næ²¡é”™ï¼Œæˆ‘ä»¬å°±æ˜¯è¿™ä¹ˆç»†èŠ‚æ§ï¼Œè¿™æ ·æ‰åšåˆ°äº†ï¼Œå‘ˆç°ç»™å¤§å®¶çš„æ˜¯æè‡´çš„ç®€å•ã€‚\næ€ä¹ˆæ ·å¯äº¤äº’ï¼Ÿ\nä½ åŸºæœ¬ä¸Šåªéœ€è¦çŸ¥é“ï¼ŒåŠ å¤šäº†ä¸¤ä¸ªæ˜ å°„ï¼Œå°±å¯ä»¥äº†ï¼š\n\ndata_id ä¸ºå›¾å½¢å…ƒç´ åˆ†é…å”¯ä¸€æ ‡è¯†ç¬¦ï¼Œç”¨äºJavaScriptå›è°ƒå‡½æ•°çš„å…ƒç´ è¯†åˆ«ï¼Œå®ç°äº¤äº’åŠŸèƒ½ã€‚\ntooltip ä¸ºå›¾å½¢å…ƒç´ æ·»åŠ é¼ æ ‡æ‚¬åœæç¤ºæ¡†ï¼Œå½“é¼ æ ‡æ‚¬åœæ—¶ï¼Œæ˜¾ç¤ºè‡ªå®šä¹‰ä¿¡æ¯ã€‚\n\næ ¸å¿ƒå°±è¿™äº›ï¼Œå…¶å®ƒçš„ä»¥åå†è®²ã€‚\nè®©æˆ‘ä»¬æ¥çœ‹ä¸€ä¸ªçœŸæ­£çš„å¯äº¤äº’å›¾ï¼š\np2 &lt;- ggtree(\nÂ  Â  Â  Â tr,\nÂ  Â  Â  Â mapping = aes(\nÂ  Â  Â  Â  Â  Â tooltip = round(branch.length, 2),\nÂ  Â  Â  Â  Â  Â data_id = node\nÂ  Â  Â  Â  Â )\nÂ  Â )\n \np2\nä»£ç ç®€å•å§ï¼Œæ˜¾ç¤ºçš„ä¿¡æ¯æ˜¯ä¿ç•™ä¸¤ä¸ªå°æ•°ç‚¹çš„åˆ†æ”¯é•¿åº¦ã€‚\n\né¼ æ ‡æ‚¬åœï¼Œä¿¡æ¯å‡ºç°ï¼Œå°±è¿™æ ·ç®€å•ã€‚\nç„¶åæˆ‘ä»¬ç…§å¸¸åŠ å›¾å±‚ï¼Œä½ å¯ä»¥åœ¨å¤šä¸ªå›¾å±‚éƒ½è®¾ç½®æœ‰æ‚¬åœï¼Œéƒ½æ˜¯å¯ä»¥çš„ã€‚\ndt &lt;- data.frame(id = c(36, 38), type=c(&quot;A&quot;, &quot;B&quot;))\n \np3 &lt;- p2 +\nÂ  Â  Â geom_hilight(\nÂ  Â  Â  Â  data = dt,\nÂ  Â  Â  Â  mapping = aes(\nÂ  Â  Â  Â  Â  Â node = id,\nÂ  Â  Â  Â  Â  Â fill = type,\nÂ  Â  Â  Â  Â  Â tooltip = paste0(&quot;clade of node &quot;, id),\nÂ  Â  Â  Â  Â  Â data_id = type\nÂ  Â  Â  Â  ),\nÂ  Â  Â  Â  to.bottom = TRUE\nÂ  Â  Â )\n \np3\n\nçœ¼å°–çš„ä½ å¯èƒ½å‘ç°ï¼Œè¿™å¼ æˆªå›¾ï¼Œé«˜äº®çš„åŒºåŸŸå’Œlegendå¯¹åº”ä¸ä¸Šï¼Œå…¶å®æ˜¯å¯¹ç€çš„ï¼Œæ²¡æœ‰é—®é¢˜ã€‚ä½ çœ‹åˆ°çš„ä¸ä¸€æ ·ï¼Œæ˜¯å› ä¸ºæˆ‘æˆªå›¾çš„æ˜¯é¼ æ ‡æ­£å¥½æ‚¬åœåœ¨ä¸Šé¢ï¼Œé¼ æ ‡æ‚¬åœä¼šé«˜äº®ç›¸åº”çš„å›¾å½¢å…ƒç´ ï¼Œå°±åƒä¸Šä¸€å¼ å›¾ï¼Œåœ¨åˆ†æ”¯ä¸Šï¼Œé‚£ä¸ªåˆ†æ”¯å°±æœ‰äº†é¢œè‰²ä¸€æ ·ï¼Œæ‰€ä»¥ç›¸å½“äºå å¤šäº†ä¸ªé¢œè‰²ï¼Œå°±çœ‹ç€ä¸ä¸€æ ·ã€‚å½“æˆ‘ä»¬æŠŠé¼ æ ‡ç§»å¼€ä¹‹åï¼Œå®ƒå°±æ˜¯åŸæ¥çš„é¢œè‰²ï¼Œæ˜¯ä¸€æ¨¡ä¸€æ ·çš„ã€‚\nç„¶åå¯äº¤äº’å›¾ï¼Œä¸€èˆ¬ä¸æ˜¯åªç»™ä½ å¯¼å‡ºPNG, SVGè¿™äº›ï¼Œä¸ç»™ä¿å­˜PDFï¼Ÿ\nè®©æˆ‘ä»¬æŠŠäº¤äº’ç‰¹æ€§ç»™å…³äº†ã€‚\nggtree_unset_interactive()\n \np3\n\nè¿™å°±æ˜¯ç¾å¦™ä¹‹å¤„ï¼Œé›¶å­¦ä¹ æˆæœ¬ï¼Œé™æ€ä¸äº¤äº’ï¼Œéšæ„åˆ‡æ¢ã€‚"},"MyPackages/mirrorselect/åŒ…ä¸å­˜åœ¨ï¼é•œåƒè¦ä¸è¦èƒŒé”…ï¼Ÿ":{"slug":"MyPackages/mirrorselect/åŒ…ä¸å­˜åœ¨ï¼é•œåƒè¦ä¸è¦èƒŒé”…ï¼Ÿ","filePath":"MyPackages/mirrorselect/åŒ…ä¸å­˜åœ¨ï¼é•œåƒè¦ä¸è¦èƒŒé”…ï¼Ÿ.md","title":"åŒ…ä¸å­˜åœ¨ï¼é•œåƒè¦ä¸è¦èƒŒé”…ï¼Ÿ","links":[],"tags":["mirrorselect","R"],"content":"ä¸€æ¡æŒ‡ä»¤è£…ä¸€ä¸‹ggplot2ï¼Œå®ƒç«Ÿç„¶å‘Šè¯‰æˆ‘æ²¡è¿™ä¸ªåŒ…ï¼Œè¿™éš¾é“ä¸æ˜¯åœ¨æ¬ºè´Ÿæˆ‘ï¼Ÿ\n&gt; install.packages(&quot;ggplot2&quot;)\nInstalling package into â€˜E:/software-data/RLibraryâ€™\n(as â€˜libâ€™ is unspecified)\nWarning: unable to access index for repository mirrors.ustc.edu.cn/CRAN/src/contrib:\n  cannot open URL &#039;mirrors.ustc.edu.cn/CRAN/src/contrib/PACKAGES&#039;\nWarning: unable to access index for repository mirrors.ustc.edu.cn/CRAN/bin/windows/contrib/4.5:\n  cannot open URL &#039;mirrors.ustc.edu.cn/CRAN/bin/windows/contrib/4.5/PACKAGES&#039;\nWarning message:\npackage â€˜ggplot2â€™ is not available for this version of R\n \nA version of this package for your version of R might be available elsewhere,\nsee the ideas at\ncran.r-project.org/doc/manuals/r-patched/R-admin.html#Installing-packages \næ€€ç–‘äººç”Ÿï¼Œæƒ³èµ·æˆ‘6å¹´å‰å†™çš„é­”é•œmirrorselectåŒ…ï¼ˆç”µæ¢¯ï¼šã€Šé­”é•œé­”é•œå‘Šè¯‰ä½ ï¼Œå®ƒä¸ŠCRANäº†ã€‹ï¼‰ï¼Œæœæ–­æµ‹é€Ÿï¼Œæ¢ä¸ªé•œåƒã€‚\n&gt; mirrorselect::get_mirror(&#039;CRAN&#039;, &#039;cn&#039;) -&gt; m\n&gt; head(m)\n[1] &quot;mirrors.tuna.tsinghua.edu.cn/CRAN/&quot; &quot;mirrors.bfsu.edu.cn/CRAN/&quot;          &quot;mirrors.pku.edu.cn/CRAN/&quot;          \n[4] &quot;mirrors.ustc.edu.cn/CRAN/&quot;          &quot;mirrors.zju.edu.cn/CRAN/&quot;           &quot;mirrors.qlu.edu.cn/CRAN/&quot;          \n&gt; length(m)\n[1] 12\n&gt; mirrorselect::mirrorselect(m) -&gt; st\n&gt; st\n                                       mirror speed\n1           mirrors.hust.edu.cn/CRAN/  0.13\n2           mirrors.ustc.edu.cn/CRAN/  0.14\n3        mirrors.sustech.edu.cn/CRAN/  0.14\n4            mirrors.pku.edu.cn/CRAN/  0.18\n5            mirrors.nju.edu.cn/CRAN/  0.23\n6             mirror.lzu.edu.cn/CRAN/  0.26\n7     mirrors.sjtug.sjtu.edu.cn/cran/  0.27\n8          mirrors.nwafu.edu.cn/cran/  0.28\n9            mirrors.zju.edu.cn/CRAN/  0.32\n10           mirrors.qlu.edu.cn/CRAN/  0.41\n11          mirrors.bfsu.edu.cn/CRAN/  0.53\n12 mirrors.tuna.tsinghua.edu.cn/CRAN/  0.55\nçœ‹ä¸Šå»åç§‘æœ€å¿«ï¼Œæ¢ä¸Šå†è¯•è¯•ï¼Œè£…åŒ…å°±ä¸æ»‘äº†ã€‚\n&gt; options(repos = c(CRAN = &quot;mirrors.hust.edu.cn/CRAN/&quot;))\n&gt; install.packages(&quot;ggplot2&quot;)\nInstalling package into â€˜E:/software-data/RLibraryâ€™\n(as â€˜libâ€™ is unspecified)\ntrying URL &#039;mirrors.hust.edu.cn/CRAN/bin/windows/contrib/4.5/ggplot2_3.5.2.zip&#039;\nContent type &#039;application/zip&#039; length 5016803 bytes (4.8 MB)\ndownloaded 4.8 MB\n \npackage â€˜ggplot2â€™ successfully unpacked and MD5 sums checked\n \nThe downloaded binary packages are in\n        C:\\Users\\HUAWEI\\AppData\\Local\\Temp\\RtmpS8YcTh\\downloaded_packages\n\nCRANåŒ…ï¼Œç”¨install.packages(&quot;mirrorselect&quot;)å°±å¯ä»¥å®‰è£…ï¼Œè®©ä½ ä¸‹åŒ…æ¥ä¸Šå¤§æ°´ç®¡ã€‚"},"MyPackages/swissmodel/ä¸ºäº†ä¸Šè¯¾ï¼Œç»™Swiss-Modelå†™ä¸ªRåŒ…å§":{"slug":"MyPackages/swissmodel/ä¸ºäº†ä¸Šè¯¾ï¼Œç»™Swiss-Modelå†™ä¸ªRåŒ…å§","filePath":"MyPackages/swissmodel/ä¸ºäº†ä¸Šè¯¾ï¼Œç»™Swiss-Modelå†™ä¸ªRåŒ…å§.md","title":"ä¸ºäº†ä¸Šè¯¾ - ç»™Swiss-Modelå†™ä¸ªRåŒ…å§","links":[],"tags":["swissmodel","R","protein-structure"],"content":"Swiss-Modelæ˜¯å•¥ï¼Ÿ\næ¥è‡ªè¯´æ˜æ–‡æ¡£çš„ä»‹ç»ï¼š\n\nSWISS-MODEL is a web-based integrated service dedicated to protein structure homology modelling. It guides the user in building protein homology models at different levels of complexity.\nBuilding a homology model comprises four main steps: (i) identification of structural template(s), (ii) alignment of target sequence and template structure(s), (iii) model-building, and (iv) model quality evaluation. These steps require specialised software and integrate up-to-date protein sequence and structure databases. Each of the above steps can be repeated interactively until a satisfying modelling result is achieved.\n\nä½¿ç”¨å¾ˆç®€å•ï¼ŒWeb Severé‡Œè´´åºåˆ—å°±è¡Œï¼š\n\nä¸ºä»€ä¹ˆè¦å†™ä¸ªRåŒ…ï¼Ÿ\nä¸Šå®éªŒè¯¾ï¼Œè¦ä½¿ç”¨Swiss-Modelè¿›è¡Œè›‹ç™½è´¨å»ºæ¨¡ï¼Œå…¶å®ƒçš„æ“ä½œéƒ½åœ¨Ré‡Œå¯ä»¥æï¼Œä½†è¿™ä¸€æ­¥ï¼Œå¾—åˆ°ç½‘é¡µä¸Šæ¥å¼„ï¼Œå†æŠŠç»“æœä¸‹è½½ä¸‹æ¥ï¼Œåˆå›åˆ°Rã€‚å°±æƒ³é—®è‡ªå·±ä¸€ä¸ªé—®é¢˜ï¼šèƒ½ä¸èƒ½è£…é€¼è£…å…¨å¥—ï¼Ÿäºæ˜¯å°±ç€æ‰‹å†™ä¸€ä¸ªRåŒ…ã€‚\nå®‰è£…\nä¸€æ¡æŒ‡ä»¤å®‰è£…ï¼š\nyulab.utils::install_zip_gh(&quot;YuLab-SMU/swissmodel&quot;)\nè®¾ç½®\né¦–å…ˆæ˜¯éœ€è¦ä¸€ä¸ªAPI tokenï¼Œæ³¨å†Œäº†åœ¨è´¦å·é‡Œå°±å¯ä»¥çœ‹åˆ°ï¼š\n\nç„¶ååŠ è½½swissmodelåŒ…ï¼Œç”¨set_swissmodel_tokenå‡½æ•°è®¾ç½®å³å¯ã€‚\nlibrary(swissmodel)\nset_swissmodel_token(&quot;YOUR_SWISSMODEL_TOKEN&quot;)\nå»ºæ¨¡\né¦–å…ˆä½ å¾—æœ‰åºåˆ—å§ï¼š\nhemoglobin_sequence &lt;- &quot;VLSPADKTNVKAAWAKVGNHAADFGAEALERMFMSFPSTKTYFSHFDLGHNSTQVKGHGKKVADALTKAVGHLDTLPDALSDLSDLHAHKLRVDPVNFKLLSHCLLVTLAAHLPGDFTPSVHASLDKFLASVSTVLTSKYR&quot;\nç„¶åå»ºæ¨¡ç›´æ¥æ˜¯å†™æˆä¸€ä¸ªworkflowï¼Œæ‰€ä»¥ä½ åªè¦è·‘è¿™ä¸€å¥ä»£ç å°±è¡Œï¼š\nresult &lt;- run_automodel_workflow(hemoglobin_sequence)\nç„¶åå°±æ˜¯ç­‰ï¼ŒæœŸé—´å‡½æ•°æ‰“å°å‡ºæ¥çš„ä¿¡æ¯å¦‚ä¸‹ï¼š\nStarting automodel workflow...\nAUTOMODEL task submitted successfully!\nProject ID: 25f307\nProject status: INITIALISED [Waited: 0 seconds]\nProject status: RUNNING [Waited: 32 seconds]\nProject status: RUNNING [Waited: 63 seconds]\nProject status: RUNNING [Waited: 95 seconds]\nProject status: RUNNING [Waited: 127 seconds]\nProject status: RUNNING [Waited: 158 seconds]\nProject status: RUNNING [Waited: 189 seconds]\nProject status: RUNNING [Waited: 220 seconds]\nProject status: RUNNING [Waited: 251 seconds]\nProject status: RUNNING [Waited: 282 seconds]\nProject status: COMPLETED [Waited: 313 seconds]\nModeling completed successfully!\nFile downloaded successfully: ./modeling_results/25f307_model_1.pdb\nFile downloaded successfully: ./modeling_results/25f307_model_2.pdb\nè¿™ä¸ªworkflowåŒ…å«äº†å‡ æ­¥ï¼š\n\n\nåˆ›å»ºä¸€ä¸ªè¾“å‡ºçš„æ–‡ä»¶å¤¹ï¼Œé»˜è®¤./modeling_results\n\n\næäº¤åºåˆ—ï¼Œå¾—åˆ°ä¸€ä¸ªé¡¹ç›®ID\n\n\næ£€æŸ¥è¿™ä¸ªé¡¹ç›®çš„çŠ¶æ€\n\n\nå½“é¡¹ç›®å®Œæˆä¹‹åï¼Œæ‹¿åˆ°ç»“æœçš„URL\n\n\nä¸‹è½½æ–‡ä»¶\n\n\nè¿”å›è¿è¡Œæ•´ä¸ªworkflowçš„ä¸€äº›ç›¸å…³ä¿¡æ¯\n\n\nresulté‡Œè®°å½•äº†ç›¸å…³çš„ä¿¡æ¯ï¼Œç»“æœå¦‚ä¸‹ï¼š\n&gt; result\n$project_id\n[1] &quot;25f307&quot;\n \n$status\n[1] &quot;COMPLETED&quot;\n \n$downloaded_files\n$downloaded_files$model_1\n[1] &quot;./modeling_results/25f307_model_1.pdb&quot;\n \n$downloaded_files$model_2\n[1] &quot;./modeling_results/25f307_model_2.pdb&quot;\n \n$project_info_file\n[1] &quot;./modeling_results/25f307_info.json&quot;\nè¿™äº›ä¿¡æ¯ä¹Ÿä¼šè¢«å†™å…¥jsonæ–‡ä»¶ï¼Œè¿™æ ·ä½ é€€å‡ºRä¹‹åï¼Œè¿™äº›ä¿¡æ¯éƒ½æ˜¯æœ‰ä¿ç•™çš„ã€‚è¿™ä¸ªjsonæ–‡ä»¶çš„ä¿¡æ¯å¾ˆå®¹æ˜“è¯»è¿›æ¥ï¼š\n&gt; jsonlite::fromJSON(result$project_info_file)\n$project_id\n[1] &quot;25f307&quot;\n \n$status\n[1] &quot;COMPLETED&quot;\n \n$models\n  model_id    status gmqe                                               coordinates_url                                                  modelcif_url avg_local_score\n1       01 COMPLETED 0.98 swissmodel.expasy.org/project/25f307/models/01.pdb.gz swissmodel.expasy.org/project/25f307/models/01.cif.gz              NA\n2       02 COMPLETED 0.90 swissmodel.expasy.org/project/25f307/models/02.pdb.gz swissmodel.expasy.org/project/25f307/models/02.cif.gz            0.85\n \n$date_created\n[1] &quot;2025-11-10T05:54:31.192032Z&quot;\n \n$project_title\n[1] &quot;R Automodel&quot;\n \n$view_url\n[1] &quot;swissmodel.expasy.org/project/25f307/view&quot;\nè¿™ä¸ªview_urlç‚¹å¼€ä¹‹åï¼Œä¹Ÿå¯ä»¥åˆ°Swiss-Modelç½‘ç«™ä¸Šçœ‹ç»“æœï¼š\n\næ‰€ä»¥ä¸€ä¸ªæµç¨‹ï¼Œå®Œäº‹äº†ã€‚å»ºæ¨¡å®Œæˆçš„pdbæ–‡ä»¶å·²ç»ä¸‹è½½åˆ°äº†æœ¬åœ°ï¼Œæˆ‘ä»¬å¯ä»¥åœ¨Ré‡Œè¯»å–ã€‚\nè¿™ä¸ªRåŒ…åˆ°è¿™é‡Œï¼Œåº”è¯¥è¯´å°±å®Œæˆäº†å¼€å¤´è¯´çš„ï¼Œè¦åœ¨Ré‡Œç”¨Swiss-Modelçš„ä½¿å‘½ã€‚æ¼”ç¤ºçš„è¿™ä¸ªæµç¨‹ï¼Œé‡Œé¢æ¯ä¸€æ­¥éƒ½æ˜¯å¯ä»¥å•ç‹¬è¿è¡Œçš„ï¼Œå‡½æ•°éƒ½æ˜¯åˆ†å¼€å¹¶ä¸”æ˜¯exportçš„ã€‚\nè›‹ç™½ç»“æ„åˆå°è±¡\næˆ‘è¿˜ç»§ç»­å†™äº†ä¸€äº›ç®€å•çš„å‡½æ•°ï¼Œå¯ä»¥åšä¸€äº›ç®€å•çš„åˆ†æã€‚\né¦–å…ˆè¯»å–PDBæ–‡ä»¶ï¼Œè°ƒç”¨äº†bio3dåŒ…çš„read.pdb:\n&gt; pdb = read.pdb(result$downloaded_files[[1]])\nç„¶åä½ å¯ä»¥ç”¨summaryæ¥çœ‹è¿™ä¸ªå¯¹è±¡çš„ä¸€äº›ä¿¡æ¯ï¼š\n&gt; summary(pdb)\n \n Call:  read.pdb(file = result$downloaded_files[[1]])\n \n   Total Models#: 1\n     Total Atoms#: 1076,  XYZs#: 3228  Chains#: 1  (values: A)\n \n     Protein Atoms#: 1076  (residues/Calpha atoms#: 141)\n     Nucleic acid Atoms#: 0  (residues/phosphate atoms#: 0)\n \n     Non-protein/nucleic Atoms#: 0  (residues: 0)\n     Non-protein/nucleic resid values: [ none ]\n \n+ attr: atom, xyz, calpha, call\nåœ¨swissmodelåŒ…é‡Œï¼Œä¹Ÿæä¾›äº†å…¶å®ƒä¸€äº›å‡½æ•°ï¼ŒåŒ…æ‹¬pdb_info():\n&gt; pdb_info(pdb)\nProtein Structure Information:\n  - Atoms: 1076\n  - Residues: 141\n  - Chains: A\n  - Model dimensions (&lt;c3&gt;&lt;85&gt;):\n    X: 43.88\n    Y: 27.32\n    Z: 41.17\n$atoms\n[1] 1076\n \n$residues\n[1] 141\n \n$chains\n[1] &quot;A&quot;\n \n$dimensions\n     x      y      z \n43.883 27.317 41.168 \nä»¥åŠanalyze_model_quality():\n&gt; analyze_model_quality(pdb)\n$atoms\n[1] 1076\n \n$residues\n[1] 141\n \n$chains\n[1] &quot;A&quot;\n \n$resolution\n[1] NA\n \n$rama_favored\n[1] 79.28571\n \n$rama_allowed\n[1] 9.285714\n \n$rama_outliers\n[1] 11.42857\nå®ƒä¼šè®¡ç®—æ‹‰å¼å›¾çš„ä¸€äº›å‚æ•°ï¼š\n\n\nRamachandran Favoredï¼ˆæœ€å…è®¸åŒºåŸŸï¼‰ï¼šè¿™äº›åŒºåŸŸå¯¹åº”çš„Ï†å’ŒÏˆäºŒé¢è§’ç»„åˆåœ¨ç«‹ä½“åŒ–å­¦ä¸Šæ˜¯æœ€å…è®¸çš„ï¼Œé€šå¸¸å¯¹åº”äºè›‹ç™½è´¨ä¸­å¸¸è§çš„äºŒçº§ç»“æ„ï¼Œå¦‚Î±-èºæ—‹å’ŒÎ²-æŠ˜å ã€‚è¿™äº›åŒºåŸŸå†…çš„æ®‹åŸºæ„è±¡åœ¨èƒ½é‡ä¸Šæ˜¯æœ‰åˆ©çš„ï¼Œä¸”æ²¡æœ‰åŸå­é—´çš„ç©ºé—´å†²çªã€‚\n\n\nRamachandran Allowedï¼ˆå…è®¸åŒºåŸŸï¼‰ï¼šè¿™äº›åŒºåŸŸå¯¹åº”çš„Ï†å’ŒÏˆäºŒé¢è§’ç»„åˆåœ¨ç«‹ä½“åŒ–å­¦ä¸Šæ˜¯å…è®¸çš„ï¼Œä½†å¯èƒ½ä¸å¦‚æœ€å…è®¸åŒºåŸŸé‚£ä¹ˆç†æƒ³ã€‚è¿™äº›åŒºåŸŸå†…çš„æ®‹åŸºæ„è±¡åœ¨èƒ½é‡ä¸Šå¯èƒ½æ˜¯å¯æ¥å—çš„ï¼Œä½†å¯èƒ½ä¸å¦‚æœ€å…è®¸åŒºåŸŸç¨³å®šã€‚\n\n\nRamachandran Outliersï¼ˆå¼‚å¸¸åŒºåŸŸï¼‰ï¼šè¿™äº›åŒºåŸŸå¯¹åº”çš„Ï†å’ŒÏˆäºŒé¢è§’ç»„åˆåœ¨ç«‹ä½“åŒ–å­¦ä¸Šæ˜¯ä¸å…è®¸çš„ï¼Œå› ä¸ºå®ƒä»¬ä¼šå¯¼è‡´åŸå­é—´çš„ç©ºé—´å†²çªæˆ–èƒ½é‡ä¸Šä¸åˆ©çš„æ„è±¡ã€‚å‡ºç°åœ¨è¿™äº›åŒºåŸŸçš„æ®‹åŸºå¯èƒ½è¡¨ç¤ºè¯¥æ®‹åŸºçš„æ„è±¡å­˜åœ¨é—®é¢˜ï¼Œä¾‹å¦‚åœ¨è›‹ç™½è´¨ç»“æ„å»ºæ¨¡æˆ–æµ‹å®šä¸­å¯èƒ½å‡ºç°äº†é”™è¯¯ã€‚\n\n\nç”»å›¾\næ‹‰å¼å›¾ï¼ˆRamachandranå›¾ï¼‰æ¥è¯„ä¼°è›‹ç™½è´¨ç»“æ„ä¸­æ°¨åŸºé…¸æ®‹åŸºçš„æ„è±¡æ˜¯å¦åˆç†ã€‚Ramachandranå›¾æ˜¯æ ¹æ®è›‹ç™½è´¨ä¸­æ¯ä¸ªéæœ«ç«¯æ°¨åŸºé…¸æ®‹åŸºçš„Ï†å’ŒÏˆäºŒé¢è§’ç»˜åˆ¶çš„æ•£ç‚¹å›¾ã€‚è¿™äº›äºŒé¢è§’å†³å®šäº†è›‹ç™½è´¨ä¸»é“¾çš„æ„è±¡ã€‚\nä¹Ÿæ˜¯ä¸€æ¡æŒ‡ä»¤ï¼š\nplot_ramachandran(pdb)\n\nè¿˜å¯ä»¥ç”»ä¸€ä¸‹æ®‹åŸºçš„ç»„æˆï¼š\nplot_residue_composition(pdb)\n\næœ€åå‘¢ï¼Œä¸‰ç»´ç»“æ„ä¸ç”»ä¸‰ç»´æ€ä¹ˆè¡Œï¼Œè¿˜æ˜¯ä¸€æ¡æŒ‡ä»¤ï¼š\nplot_pdb(pdb)\n\nè¿™é‡Œè°ƒç”¨äº†ä»¥å‰ä»‹ç»çš„RåŒ…r3dmolã€‚\nå¯¹äºè¿™äº›ç»“æ„ç®€å•åˆ†æå’Œç”»å›¾å‡½æ•°ï¼Œä¹Ÿå°è£…æˆä¸€ä¸ªæµç¨‹ï¼Œåªéœ€è¦è·‘run_pdb_analysis()ä¸€ä¸ªå‡½æ•°ï¼Œå°±ä¼šå°†è¿™äº›åˆ†æå…¨éƒ¨è·‘ä¸€éï¼Œç„¶ååˆ†åˆ«å†™å…¥æ–‡ä»¶ã€‚\nå‚è€ƒèµ„æ–™\n\nswissmodel.expasy.org/docs/help\næ‹‰æ°å›¾: zh.wikipedia.org/wiki/%E6%8B%89%E6%B0%8F%E5%9B%BE\nåœ¨Rä¸­å¯¹åˆ†å­ç»“æ„è¿›è¡Œ3Då¯è§†åŒ–: mp.weixin.qq.com/s/lOfc6ZRFBI3EWoSgpd5guw\n"},"Tools/Obsidian-Quartzåšå®¢ç³»ç»Ÿ":{"slug":"Tools/Obsidian-Quartzåšå®¢ç³»ç»Ÿ","filePath":"Tools/Obsidian-Quartzåšå®¢ç³»ç»Ÿ.md","title":"Obsidian-Quartzåšå®¢ç³»ç»Ÿ","links":[],"tags":["blog","quartz","obsidian","github"],"content":"åˆ›å»ºQuartzåšå®¢\nQuartzæ˜¯ä½¿ç”¨Node.jsçš„ï¼Œæ‰€ä»¥é¦–å…ˆæ˜¯éœ€è¦å®‰è£…Node.jsï¼š\nscoop install nodejs-lts\nä»github.com/jackyzha0/quartzä¸‹è½½ã€‚ç„¶åæ˜¯å®‰è£…ä¾èµ–ï¼š\nnpm install\nç„¶åå°±å¯ä»¥åˆ›å»ºåšå®¢äº†ï¼š\nnpx quartz create\nä¸Obsidiançš„è”åŠ¨\nå¹³æ—¶ç”¨Obsidianæ¥å†™ä¸œè¥¿ï¼Œä½†å¹¶ä¸æ˜¯å†™å•¥ï¼Œéƒ½ä¼šå…¬å¼€ã€‚æ‰€ä»¥å¯¹äºæ˜¯å¦è¦å…¬å¼€ï¼Œç”¨ä¸€ä¸ªYAML frontmatteråšä¸ºå¼€å…³ã€‚\n---\npublish: true\n---\n\ntrueæ˜¯è¦å‘è¡¨çš„ï¼Œfalseæ˜¯ä¸å‘è¡¨çš„ã€‚\nä½†æ˜¯Quartzé»˜è®¤æ˜¯ä¸ç®¡çš„ï¼Œå®ƒå¹¶ä¸å»è¯†åˆ«publish: falseè¿™ä¸ªå­—æ®µï¼Œæˆ‘ä»¬éœ€è¦ä¿®æ”¹quartz.config.tsï¼Œæ‰¾åˆ°è¿™ä¸€æ®µï¼š\nimport * as Plugin from &quot;./quartz/plugins&quot;\n \nconst config: QuartzConfig = {\nÂ  configuration: {\nÂ  Â  // ...\nÂ  },\nÂ  plugins: {\nÂ  Â  transformers: [\nÂ  Â  Â  Plugin.FrontMatter(),\nÂ  Â  Â  // ...\nÂ  Â  ],\nÂ  Â  filters: [\nÂ  Â  Â  // è¿™é‡Œé€šå¸¸æœ‰ä¸€äº›é»˜è®¤çš„ filterï¼Œæ¯”å¦‚ RemoveDrafts ä¹‹ç±»çš„\nÂ  Â  ],\nÂ  Â  emitters: [\nÂ  Â  Â  // ...\nÂ  Â  ],\nÂ  },\n}\n \nexport default config\nåœ¨filtersé‡Œé¢åŠ ä¸ŠPlugin.ExplicitPublish():\nfilters: [\nÂ  Plugin.ExplicitPublish(),\nÂ  // å¦‚æœä½ è¿˜æœ‰å…¶ä»– filterï¼Œå°±æŒ‰éœ€è¦ä¿ç•™\nÂ  // Plugin.RemoveDrafts(),\n],\nè¿™æ ·å­ï¼Œå°±ä¼šåªå‘å¸ƒpublish: trueçš„markdownæ–‡ä»¶ã€‚\næ„å»ºåšå®¢\nè®¾ç½®å¥½ä¹‹åï¼Œå°±å¯ä»¥ç”¨obsidianä¸­çš„æ–‡æ¡£æ¥ç”Ÿæˆåšå®¢äº†ï¼Œç”¨ä»¥ä¸‹æŒ‡ä»¤ï¼š\n# å¦‚éœ€è¦æœ¬åœ°é¢„è§ˆï¼ŒåŠ ä¸Š  --serve\nnpx quartz build -d ../YuNotebooks -o docs\n\nè¾“å…¥ç›´æ¥ç”¨ä¸Šä¸€å±‚ç›®å½•çš„obsidian vaultï¼Œæˆ‘çš„ç¬”è®°åœ¨æœ¬åœ°ï¼Œè€Œç”Ÿæˆçš„åšå®¢ï¼Œåªæœ‰æˆ‘æ ‡è¯†äº†publish: trueçš„éƒ¨åˆ†ï¼Œè¾“å…¥çš„htmlæ–‡æ¡£ï¼Œå°±æ”¾åˆ°docsæ–‡ä»¶å¤¹é‡Œï¼Œæ–¹ä¾¿åé¢åœ¨GitHubä¸ŠæŒ‡å®šå®ƒä¸ºPagesã€‚\nä½†æ˜¯è¿™é‡Œè¿˜æ˜¯æœ‰ä¸€ä¸ªé—®é¢˜ï¼Œå°±æ˜¯publish: falseçš„mdè™½ç„¶ä¸ä¼šè¢«æ¸²æŸ“ï¼Œä½†æ˜¯å¯¹åº”çš„assetsæ–‡ä»¶å¤¹ï¼ˆæ”¾å›¾ç‰‡ï¼Œç”¨çš„Custom Attachment Locationï¼‰è¿™äº›è¿˜æ˜¯ä¼šè¢«æ‹·è´åˆ°docsç›®å½•ä¸‹ï¼Œå¿…é¡»è¦å†™ä¸ªè„šæœ¬æ¥æ¸…é™¤å®ƒï¼Œäºæ˜¯å°±å†™äº†ä¸€ä¸ªcleanup_public_no_html.pyçš„è„šæœ¬ã€‚\nç„¶åè¿˜æœ‰ä¸€ä¸ªé—®é¢˜ï¼Œå°±æ˜¯æ’å…¥çš„å›¾ç‰‡æ˜¯![](assets/xxx)è¿™ç§å½¢å¼ï¼Œåœ¨æŠŠmdæ¸²æŸ“æˆhtmlçš„æ—¶å€™ï¼Œå®ƒä¼šæŠŠè¿™ä¸ªç›®å½•å½“æˆæ˜¯æ ¹ç›®å½•ä¸‹çš„ï¼Œç»“æœå°±æ˜¯mdæ–‡ä»¶å¦‚æœæ”¾ä¸€å±‚ç›®å½•ï¼Œå°±ä¼šå˜æˆ../assets/xxxï¼Œæ”¾ä¸¤å±‚ç›®å½•ä¸‹ï¼Œå°±ä¼šå˜æˆ../../assets/xxxï¼Œè¿™æ ·å­å›¾ç‰‡å°±ä¼šæ˜¾ç¤ºä¸æ­£å¸¸ï¼Œåˆéœ€è¦å†™ä¸€ä¸ªè„šæœ¬ï¼Œcorrect-image-path.pyæ¥è¯»å–ç”Ÿæˆçš„htmlæ–‡ä»¶ï¼Œä¿®æ”¹ä¸€ä¸‹è·¯å¾„ã€‚\nå‘å¸ƒåšå®¢\nåˆ°è¿™é‡Œå°±æ²¡å•¥äº†ï¼Œæ¨é€åˆ°GitHubï¼ŒæŠŠdocsç›®å½•é€‰ä¸ºPagesï¼Œæ‰“å®Œæ”¶å·¥ã€‚\nåšä¸ªæ‡’äºº\nè¿˜æƒ³æ›´è¿›ä¸€æ­¥ï¼Œæ¯•ç«Ÿæ˜¯å’ŒObsidianè”åŠ¨ï¼Œå°±æ˜¯æˆ‘åªç®¡åœ¨Obsidiané‡Œå†™ç¬”è®°ï¼Œä¸ç”¨ç®¡åšå®¢ï¼Œè¿™æ˜¯æœ€å¥½çš„ï¼Œç¬”è®°åæ­£æ˜¯å¯ä»¥æ§åˆ¶æ˜¯å¦å‘è¡¨ï¼Œä¸éœ€è¦æ¯æ¬¡æˆ‘æƒ³å‘è¡¨ï¼Œå°±å¾—æ¥å¼„ä¸€ä¸‹ã€‚æ‰€ä»¥ç¬”è®°æˆ‘æ”¾åˆ°private repoé‡Œã€‚æä¸ªSecretï¼Œè®©Actionså¯ä»¥æ‹‰å–ï¼Œç„¶åè¯¥æ€ä¹ˆè·‘ï¼Œè®©Actionså»å¼„ã€‚ç„¶åæˆ‘å†è®¾ç½®ï¼Œæ¯å¤©åŒ—äº¬æ—¶é—´æ—©ä¸Š3:00è‡ªåŠ¨è·‘ä¸€æ¬¡Actionsï¼Œè¿™æ ·å­ï¼Œæˆ‘å‹æ ¹ä¸ç”¨ç®¡åšå®¢ï¼Œåªç®¡ç¬”è®°ã€‚ç¬”è®°ä¹Ÿæ˜¯è®¾ç½®å¥½çš„ï¼Œè‡ªåŠ¨åŒæ­¥åˆ°GitHubã€‚\næ‰€ä»¥æ•´ä¸ªé€»è¾‘å°±æ˜¯ï¼š\n\næˆ‘åªç®¡æœ¬åœ°å†™ç¬”è®°\nåå°è‡ªåŠ¨åŒæ­¥GitHub\nActionsè‡ªåŠ¨æ›´æ–°åšå®¢\n\nç„¶åæˆ‘åªéœ€è¦åšç¬¬ä¸€æ­¥ï¼Œå®Œç¾ã€‚"},"Tools/è§å¼‚æ€è¿ï¼šæ‰”æ‰RStudioï¼Œæ‹¥æŠ±Positron":{"slug":"Tools/è§å¼‚æ€è¿ï¼šæ‰”æ‰RStudioï¼Œæ‹¥æŠ±Positron","filePath":"Tools/è§å¼‚æ€è¿ï¼šæ‰”æ‰RStudioï¼Œæ‹¥æŠ±Positron.md","title":"use-positron","links":[],"tags":["R","positron","vscode"],"content":"å®šåˆ¶ç‰ˆä¸é¦™å—ï¼Ÿ\nè™½ç„¶æ ‡é¢˜æ˜¯æ‰”æ‰RStudioï¼Œä½†æˆ‘ä½¿ç”¨RStudioçš„æ—¶é—´å…¶å®éå¸¸æœ‰é™ï¼ŒåŸºæœ¬ä¸Šåªæœ‰æˆ‘éœ€è¦è®²è¯¾æ¼”ç¤ºçš„æ—¶å€™ï¼Œæ‰ä¼šå®‰è£…åœ¨è¯¾å ‚ä¸Šç”¨ä¸€ä¸‹ã€‚ç”¨äº†äºŒåå¹´çš„Rï¼Œæœ‰åå‡ å¹´çš„æ—¶é—´æ˜¯åœ¨Emacsä¸­ä½¿ç”¨Rçš„ï¼š\n\nåæ¥æˆ‘ä¸€ç›´ç”¨ä¸€ä¸ªå®šåˆ¶çš„ç‰ˆæœ¬å«SPACEMACSï¼Œå®šåˆ¶çš„å°±æ˜¯é¦™ï¼Œçœå¿ƒã€‚\nè¿™å‡ å¹´è½¬å‘ä½¿ç”¨VSCODEï¼Œå¹³æ—¶ç”¨ç€ä¹ŸæŒºçˆ½çš„ï¼Œä½†æ˜¯ç°åœ¨æœ‰Positronï¼Œè¿˜æ˜¯é‚£å¥è¯ï¼Œå®šåˆ¶ç‰ˆæœ¬çœå¿ƒï¼Œäºæ˜¯å–œæ–°åŒæ—§ã€‚\nBash\nå®‰è£…ä¹‹åï¼ŒTERMINALæ‰“å¼€æ˜¯CMDï¼Œè¿™å¯ä¸è¡Œï¼Œæˆ‘ä¸€æƒ¯æ˜¯ç”¨bashçš„ã€‚æ‰“å¼€settings.jsonæ˜¯è¿™æ ·å­çš„ï¼š\n{\n    &quot;python.defaultInterpreterPath&quot;: &quot;E:\\\\software-data\\\\scoop\\\\apps\\\\miniconda3\\\\current\\\\python.exe&quot;,\n    &quot;launch&quot;: {\n        &quot;configurations&quot;: [\n          \n            \n \n        ]\n    },\n \n    &quot;Bash&quot;: {\n        &quot;source&quot;: &quot;Bash&quot;,\n        &quot;args&quot;: [],\n        &quot;icon&quot;: &quot;terminal-bash&quot;,\n        &quot;path&quot;: &quot;E:\\\\software-data\\\\scoop\\\\shims\\\\bash.exe&quot;\n      }\n    },\n    &quot;terminal.integrated.defaultProfile.windows&quot;: &quot;Bash&quot;,\n    &quot;launch&quot;: {\n      &quot;configurations&quot;: [\n      \n      ]\n    }\n}\nå®ƒé‡Œé¢æœ‰bashï¼Œä¸çŸ¥é“æ˜¯ä¸å»å»æŠ„äº†æˆ‘çš„VSCODEé…ç½®ï¼Œä½†æ˜¯é…ç½®åˆä¸å¯¹ï¼Œæœ‰ä¸€ä¸ªèŠ±æ‹¬å·å¯¹ä¸ä¸Šï¼Œäºæ˜¯ç»ˆç«¯å°±æ‰¾ä¸åˆ°Bashé€‰é¡¹ã€‚å‚è€ƒä¸€ä¸‹æˆ‘åœ¨VSCodeçš„è®¾å®šï¼Œæ”¹ä¸ºä»¥ä¸‹å†…å®¹ï¼š\n{\n    &quot;python.defaultInterpreterPath&quot;: &quot;E:\\\\software-data\\\\scoop\\\\apps\\\\miniconda3\\\\current\\\\python.exe&quot;,\n    &quot;terminal.integrated.env.windows&quot;: {},\n    &quot;terminal.integrated.profiles.windows&quot;: {\n    &quot;Bash&quot;: {\n        &quot;source&quot;: &quot;Bash&quot;,\n        &quot;args&quot;: [],\n        &quot;icon&quot;: &quot;terminal-bash&quot;,\n        &quot;path&quot;: &quot;E:\\\\software-data\\\\scoop\\\\shims\\\\bash.exe&quot;\n      }\n    },\n    &quot;terminal.integrated.defaultProfile.windows&quot;: &quot;Bash&quot;,\n    &quot;launch&quot;: {\n      &quot;configurations&quot;: [\n      \n      ]\n    }\n}\nBashå°±å‡ºæ¥äº†ã€‚æˆ‘ä¸å•åœ¨Windowsé‡Œæœ‰bashï¼Œè¿˜é…ç½®å¾—æ¯”è¾ƒå¥½çœ‹ã€‚\n\nR\nä¸€æ‰“å¼€ï¼ŒPositronèƒ½å‘ç°æˆ‘æœ‰å¥½å¤šä¸ªpythonç¯å¢ƒï¼Œä½†æ˜¯Rå´æ‰¾ä¸åˆ°ï¼Œä¸»è¦æ˜¯å®ƒåœ¨ç‰¹å®šçš„å®‰è£…è·¯å¾„å’Œæ³¨å†Œè¡¨ä»¥åŠRStudioçš„é…ç½®ä¸­å»æ‰¾ï¼Œåœ¨æˆ‘è¿™é€šé€šæ‰¾ä¸åˆ°ã€‚\næˆ‘å®‰è£…Rç¨å¾®æ¯”è¾ƒå¦ç±»ï¼Œè¯·çŒ›å‡»ã€ŠWindowsä¸‹æ–°è£…Rçš„æç®€æŒ‡å—ã€‹ï¼Œåªè¦åœ¨é…ç½®ä¸­ï¼ŒæŠŠRçš„æ ¹ç›®å½•ç»™è®¾å®šå¥½å°±è¡Œï¼Œä¹Ÿè¿˜ç®—æ¯”è¾ƒç®€å•ã€‚\né¡ºé“åæ§½ï¼Œç½‘ä¸Šä¸€å †ä»£ç ï¼Œéƒ½å‘Šè¯‰ä½ ï¼Œå¹²å•¥å…ˆæ¥ä¸€å¥rm(list=ls())ï¼Œè¯´æ˜¯è®©ä½ çš„Rç¯å¢ƒå¹²å‡€ï¼Œæœ¬èº«ä¸€ç›´åœ¨RStudioé‡Œä¸å‡ºæ¥çš„æ‰€è°“è·‘è„šæœ¬ï¼Œå°±æ˜¯ä¸€ä¸ªæ‚–è®ºã€‚RStudioä¸€æ‰“å¼€ï¼Œå·²ç»ä¸å¹²å‡€äº†ã€‚ä½ çœ‹æˆ‘ä¸‹é¢çš„æˆªå›¾ï¼Œæˆ‘ä¸€æ‰“å¼€Rï¼Œä¹Ÿå·²ç»ä¸å¹²å‡€äº†ã€‚é™¤äº†ASCIIå›¾å’Œåäººåè¨€ï¼Œä¸€æ‰“å¼€Rå·²ç»åŠ è½½äº†å¾ˆå¤šä¸œè¥¿ã€‚æˆ‘è·‘è„šæœ¬ï¼Œä»æ¥æ²¡æœ‰è¿™ä¸€å¥rm(list=ls())ï¼Œè€Œæ˜¯åŒºåˆ†äº¤äº’ä½¿ç”¨Rå’Œç”¨Rè·‘è„šæœ¬ä¸¤ä»¶äº‹ï¼šä¸€ä¸ªæ˜¯å¹³æ—¶äº¤äº’ä½¿ç”¨åŠ ä¸€å †é¢„è®¾ï¼Œè®©è‡ªå·±çˆ½ï¼›ä¸€ä¸ªæ˜¯è·‘è„šæœ¬è¿½æ±‚å¹²å¹²å‡€å‡€ï¼Œé¿å…åˆ«äººç”¨è„šæœ¬çš„æ—¶å€™ï¼Œå› ç¯å¢ƒä¸ä¸€è‡´è€Œå‡ºé”™ï¼Œè®©åˆ«äººçˆ½ã€‚\n\nå¼€ç®±ç¨å¾®å¼„ä¸€ä¸‹ï¼ŒBashæœ‰äº†ï¼ŒRèƒ½ç”¨ï¼ŒPythonèƒ½ç”¨ï¼Œå°±OKäº†ã€‚ç›¸ä¿¡ä¸“ä¸šäººå£«çš„å®šåˆ¶ï¼Œä¼šè®©æˆ‘ä»¬ç”¨èµ·æ¥çœå¿ƒçœåŠ›ä¸€äº›ï¼Œå…¶å®ƒçš„ï¼Œå…¶å®å’ŒVSCODEæ²¡ä¸¤æ ·ï¼Œå› ä¸ºå°±æ˜¯ä¸€å¼ çš®ã€‚\nå¹³æ—¶ç¼–è¾‘æ–‡ä»¶ä¹ æƒ¯ç”¨code filenameæ¥æ‰“å¼€ï¼Œç°åœ¨è¦ç”¨positronæ¥æ‰“å¼€ï¼Œå°±å¾—å˜æˆpositron filenameï¼Œä¸ºäº†ç…§é¡¾è‚Œè‚‰è®°å¿†ï¼Œåªéœ€è¦åœ¨.bashrcé‡ŒåŠ å…¥alias code=&quot;positron&quot;å³å¯ã€‚"},"index":{"slug":"index","filePath":"index.md","title":"Guangchuang Yu's Blog","links":[],"tags":[],"content":"æ¬¢è¿æ¥åˆ°ä½™å…‰åˆ›çš„åšå®¢ï¼Œä¸»è¦è®°å½•æœ¬äººåœ¨ç§‘ç ”å·¥ä½œä¸­çš„ä¸€äº›ç»éªŒä¸æ€è€ƒã€ç§‘ç ”è¿›å±•å’Œå­¦ä¹ ç¬”è®°ã€‚\nè¯¾é¢˜ç»„ä¸»é¡µ\n\nä¸»é¡µï¼šyulab-smu.top/\nGitHubï¼šgithub.com/YuLab-SMU\n\nè¯¾é¢˜ç»„å…¬ä¼—å·\næ¬¢è¿å…³æ³¨è¯¾é¢˜ç»„ å…¬ä¼—å·ï¼šYuLabSMUã€‚"},"å¯è§†åŒ–/Rç”»çš„ğŸ’©å¥½çœ‹å—ï¼Ÿ":{"slug":"å¯è§†åŒ–/Rç”»çš„ğŸ’©å¥½çœ‹å—ï¼Ÿ","filePath":"å¯è§†åŒ–/Rç”»çš„ğŸ’©å¥½çœ‹å—ï¼Ÿ.md","title":"Rç”»çš„å±å¥½çœ‹å—ï¼Ÿ","links":[],"tags":["R","visualization","3D","rgl"],"content":"çŸ¥ä¹ä¸Šçš„å¸–å­ï¼ŒMATLABåœ¨é€æ¸è¢«Pythonæ·˜æ±°å—ï¼Ÿ - çŸ¥ä¹ï¼š\n\n\næˆ‘æƒ³å¯ä»¥ç¿»è¯‘æˆRæ¥ç”»ä¸€ä¸‹ï¼Œå…ˆç…§ç€å†™ä¸€ä¸ªäº§ç”Ÿæ•°æ®çš„å‡½æ•°ï¼š\nshitshape &lt;- function(points = 400, circle_pts = 40) {\n  linspace &lt;- function(a, b, n) seq(a, b, length.out = n)\n \n  cross3 &lt;- function(a, b) {\n    c(\n      a[2] * b[3] - a[3] * b[2],\n      a[3] * b[1] - a[1] * b[3],\n      a[1] * b[2] - a[2] * b[1]\n    )\n  }\n \n  normalize &lt;- function(v) {\n    v / sqrt(sum(v * v))\n  }\n \n  z &lt;- linspace(0, 1, points)\n  z[1:50] &lt;- z[1:50] + z[50] * linspace(1, 0, 50)\n  z[201:400] &lt;- z[201:400] - 0.12 * linspace(0, 1, 200)\n \n  s &lt;- linspace(0, 1, points)\n \n  path_radius &lt;- linspace(0.7, 0.02, points) * (cos(linspace(0, pi / 2, points)) + 1.5) / 3.5\n \n  tube_radius &lt;- 0.18 * (1 - s^2.5) + 0.001\n  tube_radius[1:50] &lt;- sin(linspace(0, pi / 2, 50)) * tube_radius[50]\n \n  theta &lt;- linspace(0, 2 * pi * 4, points)\n \n  circle_theta &lt;- linspace(0, 2 * pi, circle_pts)\n \n  X &lt;- matrix(0, nrow = circle_pts, ncol = points)\n  Y &lt;- matrix(0, nrow = circle_pts, ncol = points)\n  Z &lt;- matrix(0, nrow = circle_pts, ncol = points)\n \n  for (i in 1:(points - 1)) {\n    R &lt;- path_radius[i]\n    center_x &lt;- R * cos(theta[i])\n    center_y &lt;- R * sin(theta[i])\n    center_z &lt;- z[i]\n \n    dx &lt;- path_radius[i + 1] * cos(theta[i + 1]) - center_x\n    dy &lt;- path_radius[i + 1] * sin(theta[i + 1]) - center_y\n    dz &lt;- z[i + 1] - center_z\n    tangent &lt;- normalize(c(dx, dy, dz))\n \n    ref &lt;- c(0, 0, 1)\n    if (abs(sum(ref * tangent)) &gt; 0.99) ref &lt;- c(1, 0, 0)\n \n    normal1 &lt;- normalize(cross3(tangent, ref))\n    normal2 &lt;- cross3(tangent, normal1)\n \n    r_tube &lt;- tube_radius[i]\n    for (j in 1:circle_pts) {\n      offset &lt;- r_tube * (cos(circle_theta[j]) * normal1 + sin(circle_theta[j]) * normal2)\n      X[j, i] &lt;- center_x + offset[1]\n      Y[j, i] &lt;- center_y + offset[2]\n      Z[j, i] &lt;- center_z + offset[3]\n    }\n  }\n \n  Z[, points] &lt;- Z[, points - 1]\n \n  list(X = X, Y = Y, Z = Z)\n}\nç„¶åå°±æ˜¯3Dç”»å›¾äº†ï¼š\nlibrary(rgl)\n \nxyz &lt;- shitshape()\n \nopen3d()\nbg3d(&quot;white&quot;)\nsurface3d(xyz$X, xyz$Y, xyz$Z, color = rgb(0.4, 0.2, 0), lit = TRUE)\naspect3d(1, 1, 1)\nlight3d(theta = -60, phi = 10)\nview3d(theta = -60, phi = 10)\n\nåæ­£æ˜¯æ¯”Pythonçš„å¥½çœ‹ã€‚"},"æ–‡ç« å‘è¡¨/æ–‡ç« å‘è¡¨ï¼šaplotè®©ä½ è½»æ¾ç”»å‡ºå¤æ‚çš„å›¾":{"slug":"æ–‡ç« å‘è¡¨/æ–‡ç« å‘è¡¨ï¼šaplotè®©ä½ è½»æ¾ç”»å‡ºå¤æ‚çš„å›¾","filePath":"æ–‡ç« å‘è¡¨/æ–‡ç« å‘è¡¨ï¼šaplotè®©ä½ è½»æ¾ç”»å‡ºå¤æ‚çš„å›¾.md","title":"aplotè®©ä½ è½»æ¾ç”»å‡ºå¤æ‚çš„å›¾","links":[],"tags":["aplot","paper","visualization"],"content":"aplotå‘è¡¨\naplotåŒ…å‘è¡¨åœ¨The InnovationæœŸåˆŠä¸Šã€‚\n\nå¼€å‘è¿™ä¸ªåŒ…çš„çµæ„Ÿæ¥è‡ªäºæˆ‘åœ¨2018å¹´å‘çš„MBEæ–‡ç« ã€‚\n\nå¯ä»¥è¯´è¿™æ˜¯å¯¹æ•°æ®æ•´åˆå’Œå¯è§†åŒ–é•¿æœŸæ€è€ƒæ‰€å¾—ï¼Œè¿›è¡Œé«˜åº¦æŠ½è±¡æ‰æå‡ºè¿™ä¸¤ä¸ªæ–¹æ³•ï¼Œè€Œè¿™ä¸¤ä¸ªæ–¹æ³•ï¼Œåˆ†åˆ«æ¿€å‘äº†æˆ‘å¼€å‘å‡ºæ¥aplotå’Œggtangleä¸¤ä¸ªåŒ…ã€‚\nå¤æ‚å›¾ä¸å†å¤æ‚\naplotä½œä¸ºä¸€ä¸ªæ‹¼å›¾åŒ…ï¼Œå’Œå¤§å®¶æ‰€ç†ŸçŸ¥çš„æ‹¼å›¾åŒ…cowplotå’Œpatchworkæ˜¯ä¸ä¸€æ ·çš„ã€‚ä¸æ˜¯æŠŠå›¾æ”¾åœ¨ä¸€èµ·ï¼Œè€Œæ˜¯æŠŠå›¾ä¸­çš„æ•°æ®è¿›è¡Œå…³è”ï¼Œå°±åƒæ–‡ç« å›¾2æ‰€å±•ç¤ºï¼Œä½ ç”»å‡ ä¸ªå›¾ï¼Œæ— éœ€çŸ¥é“æ•°æ®é—´çš„å…³ç³»ï¼Œæ¯ä¸ªå›¾ç”»èµ·æ¥éƒ½æ¯”è¾ƒç®€å•ï¼Œä½†æ˜¯ä½ ä¸€æ—¦ç”¨aplotçš„insert_topã€insert_bottomã€insert_leftå’Œinsert_rightç³»åˆ—å‡½æ•°è¿›è¡Œæ‹¼å›¾ï¼Œè¿™äº›å‡½æ•°ä¼šè¯•å›¾å»æŠŠæ•°æ®ç»™å…³è”èµ·æ¥ï¼Œå¯¹æ¯ä¸ªå°å›¾çš„å†…å®¹è¿›è¡Œé‡æ–°æ’åˆ—ï¼Œä»¥ä½¿å¾—å›¾ä¸å›¾ä¹‹é—´ä¿¡æ¯æ˜¯å¯¹åº”çš„ã€‚æœ€ç»ˆå‡ºæ¥åº•ä¸‹Gå›¾è¿™æ ·å¤æ‚çš„å›¾ï¼Œå¦‚æœè¦æ‰‹æ“è¿™ä¸ªå›¾ï¼Œéš¾åº¦å¾ˆå¤§ï¼Œç”¨aplotï¼Œå¾ˆç®€å•ã€‚\n\nè¿™ä¸ªåŒ…çš„é‡ç‚¹ï¼Œå°±æ˜¯è¿™ä¸ªåŠŸèƒ½ï¼Œæ˜¯æˆ‘å¼€å‘å®ƒçš„åˆè¡·ã€‚æœŸé—´è¿˜æœ‰ç‚¹å°æ’æ›²ï¼Œå†™ä¸ªåŒ…æ€»æœ‰äººæƒ³æŠ„ä»£ç ã€‚å€Ÿæ­¤åˆ†äº«è¿™æ®µtweetç»™å¤§å®¶ã€‚\n\nä½ ä¹Ÿèƒ½åˆ›ä½œå¤æ‚å›¾\nèƒ½å¤Ÿæ‹¼çš„å›¾ç§ç±»æ˜¯æ¯”è¾ƒå¤šçš„ï¼š\n\nå½“ç„¶ä½ ä¹Ÿå¯ä»¥è‡ªå·±åˆ›ä½œä¸€äº›ï¼Œå› ä¸ºæ€ä¹ˆæ‹¼éšä¾¿ä½ å˜›ã€‚æ¯”å¦‚å‰é¢å›¾2çš„å•ç»†èƒmarkeråŸºå› è¡¨è¾¾çƒ­å›¾ï¼Œæˆ‘å°±æ‹¼äº†é€šè·¯å¯Œé›†åˆ†æç»“æœã€‚æ¯”å¦‚è¿™é‡Œçš„Aå›¾ä¸­ï¼Œoncoplotå°±è¢«æ‹¿æ¥å†æ‹¼TCGAä¸­ç›¸åº”åŸºå› åœ¨ä¸¤ä¸ªè‚¿ç˜¤ä¸­è¡¨è¾¾é‡åˆ†å¸ƒã€‚å†æ¯”å¦‚Eå›¾ï¼Œupsetplotæˆ‘ä»¬å¯ä»¥ç”¨aplotæ‹¼å‡ºæ¥ï¼Œä½†æ—¢ç„¶æ˜¯æ‹¼çš„ï¼Œæˆ‘å¹²å˜›ä¸æ‹¼ç‚¹åˆ«çš„å‘¢ï¼Ÿäºæ˜¯æˆ‘ä»¬å°±æäº†è¿™ä¸ªä¸ä¸€æ ·çš„upsetplotã€‚\nè¯´åˆ°oncoplotï¼Œæ˜¯ç”±ä¸€ä¸ªå­¦ç”Ÿæç”³é”è´¡çŒ®çš„ä»£ç ï¼Œè¯¦è§ã€Šggplot2ç‰ˆæœ¬çš„oncoplotæ¥äº†ã€‹ï¼Œåœ¨æˆ‘é¢å‰éœ²ä¸€æ‰‹ï¼Œç„¶åè·Ÿæˆ‘è¯´è¦ç”³è¯·åšå£«ï¼Œä½†ç”±äºæˆ‘æ²¡æœ‰åé¢ï¼Œç„¶åä¹Ÿå°±æ²¡æœ‰ç„¶åäº†ã€‚è™½ç„¶æ¥è§¦æ—¶é—´çŸ­ï¼Œä¹Ÿè¿‡äº†æ¯”è¾ƒé•¿ä¸€æ®µæ—¶é—´ï¼Œä½†è´¡çŒ®æˆ‘æ˜¯ä¸ä¼šå¿˜è®°çš„ã€‚\n\næ™®é€šçš„æ‹¼å›¾\naplotå¦å¤–çš„åŠŸèƒ½æ˜¯plot_list()ï¼Œå°±æ˜¯æ™®é€šçš„æ‹¼å›¾çš„ï¼Œå›¾ä¸ä¼šå˜ï¼Œåªæ˜¯ç®€å•åœ°ç»„åˆèµ·æ¥æ”¾åœ¨ä¸€èµ·ã€‚è™½ç„¶patchworkåŒ…åšå¾—å¾ˆå¥½ï¼Œä½†æˆ‘æ˜¯è€ç‹—å­¦ä¸äº†æ–°æŠŠæˆï¼Œæ—©æœŸç”¨æƒ¯äº†cowplot::plot_gridï¼Œæˆ‘å°±æƒ³æ¥ä¸€ä¸ªç±»ä¼¼çš„ï¼Œå½“ç„¶ä¹Ÿä¸å®Œå…¨ä¸€æ ·ï¼Œæˆ‘è¿˜æ˜¯æœ‰æˆ‘è‡ªå·±çš„ä¸€ç‚¹ä¸œè¥¿åœ¨é‡Œé¢ã€‚\n\nå•¥éƒ½èƒ½æ‹¼ï¼šbase plotã€ggplot2ã€å›¾ç‰‡ç­‰\n\n\n\n\nä¸‡ç‰©çš†å¯åˆ†é¢ï¼šè¿™äº›æ‹¼åœ¨ä¸€èµ·çš„å›¾ï¼Œåªè¦ä½ ç»™ä¸ªåå­—ï¼Œå°±ä¼šå˜æˆåƒåˆ†é¢çš„labelä¸€æ ·ï¼Œåœ¨å‡ºå›¾æ—¶å‘ˆç°ã€‚\n\n\nä¿æŒYuLabå›¢é˜Ÿçš„äº”æ¯›æ•ˆæœï¼šæˆ‘ä»¬å¼€å‘ä¸€äº›åŒ…ï¼Œæ¯”å¦‚è¯´ggbreakï¼Œå®ƒæ‰€å‘ˆç°çš„æ•ˆæœï¼Œä½ ç”¨å…¶å®ƒçš„æ‹¼å›¾å·¥å…·ï¼Œå¯èƒ½å°±ä¸å…¼å®¹äº†ï¼Œä½†æˆ‘ä»¬è‡ªå·±ï¼Œè‡ªæˆä¸€ç»Ÿã€‚é…åˆå¾—èˆ’èˆ’æœæœçš„ã€‚\n\n\nGAå›¾åˆ›ä½œ\n\næœ€åè®²è®²è¿™å¼ GAå›¾ï¼Œä¸€å¼€å§‹ç”»äº†ä¸€ç‰ˆï¼Œå‘ˆç°4ä¸ªå‡½æ•°çš„åŠŸèƒ½ï¼Œæˆ‘è§‰å¾—ï¼ˆ1ï¼‰å’Œå›¾ä¸€å¤ªé‡å¤ï¼›ï¼ˆ2ï¼‰è¿™4ä¸ªå‡½æ•°æ˜¯å¯ä»¥è‡ªç”±ç»„åˆï¼Œåå¤ä½¿ç”¨çš„ï¼Œè¿™ç‚¹ä½“ç°ä¸å‡ºæ¥ã€‚æ‰€ä»¥æˆ‘æäº†æ„è§ï¼Œç”¨ä¸€æ¡å½©å¸¦ï¼Œåé¢è™šåŒ–ï¼Œä»£è¡¨æœªå®Œå¾…ç»­ï¼Œè¿˜èƒ½ç»§ç»­è°ƒç”¨è¿™äº›å‡½æ•°**ã€‚**ç„¶åå¯ä»¥æŠŠaplotæ‹ŸäººåŒ–ï¼Œæˆä¸ºèˆåŠ¨å½©å¸¦è€…ã€‚è‡³äºä¸Šé¢æ‹¼å›¾çš„å…ƒç´ ï¼Œæˆ‘çš„æƒ³æ³•æ˜¯å“†å•¦Aæ¢¦çš„å£è¢‹ï¼Œåé¢åŒæ–Œæå‡ºæ¥è¯´æ„Ÿè§‰å£è¢‹æ˜¯aplotè¿™ä¸ªäººçš„ï¼Œæ¢æˆäº‘ã€‚ä¸€å¼€å§‹è®¾è®¡å¸ˆå°±åœ¨äº‘ä¸Šé¢å¹³é“ºäº†å‡ ä¸ªå›¾ï¼Œæˆ‘è§‰å¾—ä¸è¡Œï¼Œè·Ÿè®¾è®¡å¸ˆè¯´ï¼Œæƒ³æƒ³å¤©å…µå¤©å°†è¦æ‰æ‹¿å­™æ‚Ÿç©ºçš„åœºæ™¯ï¼Œå›¾è¦å †ä¸åŒçš„å±‚ï¼Œåé¢å¯ä»¥è™šåŒ–ä¸€äº›ï¼Œä½“ç°äººå¤šåŠ¿ä¼—çš„æ„Ÿè§‰ã€‚å°±è¿™æ ·å‡ºæ¥æˆ‘ä»¬è¿™å¼ GAå›¾ã€‚\næˆ‘æ˜¯ç¬¬ä¸€äºº\n\naplotçš„çµæ„Ÿæ¥è‡ªäº2018å¹´æˆ‘çš„æ–‡ç« ï¼Œåœ¨ggtreeä¸­å­•è‚²äº†å¥½å‡ å¹´ã€‚ç„¶åæˆ‘åœ¨2020å¹´å°±å¼€å‘å‡ºæ¥å¹¶æ”¾å‡ºåˆ°CRANä¸Šã€‚è§£å†³æˆ‘å‰é¢å°æ ‡é¢˜å†™çš„å¤æ‚å›¾ä¸å†å¤æ‚è¿™ä¸ªé—®é¢˜ï¼Œaplotå¿…é¡»æ˜¯ç¬¬ä¸€ä¸ªå·¥å…·ã€‚ç°åœ¨æœ‰ç±»ä¼¼çš„å·¥å…·ï¼ŒåŒ…æ‹¬pythonçš„Marsileaå’ŒRçš„ggalignã€‚ç¬¬ä¸€ä¸ªæ˜¯æœ€éš¾çš„ï¼Œå› ä¸ºä½ è¦äº§ç”Ÿæƒ³æ³•ï¼Œè¦åœ¨æ²¡æœ‰ä»»ä½•å€Ÿé‰´çš„æƒ…å†µä¸‹å»å®ç°ã€‚ç°åœ¨aplotçš„åŠŸèƒ½å¯èƒ½ä¸æ˜¯æœ€å…¨çš„ï¼Œä½†aplotè‚¯å®šæ˜¯æœ€å®¹æ˜“ç”¨çš„ï¼Œèƒ½è§£å†³ä½ å¤§å¤šæ•°çš„é—®é¢˜ã€‚"},"æ–‡ç« å‘è¡¨/æ–‡ç« å‘è¡¨ï¼šå°ä¸«ç”»å›¾ï¼Œä»£ç å¼€æ”¾ï¼Œæ³¨é‡Šä¸­è‹±æ–‡å¯¹ç…§":{"slug":"æ–‡ç« å‘è¡¨/æ–‡ç« å‘è¡¨ï¼šå°ä¸«ç”»å›¾ï¼Œä»£ç å¼€æ”¾ï¼Œæ³¨é‡Šä¸­è‹±æ–‡å¯¹ç…§","filePath":"æ–‡ç« å‘è¡¨/æ–‡ç« å‘è¡¨ï¼šå°ä¸«ç”»å›¾ï¼Œä»£ç å¼€æ”¾ï¼Œæ³¨é‡Šä¸­è‹±æ–‡å¯¹ç…§.md","title":"å°ä¸«ç”»å›¾ï¼Œä»£ç å¼€æ”¾ï¼Œæ³¨é‡Šä¸­è‹±æ–‡å¯¹ç…§","links":[],"tags":["FigureYa","paper","visualization"],"content":"\nä½œä¸º_iMetaMedç¬¬ä¸€å·ç¬¬ä¸€æœŸçš„å°é¢æ–‡ç« å‘è¡¨ï¼Œä¹Ÿå°±æ˜¯è¯´åˆ›åˆŠå·çš„å°é¢æ–‡ç« ï¼Œè¯´èµ·æ¥å¥½åƒè›®æœ‰çºªå¿µæ„ä¹‰ä¸€æ ·ã€‚ç‰¹åˆ«æ˜¯å¦‚æœiMetaMed_èƒ½å¤Ÿæˆä¸ºä¸€ä¸ªé«˜æ”€ä¸èµ·çš„æœŸåˆŠçš„è¯ã€‚\n\næ–‡ç« çš„è§£è¯»å¯ä»¥å‚è€ƒï¼šã€ŠiMetaMed | å¤§è¿åŒ»ç§‘å¤§å­¦è‘›ç‘›-FigureYaï¼šä¸€ä¸ªç”¨äºæå‡ç”Ÿç‰©åŒ»å­¦æ•°æ®è§£è¯»ä¸ç ”ç©¶æ•ˆç‡çš„æ ‡å‡†åŒ–å¯è§†åŒ–æ¡†æ¶ã€‹ï¼Œè¿˜æœ‰ä»å°ä¸«ä¸ªäººè§’åº¦çš„ç‰ˆæœ¬ï¼šã€ŠFigureYaæ›´æ–°å•¦ï¼å€ŸåŠ©å­¦æœ¯çš„åŠ›é‡ã€‹ã€‚\n\nè¿™ä¸ªè¯„è®ºè°¬èµäº†ï¼Œä½†å¯¹äºå°ä¸«ç”»å›¾æ¥è¯´ï¼ŒçœŸçš„å°±æ˜¯è¿™ä¸ªå‘³ã€‚å½“å¹´æˆ‘åšå£«è¿˜æ²¡æ¯•ä¸šçš„æ—¶å€™ï¼Œå°ä¸«è¯´æƒ³è¦æä¸ªä¼—ç­¹æ¨¡å¼ï¼Œæ¥å¸®åŠ©å¤§å®¶å®ç°ä¸‹æ¸¸çš„ä¸€äº›æ•°æ®å¯è§†åŒ–éœ€æ±‚ï¼Œé—®æˆ‘èƒ½ä¸èƒ½æ¥æ”¯æŒä¸€ä¸‹ã€‚æˆ‘å¤§æ¦‚è¯´æˆ‘å¯ä»¥å…ˆæ¥æ‰“ä¸ªæ ·ï¼Œè®°å¾—å°ä¸«è¯´æœ‰æˆ‘çš„æ”¯æŒï¼Œå¥¹æœ‰ä¿¡å¿ƒå¯ä»¥æèµ·æ¥ã€‚å°è±¡ä¸­å¤§æ¦‚æˆ‘è¿˜æœ‰å†™è¿‡ä¸€å¥lapply()å‡ºå‡ ä¸ªboxplotï¼Œç„¶åå¯¹æ¥cowplot::plot_gridï¼Œç›´æ¥å‡ºä¸€å¼ å›¾çš„ä»£ç ã€‚ç„¶åæœå­å¤§åŠ ç§°èµï¼Œè§‰å¾—ä¸çœ‹æˆ‘ä»£ç ï¼Œåªä¼šforå¾ªç¯ã€‚è¿‘åå¹´äº†ï¼Œåº”è¯¥æ²¡è®°é”™ï¼Œè¿˜æ²¡è€å¹´ç—´å‘†ã€‚\n\nä»Šæ—¶ä»Šæ—¥çš„ä½ å¯èƒ½æ— æ³•æƒ³è±¡ç”»ä¸€ä¸ªç®±çº¿å›¾éƒ½ä¼šæœ‰å›°éš¾ï¼Œä½†äº‹å®å°±æ˜¯å°ä¸«ç”»å›¾å¸®åŠ©äº†æ— æ•°çš„ç ”ç©¶ç”Ÿï¼Œåæ¥å„ç§å„æ ·çš„ç”»å›¾äº‘å¹³å°ï¼Œæˆ‘ä»¬å…¶å®ä¹Ÿå¯ä»¥çœ‹åˆ°ä¸å°‘å°ä¸«ç”»å›¾çš„èº«å½±ã€‚è‡³äºè¯´â€œAIæ—¶ä»£äº†ï¼Œç”»å›¾æœ‰ä½•éš¾ï¼ŒAIå¸®ä½ å†™ä»£ç â€ï¼Œé‚£AIçš„çŸ¥è¯†åº“ä¹Ÿæ˜¯æ— æ•°çš„æ–‡æ¡£ã€æ•™ç¨‹ã€åšå®¢ã€è®ºå›é—®é¢˜ç­‰ç­‰ï¼Œæ˜¯æ— æ•°å…·æœ‰äº’è”ç½‘åˆ†äº«ç²¾ç¥çš„ç½‘å‹ä»¬æ‰“ä¸‹çš„åŸºç¡€ï¼Œè®©æˆ‘ä»¬ç”¨ä¸Šé¢è¿™ä¸€é¡µPPTè‡´æ•¬ä¸€ä¸‹é‚£ä¸ªæ—¶ä»£ã€‚\nåé¢æˆ‘åŸºæœ¬ä¸å»å†™ï¼Œä½†æœ‰ä»‹ç»å­¦ç”Ÿå»æ¥æ´»ï¼Œä¹Ÿæœ‰ç»™ä¸€äº›äººæŒ‡å¯¼ï¼Œå±äºå¶å°”å¹•åä¸€ä¸‹ã€‚å…¶ä¸­ï¼Œæœ‰ä¸€ä¸ªä»£ç ï¼Œæˆ‘æŒ‡å¯¼ä»–æ‰“æˆRåŒ…ï¼Œåé¢è¿˜æ‹¿å»å‘äº†ä¸€ç¯‡å°æ–‡ç« ï¼Œç°åœ¨ä¹Ÿæ˜¯ä¸€ç¯‡ESIé«˜è¢«å¼•è®ºæ–‡ã€‚\n\nè¿™ä¸ªäº‹æƒ…åº”è¯¥è¯´ï¼Œå¸®åŠ©äº†å¾ˆå¤šå­¦ç”Ÿï¼Œæƒ³è¦å®ç°çš„å›¾æä¸å‡ºæ¥ï¼Œæå‡ºéœ€æ±‚ï¼Œä¼—ç­¹æˆåŠŸäº†ï¼Œå°±èƒ½æ‹¿åˆ°å¸¦æœ‰ç¤ºä¾‹æ•°æ®ã€ä¸­æ–‡æ³¨é‡Šã€èƒ½è·‘é€šçš„ä»£ç ã€‚å¦‚æœè¦ç”»çš„å›¾ï¼Œæ˜¯ç°æœ‰çš„ï¼Œå°±ç›´æ¥ä»˜è´¹ã€‚ä¸€æ¯å¥¶èŒ¶çš„è´¹ç”¨ï¼Œå¯ä»¥è¯´æ¯«æ— è´Ÿæ‹…ã€‚éšç€æ—¶é—´çš„æ¨ç§»ï¼Œç§¯ç´¯çš„å›¾è¶Šæ¥è¶Šå¤šï¼Œæœ‰317ä¸ªã€‚æ¯«æ— ç–‘é—®ï¼Œå¯¹å¹¿å¤§ç ”ç©¶ç”Ÿçš„è¯¾é¢˜æ¨è¿›ï¼Œæ˜¯æœ‰å¸®åŠ©çš„ã€‚\nå…¶å®æˆ‘æƒ³å¼ºè°ƒçš„æ˜¯ï¼ŒèŠ±ä¸€æ¯å¥¶èŒ¶çš„é’±ï¼Œä¸å•å•æ˜¯è¦æŠŠå›¾ç”»å‡ºæ¥ï¼Œè¿™æ˜¯èµ¶å·¥ç€æ€¥çš„æ—¶å€™å¹²çš„äº‹ï¼Œåªæƒ³è¦ç»“æœã€‚æˆ‘ä»¬è¿˜åº”è¯¥åœ¨æœ‰é—²çš„æ—¶å€™ï¼Œå›è¿‡å¤´æ¥çœ‹è¿™ä¸ªä»£ç ã€‚è¿™æ˜¯ä¸€ä¸ªå­¦ä¹ çš„è¿‡ç¨‹ï¼Œè¿™æ¯å¥¶èŒ¶é’±å°±èŠ±å¾—å¤ªå€¼ã€‚å½“ç„¶ç°åœ¨æ–‡ç« å‘è¡¨äº†ï¼Œä»£ç å¼€æ”¾äº†ï¼Œè¿˜é‡æ–°æ•´ç†ï¼ŒåŠ äº†ä¸­è‹±æ–‡æ³¨é‡Šã€‚ä¸å•å•æ˜¯å…è´¹çš„å·¥å…·ï¼Œå†æ¬¡å¼ºè°ƒä¸€ä¸‹ï¼Œä¹Ÿæ˜¯ä¸€ä¸ªå¾ˆå¥½çš„å­¦ä¹ èµ„æºã€‚ä¸çŸ¥é“ä¸ºä»€ä¹ˆï¼Œè¿™å¹´ä»£å«äººå­¦ä¹ ï¼Œå¤©æ‰“é›·åŠˆã€‚"},"æœºå™¨å­¦ä¹ ä¸ç»Ÿè®¡æ–¹æ³•/AIå­¦èµ·æ¥ï¼Œæ¯•ç«ŸAIè®©åœ°çƒè¿è½¬":{"slug":"æœºå™¨å­¦ä¹ ä¸ç»Ÿè®¡æ–¹æ³•/AIå­¦èµ·æ¥ï¼Œæ¯•ç«ŸAIè®©åœ°çƒè¿è½¬","filePath":"æœºå™¨å­¦ä¹ ä¸ç»Ÿè®¡æ–¹æ³•/AIå­¦èµ·æ¥ï¼Œæ¯•ç«ŸAIè®©åœ°çƒè¿è½¬.md","title":"AIå­¦èµ·æ¥ï¼Œæ¯•ç«ŸAIè®©åœ°çƒè¿è½¬","links":[],"tags":["DeepLearning"],"content":"Andrew Ngåœ¨æCourseraä¹‹å‰ï¼Œæœ‰ä¸ªOpenClassï¼Œå°±æ˜¯æ•™Machine Learningï¼Œé‚£æ˜¯è¿œåœ¨2010å¹´ï¼Œéå¸¸ä¹…è¿œï¼Œä½†æ˜¯å¯ä»¥è¯´ï¼Œåé¢çš„é‚£äº›è¯¾ç¨‹ï¼Œéƒ½æ˜¯åœ¨é‚£ä¸ªåŸºç¡€ä¸Šå¼„çš„ã€‚å…¶å®å·®ä¸å¤šï¼Œå¦ä¸€æ–¹é¢å°±æ˜¯é‚£ä¸ªå¹´ä»£ä¹…è¿œï¼ŒPythonæ ¹æœ¬ä¸åƒç°åœ¨è¿™æ ·æµè¡Œï¼Œé‚£ä¸ªå¹´ä»£è¿˜æ•´å¤©åœ¨Perl VS Pythonï¼Œè€Œä¸æ˜¯ä»Šå¤©çš„R VS Pythonã€‚ç„¶åè¿™ä¸ªOpenClassçš„è¯¾ç¨‹ï¼Œæ˜¯ç”¨Matlab/Octaveæ•™çš„ï¼Œæˆ‘å°è±¡ä¸­åº”è¯¥æ˜¯Matlabï¼Œç„¶åè¯¾ç¨‹ä½œä¸šæˆ‘æ˜¯ç”¨Octaveä½œçš„ã€‚ç„¶åæˆ‘åˆè‡ªå·±ç”¨Ré‡æ–°å†™äº†ï¼Œæ‰“äº†ä¸€ä¸ªRåŒ…ï¼Œå–åmlassæ˜¯ML + clAssçš„æ„æ€ï¼Œæ— æ„ä¸­å˜æˆäº†ML + assã€‚\n\næˆ‘å¤§æ¦‚å®ç°äº†å¤§éƒ¨åˆ†åŸºç¡€çš„ä¸œè¥¿ï¼Œç¥ç»ç½‘ç»œæ²¡æœ‰å†™ã€‚\n\nLinear Regression with one variable &lt;2012-01-06, Fri&gt;\nLinear Regression with multiple variables &lt;2012-06-28, Thu&gt;\nLogistic Regression &lt;2012-06-20, Wed&gt;\nRegularization for preventing overfitting &lt;2012-06-27, Wed&gt;\nNeural Networks\nSupport Vector Machines &lt;2012-04-11, Wed&gt;\nHierarchical clustering, single and complete method &lt;2012-12-10, Mon&gt;\nHierarchical clustering, average (UPGMA) method &lt;2014-08-22, Fri&gt;\nK-Means algorithm &lt;2011-12-30, Fri&gt;\nPrincipal Component Analysis\n\nä½†æ˜¯è¿™ä¸ªåå‡ å¹´å‰å†™çš„åŒ…ï¼Œè¿˜æ˜¯æŒºå¥½çš„ï¼Œå› ä¸ºé™¤äº†å®ç°ç®—æ³•ä¹‹å¤–ï¼Œç»“æœç”¨S4å¯¹è±¡å­˜ï¼Œå†™äº†æ–¹æ³•è®¿é—®æ•°æ®ï¼Œå†™äº†å¯è§†åŒ–ä»£ç ç”»å›¾ï¼Œç„¶åéƒ¨åˆ†è®¡ç®—çš„ä¸œè¥¿ï¼Œæˆ‘è¿˜ç”¨C++å†™äº†ã€‚å½“å¹´çš„session infoï¼Œggplot2è¿˜æ˜¯0.9.0ï¼Œéå¸¸å¤æ—©ã€‚\n\næ‰€è°“äººä¸‘è¦å¤šè¯»ä¹¦ï¼ŒAIå¾—ç»§ç»­å­¦èµ·æ¥ï¼Œäºæ˜¯ç¿»å‡ºæ¥è¿™ä¸ªæ—§ä»£ç ï¼Œå‘ç°è¿™ä¸ªåŒ…å®‰è£…æŠ¥é”™äº†ï¼Œä¿®æ­£äº†ä¸€ä¸‹ã€‚æ–‡æ¡£ä¹Ÿä»åŸæ¥ç”¨LaTeXå†™çš„ï¼Œæ¢æˆäº†ç”¨Markdownæ¥å†™ã€‚å®ƒåˆå¯ä»¥å®‰è£…äº†ã€‚\nä¾‹å­å¤§æ¦‚æ¯”å¦‚kmeansé‡Œè¿­ä»£ä¸­å¿ƒç‚¹ï¼Œç”»å‡ºæ¥è¿™æ ·å­ï¼š\n\nå†æ¯”å¦‚ä¸€ä¸ªSVMåˆ†ç±»çš„ä¾‹å­ï¼Œç»“æœæ˜¯è¿™æ ·å­ï¼š\n\nå‰ä¸¤å¹´å¤§å®¶è¿˜åœ¨è¯´å¤§æ•°æ®å°±åƒå°‘å¹´æ€§äº‹ï¼Œå¤§å®¶éƒ½åœ¨è®²ä½†æ²¡äººåšè¿‡ã€‚ç°åœ¨AIéƒ½å¿«æˆä¸ºå¤§å­¦ç”Ÿçš„é€šè¯†è¯¾äº†ã€‚å¿…é¡»è¦æèµ·æ¥ã€‚"},"æœºå™¨å­¦ä¹ ä¸ç»Ÿè®¡æ–¹æ³•/KMeansåº”ç”¨äºéçº¿æ€§æ•°æ®":{"slug":"æœºå™¨å­¦ä¹ ä¸ç»Ÿè®¡æ–¹æ³•/KMeansåº”ç”¨äºéçº¿æ€§æ•°æ®","filePath":"æœºå™¨å­¦ä¹ ä¸ç»Ÿè®¡æ–¹æ³•/KMeansåº”ç”¨äºéçº¿æ€§æ•°æ®.md","title":"KMeansåº”ç”¨äºéçº¿æ€§æ•°æ®","links":[],"tags":["MachineLearning","KMeans","Classification"],"content":"ä¹¦æ¥ä¸Šä¸€å›ï¼Œå¯¹äºçº¿æ€§ä¸å¯åˆ†çš„æ•°æ®ï¼Œæ€ä¹ˆç”¨KMeansæ¥åšèšç±»ã€‚\næ•°æ®\nç”¨make_moonsæ¥ç”Ÿæˆä¸€ä¸ªæ¯”è¾ƒå¤æ‚çš„æµå½¢æ•°æ®ã€‚\nfrom sklearn.datasets import make_moons\n \nX, y = make_moons(200, noise=0.05, random_state=0)\nç”»å›¾çœ‹ä¸€ä¸‹ï¼Œæ•°æ®æ˜¯é•¿è¿™æ ·å­çš„ï¼š\nimport matplotlib.pyplot as plt\n \nplt.scatter(X[:, 0], X[:, 1], s=50, c=y, cmap=&#039;viridis&#039;)\n\nç®€å•çš„KMeansæ˜¯åˆ†ä¸å¥½çš„\nfrom sklearn.cluster import KMeans\nkmeans = KMeans(n_clusters=2)\nlabels = kmeans.fit_predict(X)\nplt.scatter(X[:, 0], X[:, 1], c=labels, s=50, cmap=&#039;viridis&#039;)\næˆ‘ä»¬ç”¨KMeansæ¥èšç±»ï¼Œç„¶åç”¨èšç±»ç»“æœè¿›è¡Œä¸Šè‰²ï¼š\n\næ•ˆæœåªèƒ½è¯´ä¸è¡Œã€‚\nt-SNE + KMeans\nåšè¿‡å•ç»†èƒåˆ†æçš„ï¼Œéƒ½çŸ¥é“t-SNEï¼Œå½“ç„¶ä½ ä¹Ÿå¯ä»¥è¯•è¯•UMAPï¼Œæ•ˆæœåº”è¯¥å·®ä¸å¤šã€‚t-SNEæ“…é•¿æ•æ‰å±€éƒ¨ç»“æ„ï¼Œå°±ç‰¹åˆ«é€‚åˆè¿™ç§æµå½¢æ•°æ®ã€‚å®ƒåœ¨é«˜ç»´ç©ºé—´ç”¨é«˜æ–¯åˆ†å¸ƒè®¡ç®—æ ·æœ¬é—´çš„ç›¸ä¼¼åº¦ï¼Œç„¶åç”¨tåˆ†å¸ƒåŒ¹é…é«˜ç»´æ¦‚ç‡åˆ†å¸ƒï¼Œé€šè¿‡æ¢¯åº¦ä¸‹é™ä¼˜åŒ–ä½ç»´åµŒå…¥ï¼Œä¼˜åŒ–ç›®æ ‡æ˜¯æœ€å°åŒ–é«˜ç»´å’Œä½ç»´æ¦‚ç‡åˆ†å¸ƒçš„KLæ•£åº¦ã€‚\næˆ‘ä»¬å¯¹æ•°æ®å…ˆè¿›è¡Œæ ‡å‡†åŒ–ï¼š\nfrom sklearn.preprocessing import StandardScaler\nscaler = StandardScaler()\nX_scaled = scaler.fit_transform(X)\nå†è¿›è¡Œt-SNEçš„å˜æ¢ï¼š\nfrom sklearn.manifold import TSNE\n \n \nX_tsne = TSNE(n_components=2, perplexity=30, random_state=42).fit_transform(X_scaled)\ny_tsne_kmeans = KMeans(n_clusters=2).fit_predict(X_tsne)\nè¿™æ—¶å€™ï¼Œæˆ‘ä»¬å¯ä»¥å¯¹å˜æ¢åçš„æ•°æ®è¿›è¡Œå¯è§†åŒ–ï¼š\nplt.scatter(X_tsne[:,0], X_tsne[:,1], c=y, cmap=&#039;viridis&#039;, s=50)\n\néå¸¸å¥½åœ°ä¿ç•™äº†åŸæ¥çš„åˆ†ç±»ä¿¡æ¯ï¼Œç„¶åè¿™ä¸ªæ•°æ®å°±æˆäº†çº¿æ€§å¯åˆ†äº†ã€‚\né‚£ä¹ˆæˆ‘ä»¬å¯ä»¥å¯è§†åŒ–åŸå§‹çš„æ•°æ®ï¼Œå¹¶ç”¨KMeansèšç±»ç»“æœè¿›è¡Œä¸Šè‰²ï¼Œçœ‹çœ‹èšç±»æ•ˆæœå¦‚ä½•ï¼š\nplt.scatter(X[:, 0], X[:, 1], c=y_tsne_kmeans, s=50, cmap=&#039;viridis&#039;)\n\nè°±èšç±»\nè°±èšç±»æœ¬è´¨ä¸Šå°±æ˜¯æ ¸KMeansçš„ä¼˜åŒ–ç‰ˆæœ¬ï¼Œå°±æ˜¯ä¸Šæ¬¡è¯´çš„åº”ç”¨æ ¸å‡½æ•°å†åŠ KMeansï¼Œå½“ç„¶å¦‚æœä½ è‡ªå·±è¿™ä¹ˆç®€å•åšäº†ï¼Œæ•ˆæœå¯èƒ½ä¸å¤ªå¥½ï¼Œå› ä¸ºè°±èšç±»åšå¾—æ›´å¤šï¼Œæ‰€ä»¥æ›´åŠ é²æ£’ã€‚å®ƒå…ˆè®¡ç®—ä¸€ä¸ªç›¸ä¼¼åº¦çŸ©é˜µï¼ˆå¯ä»¥é€šè¿‡é«˜æ–¯æ ¸å‡½æ•°+æ¬§å¼è·ç¦»ï¼Œä¹Ÿå¯ä»¥é€šè¿‡KNNè¿æ¥çŸ©é˜µï¼‰ï¼Œå†æ„å»ºæ‹‰æ™®æ‹‰æ–¯çŸ©é˜µå¯¹ç›¸ä¼¼åº¦çŸ©é˜µè¿›è¡Œå½’ä¸€åŒ–ï¼Œå†è®¡ç®—ç‰¹å¾å‘é‡ï¼ˆæœ¬è´¨å°±æ˜¯ä½ç»´åµŒå…¥ï¼‰ï¼Œç„¶åå¯¹ç‰¹å¾å‘é‡è¿è¡ŒKMeansã€‚\nfrom sklearn.cluster import KMeans, SpectralClustering\nspectral = SpectralClustering(n_clusters=2, \n                             affinity=&#039;rbf&#039;,\n                             gamma=15,\n                             random_state=42)\ny_spectral = spectral.fit_predict(X_scaled)\nplt.scatter(X[:, 0], X[:, 1], c=y_spectral, s=50, cmap=&#039;viridis&#039;)\nè¿™é‡Œæˆ‘å°±ç”¨äº†affinity=&#039;rbf&#039;ä¹Ÿå°±æ˜¯é«˜æ–¯æ ¸å‡½æ•°ï¼Œgammaè¿™ä¸ªå‚æ•°æ§åˆ¶é«˜æ–¯æ ¸å‡½æ•°çš„å®½åº¦ï¼Œæ•°æ®å¤æ‚çš„æƒ…å†µä¸‹ï¼Œgammaå°±å¯ä»¥è°ƒå¤§ä¸€ç‚¹è¯•è¯•ã€‚æœ€åçš„èšç±»ç»“æœæ•ˆæœå°±éå¸¸å¥½ã€‚\n"},"æœºå™¨å­¦ä¹ ä¸ç»Ÿè®¡æ–¹æ³•/æ·±åº¦å­¦ä¹ /PyTorchå¯¹æ•°æ®è¿›è¡Œå¤šåˆ†ç±»":{"slug":"æœºå™¨å­¦ä¹ ä¸ç»Ÿè®¡æ–¹æ³•/æ·±åº¦å­¦ä¹ /PyTorchå¯¹æ•°æ®è¿›è¡Œå¤šåˆ†ç±»","filePath":"æœºå™¨å­¦ä¹ ä¸ç»Ÿè®¡æ–¹æ³•/æ·±åº¦å­¦ä¹ /PyTorchå¯¹æ•°æ®è¿›è¡Œå¤šåˆ†ç±».md","title":"PyTorchå¯¹æ•°æ®è¿›è¡Œå¤šåˆ†ç±»","links":[],"tags":["DeepLearning","Pytorch","Classification"],"content":"ä¹¦æ¥ä¸Šä¸€å›ï¼Œä»äºŒåˆ†ç±»å¾€å‰èµ°ä¸¤æ­¥ï¼Œè¿™æ¬¡æ¥åšå¤šåˆ†ç±»ã€‚\næ•°æ®\nimport numpy as np\nimport matplotlib.pyplot as plt\nRANDOM_SEED = 42\n \nnp.random.seed(RANDOM_SEED)\n \nN = 100\nD = 2\nK = 3\n \nX = np.zeros((N*K, D))\ny = np.zeros(N*K, dtype=&#039;uint8&#039;)\n \nfor j in range(K):\n    ix = range(N*j, N*(j+1))\n    r = np.linspace(0.0, 1, N)\n    t = np.linspace(j*4, (j+1)*4, N) + np.random.randn(N) * 0.2\n    X[ix] = np.c_[r*np.sin(t), r*np.cos(t)]\n    y[ix] = j\nç”Ÿæˆä¸ªä¸‰åˆ†ç±»çš„æ•°æ®æ¥è®­ç»ƒæ¨¡å‹ï¼Œå¯¹äºæ¨¡å‹æ¥è¯´ï¼Œå¤šå°‘ä¸ªåˆ†ç±»éƒ½æ˜¯ä¸€æ ·è®­çš„ã€‚\næ•°æ®å¤§æ¦‚æ˜¯é•¿è¿™æ ·å­çš„ï¼š\n\næ•°æ®ç°åœ¨æ˜¯numpyï¼Œè¦è½¬æˆtensorï¼Œç„¶åè¦æ”¾åˆ°åˆé€‚çš„deviceï¼ˆæ”¾åˆ°GPUå»ï¼‰ï¼Œç„¶åè¿˜è¦åˆ‡åˆ†æ•°æ®ä¸ºè®­ç»ƒé›†å’Œæµ‹è¯•é›†ã€‚\nimport torch\nX = torch.from_numpy(X).type(torch.float)\ny = torch.from_numpy(y).type(torch.LongTensor)\n \nX = X.to(device)\ny = y.to(device)\n \nfrom sklearn.model_selection import train_test_split\n \nX_train, X_test, y_train, y_test = train_test_split(X, y, test_size=0.2, random_state=RANDOM_SEED)\næ¨¡å‹\nfrom torch import nn\n \nClassification = nn.Sequential(\n    nn.Linear(in_features = 2, out_features = 10),\n    nn.ReLU(),\n    nn.Linear(in_features = 10, out_features = 10),\n    nn.ReLU(),\n    nn.Linear(in_features = 10, out_features = 3)\n).to(device)\nè¿™å’Œæˆ‘ä»¬ä¸Šæ¬¡åšäºŒåˆ†ç±»æœ‰ä»€ä¹ˆåŒºåˆ«ï¼Œå¯ä»¥è¯´æ ¹æœ¬æ²¡åŒºåˆ«ï¼Œå½“ç„¶å¦‚æœä½ ä»”ç»†çœ‹çš„è¯ï¼ŒåŸæ¥äºŒåˆ†ç±»çš„è¾“å‡ºæ˜¯ä¸€ä¸ªlogitï¼Œç„¶åæˆ‘ä»¬è¿‡ä¸€ä¸ªsigmoidï¼Œå‡ºæ¥åˆ†ç±»çš„æ¦‚ç‡ã€‚è¿™é‡Œæ˜¯å¤šåˆ†ç±»ï¼Œå¯¹æ¯ä¸€ä¸ªåˆ†ç±»éƒ½ä¼šæœ‰ä¸€ä¸ªlogitï¼Œæ‰€ä»¥è¾“å‡ºçš„é•¿åº¦ä¸åˆ†ç±»çš„æ•°ç›®ä¸€è‡´ï¼Œè¿™é‡Œæ˜¯3åˆ†ç±»ï¼Œå°±è®¾å®šout_features = 3ã€‚è¿™é•¿åº¦ä¸º3çš„logitsï¼Œä¾ç„¶éœ€è¦æœ‰ä¸€ä¸ªå‡½æ•°ç»™è½¬æˆè¿™ä¸‰ç§åˆ†ç±»çš„æ¦‚ç‡ï¼Œè¿™å°±éœ€è¦ç”¨softmaxå‡½æ•°ã€‚é¢„æµ‹çš„ç»“æœå°±æ˜¯æ¦‚ç‡æœ€å¤§çš„åˆ†ç±»ã€‚\n\næŸå¤±å‡½æ•°\nloss_fn = nn.CrossEntropyLoss()\næ­£å¦‚æˆ‘ä»¬åœ¨äºŒåˆ†ç±»é‡Œä»‹ç»çš„ï¼Œåˆ†ç±»ç”¨äº¤å‰ç†µæ¥è®¡ç®—æŸå¤±ï¼Œè¿™é‡Œç›¸åº”åœ°å°±ç”¨äº†nn.CrossEntropyLoss()å‡½æ•°ã€‚\nä¼˜åŒ–å™¨\noptimizer = torch.optim.Adam(params = Classification.parameters(), lr = 0.01)\n\nä¸Šæ¬¡æˆ‘ä»¬ç”¨éšæœºæ¢¯åº¦ä¸‹é™ï¼ˆSGDï¼‰ï¼Œè¿™æ¬¡æˆ‘ä»¬æ¢ä¸€ä¸ªï¼Œç”¨Adamï¼ŒAdamè¿™ä¸ªæ–¹æ³•çš„åŸºæœ¬æ€è·¯æ˜¯èåˆäº†ä¸¤ç§æ–¹æ³•ï¼šMomentumå’ŒAdaGradã€‚Momentumå‚ç…§å°çƒåœ¨ç¢—ä¸­æ»šåŠ¨çš„ç‰©ç†è§„åˆ™è¿›è¡Œç§»åŠ¨ï¼›AdaGradä¼šè®°å½•è¿‡å»æ‰€æœ‰æ¢¯åº¦çš„å¹³æ–¹å’Œï¼Œå­¦ä¹ è¶Šæ·±å…¥ï¼Œæ›´æ–°çš„å¹…åº¦å°±è¶Šå°ã€‚Adamé€šè¿‡ç»„åˆè¿™ä¸¤ä¸ªæ–¹æ³•çš„ä¼˜ç‚¹ï¼Œæœ‰æœ›å®ç°å‚æ•°ç©ºé—´çš„é«˜æ•ˆæœç´¢ã€‚\nå‡†ç¡®ç‡\nfrom torchmetrics import Accuracy\n \nacc_fn = Accuracy(task=&quot;multiclass&quot;, num_classes = K).to(device)\nacc_fn\nå‡†ç¡®ç‡è¿™ä¸ªå‡½æ•°å’Œæˆ‘ä»¬åšäºŒåˆ†ç±»åŸºæœ¬ä¸€æ ·ï¼Œå·®åˆ«å°±åœ¨äºæŒ‡å®šäº†ä¸åŒçš„num_classeså‚æ•°è€Œå·²ã€‚\nè®­ç»ƒæ¨¡å‹\nfrom timeit import default_timer as timer \n \nstart_time = timer()\n \nepochs = 1000\n \nfor epoch in range(epochs):\n    ## Training\n    Classification.train()\n \n    y_logits = Classification(X_train)\n    y_pred = torch.softmax(y_logits, dim=1).argmax(dim=1)\n \n    loss = loss_fn(y_logits, y_train)\n    acc = acc_fn(y_pred, y_train)\n    \n    optimizer.zero_grad()\n    loss.backward()\n    optimizer.step()\n \n    ## Testing\n    Classification.eval()\n    with torch.inference_mode():\n        test_logits = Classification(X_test)\n        test_pred = torch.softmax(test_logits, dim=1).argmax(dim=1)\n        test_loss = loss_fn(test_logits, y_test)\n        test_acc = acc_fn(test_pred, y_test)\n \n    if epoch % 100 == 0:\n        print(f&quot;Epoch: {epoch} | Loss: {loss:.5f}, Accuracy: {acc:.2f} | Test loss: {test_loss:.5f}, Test acc: {test_acc:.2f}&quot;)\n \nend_time = timer()\nå’ŒäºŒåˆ†ç±»çš„è®­ç»ƒä»£ç åŸºæœ¬ä¸Šæ˜¯ä¸€æ ·çš„ï¼Œå°±æ˜¯æŠŠæ¨¡å‹ä¸€æ¢ï¼ŒæŠŠlogitsè¦è¿‡ä¸€ä¸‹sigmoidæ¢æˆsoftmaxè€Œå·²ã€‚\n\nä¹Ÿæ˜¯å¾ˆå¿«å°±æ”¶æ•›äº†ï¼Œå‡†ç¡®ç‡å¾ˆé«˜ï¼Œç”¨æ—¶5ç§’ä¸åˆ°ã€‚\n\nå¯è§†åŒ–\næœ€åæˆ‘ä»¬æŠŠæ¨¡å‹åœ¨è®­ç»ƒé›†å’Œæµ‹è¯•é›†çš„å†³ç­–è¾¹ç•Œç»™ç”»ä¸€ä¸‹ï¼š\n"},"æœºå™¨å­¦ä¹ ä¸ç»Ÿè®¡æ–¹æ³•/æ·±åº¦å­¦ä¹ /å·ç§¯ç¥ç»ç½‘ç»œCNN":{"slug":"æœºå™¨å­¦ä¹ ä¸ç»Ÿè®¡æ–¹æ³•/æ·±åº¦å­¦ä¹ /å·ç§¯ç¥ç»ç½‘ç»œCNN","filePath":"æœºå™¨å­¦ä¹ ä¸ç»Ÿè®¡æ–¹æ³•/æ·±åº¦å­¦ä¹ /å·ç§¯ç¥ç»ç½‘ç»œCNN.md","title":"å·ç§¯ç¥ç»ç½‘ç»œCNN","links":[],"tags":["DeepLearning","CNN","Pytorch","Classification"],"content":"æ•°å­—è¯†åˆ«ç”¨ä¼ ç»Ÿçš„æœºå™¨å­¦ä¹ å°±å¯ä»¥åšåˆ°è›®é«˜çš„å‡†ç¡®ç‡ï¼Œä½¿ç”¨ç¥ç»ç½‘ç»œï¼Œå®Œå…¨ä¹Ÿå¯ä»¥ç”¨å…¨è¿æ¥çš„ç½‘ç»œæ¥è¯†åˆ«ï¼Œæ— éæ˜¯ä¸€ä¸ªå¤šåˆ†ç±»çš„é—®é¢˜ã€‚å’Œæˆ‘ä»¬å¹³æ—¶åšå¤šåˆ†ç±»æ²¡æœ‰å·®åˆ«ã€‚è¿™é‡Œæˆ‘ä»¬ç”¨å·ç§¯ç¥ç»ç½‘ç»œï¼ˆCNNï¼‰æ¥åšï¼ŒCNNåœ¨å›¾åƒè¯†åˆ«ä¸Šåº”ç”¨éå¸¸å¹¿æ³›ã€‚å› ä¸ºå…¨è¿æ¥ç¥ç»ç½‘ç»œçš„è¾“å…¥æ˜¯ä¸€ä¸ªå‘é‡ï¼ŒæŠŠå›¾ç‰‡æŒ‰ç…§è¡Œè¿æ¥æˆä¸€ä¸ªå‘é‡ï¼Œå°±ä¼šæŠŠç©ºé—´ä¿¡æ¯ç»™æŠ¹æ‰ã€‚è¿™å°±æ˜¯CNNè¦è§£å†³çš„ï¼Œè¦åˆ©ç”¨ç©ºé—´ä¿¡æ¯ï¼Œæ¥æ‰¾patternsï¼Œæ¯”å¦‚è¦è¯†åˆ«ä¸€åªé¸Ÿï¼Œå›¾ç‰‡ä¸­æœ‰ä¸€å°å—æ˜¯ä¸€ä¸ªé¸Ÿå˜´ï¼Œè¿™å¯¹è¯†åˆ«é¸Ÿæ˜¯æœ‰ç”¨çš„ã€‚\nCNNæ¦‚è¿°\nCNNå’Œå…¨è¿æ¥çš„ç¥ç»ç½‘ç»œçš„åŒºåˆ«é¦–å…ˆåœ¨åœ¨äºå®ƒä¼ é€’çš„æ•°æ®æ˜¯æœ‰å½¢çŠ¶çš„ï¼Œä¹Ÿå°±æ˜¯å‰é¢è¯´çš„è¦åˆ©ç”¨ç©ºé—´ä¿¡æ¯ï¼Œæ‰€ä»¥ç”¨sliding windowsçš„ç­–ç•¥ï¼Œæ‰«æä¸€ä¸ªåˆä¸€ä¸ªçš„çª—å£ï¼ˆpatchesï¼‰ï¼Œè¿™ä¸ªçª—å£æ¯æ¬¡æ‰«æå°±ç”¨ä¸€ä¸ªæ»¤æ³¢å™¨ï¼ˆfilterï¼‰å»åšinner productï¼Œä¸€ä¸ªçª—å£å‡ºæ¥æ˜¯ä¸€ä¸ªå€¼ã€‚\n\nè¿™ä¸€ä¸ªæ»¤æ³¢å™¨ä½œç”¨äºè¿™ä¸€ä¸ªé€šé“ä¸Šï¼Œä¼šå‡ºæ¥å¦ä¸€ä¸ªå¤§å°ä¸ä¸€æ ·çš„äºŒç»´æ•°æ®ï¼Œæ‰€ä»¥è¾“å…¥è¾“å‡ºæœ‰æ—¶å€™åˆå¯ä»¥ç»Ÿä¸€ç§°ä¹‹ä¸ºç‰¹å¾å›¾ã€‚è¾“å…¥é€šå¸¸ä¸æ˜¯ä¸€ä¸ªé€šé“ï¼Œæ¯”å¦‚è¯´RGBçš„å›¾ï¼Œå°±æœ‰RGBä¸‰ä¸ªé€šé“ï¼Œæœ€ç»ˆçš„è¾“å‡ºæ˜¯æ¯ä¸€ä¸ªé€šé“éƒ½ä¸€æ ·çš„åšæ³•ï¼Œç„¶åå°†å¤šä¸ªé€šé“è¿›è¡ŒåŠ å’Œã€‚\n\næ»¤æ³¢å™¨ä¸»è¦ç”¨äºæå–å›¾åƒçš„ç‰¹å¾ï¼Œæ¯”å¦‚ä¸‹é¢è¿™å¼ å›¾æ‰€æ¼”ç¤ºçš„ã€‚\n\nä¸€ä¸ªæ»¤æ³¢å™¨å‡ºæ¥ä¸€å¼ ç‰¹å¾å›¾ï¼Œå¤šä¸ªæ»¤æ³¢å™¨å°±ä¼šå‡ºæ¥å¤šä¸ªç‰¹å¾å›¾ï¼Œå°±åƒRGBçš„å›¾æœ‰ä¸‰ä¸ªé€šé“ä¸€æ ·ï¼Œç”¨Nä¸ªæ»¤æ³¢å™¨ï¼Œå‡ºæ¥çš„æ•°æ®å°±æœ‰Nä¸ªé€šé“ï¼Œæ¯ä¸ªé€šé“æ˜¯2Dçš„æ•°æ®ï¼Œæ•´ä¸ªæ˜¯ä¸€ä¸ª3Dçš„æ•°æ®ï¼Œæˆ‘ä»¬ä¾ç„¶å¯ä»¥ç†è§£æˆä¸€å¼ å›¾ï¼ŒåŸæ¥çš„å›¾æ˜¯3ä¸ªé€šé“ï¼Œç°åœ¨æœ‰Nä¸ªé€šé“äº†ï¼Œä¸æ˜¯æˆ‘ä»¬ç†è§£çš„RGBå›¾åƒï¼Œä½†å½¢å¼ä¸Šæ˜¯ä¸€è‡´çš„ã€‚è¿™å°±æ˜¯å·ç§¯çš„è¿‡ç¨‹ã€‚\n\næ»¤æ³¢å™¨é‡Œçš„æ•°å€¼ï¼Œç›¸å½“äºæˆ‘ä»¬åœ¨å…¨è¿æ¥ç¥ç»ç½‘ç»œä¸­æƒé‡ï¼Œä¹Ÿä¼šåŠ ä¸Šåç½®ï¼Œè¿™äº›å‚æ•°éƒ½æ˜¯å­¦ä¹ å‡ºæ¥çš„ã€‚\n\nä¸€ä¸ªå…¸å‹çš„å·ç§¯ç¥ç»ç½‘ç»œå°±æ˜¯å·ç§¯â†’æ¿€æ´»â†’æ± åŒ–ï¼Œå¯ä»¥æ˜¯ä¸€ä¸ªè¿™æ ·çš„è¿‡ç¨‹ï¼Œä¹Ÿå¯ä»¥è¿ç€æ­å‡ ä¸ªã€‚è¿™ä¸ªåšä¸ºFeature learningï¼ŒæŠŠå›¾åƒçš„ç‰¹å¾å­¦å‡ºæ¥ï¼Œç„¶åç”¨è¿™äº›ç‰¹å¾åšä¸ºè¾“å…¥ï¼Œæ¥ä¸€ä¸ªå…¨è¿æ¥çš„ç¥ç»ç½‘ç»œï¼ˆä¹Ÿè¢«ç§°ä¹‹ä¸ºdense networkï¼‰ï¼Œè¿™å°±æ˜¯å®Œæ•´çš„CNNã€‚\nå·ç§¯å±‚\n\nè¿ç®—å°±æ˜¯å‰é¢è®²åˆ°çš„ç›¸å½“äºå›¾åƒå¤„ç†çš„æ»¤æ³¢å™¨è¿ç®—ã€‚è¿™é‡Œæ¶‰åŠåˆ°ä¸€äº›å’Œè¿ç®—ç»†åˆ™æœ‰å…³çš„æ¦‚å¿µï¼ŒåŒ…æ‹¬kernel size, paddingå’Œstrideï¼Œè¿™äº›ä¼šå½±å“åˆ°è¾“å‡ºçš„æ•°æ®å½¢çŠ¶å¤§å°ï¼Œè¿™ä¹Ÿè¦ç®—ä¸€ä¸‹çš„ï¼Œå› ä¸ºæœ€ç»ˆè¦è¿‡ä¸€ä¸‹å…¨è¿æ¥å±‚ï¼Œè¾“å…¥çš„å¤§å°æ˜¯è¦å‡†ç¡®æŒ‡å®šçš„ã€‚\næ»¤æ³¢å™¨ï¼ˆfilter/kernelï¼‰\næ»¤æ³¢å™¨æœ‰æ—¶å€™ä¹Ÿå«kernelï¼Œå› ä¸ºæ»¤æ³¢å™¨æ˜¯ä¸éœ€è¦æˆ‘ä»¬æŒ‡å®šçš„ï¼Œä¹Ÿæ˜¯å­¦å‡ºæ¥çš„ï¼Œæˆ‘ä»¬è¦æŒ‡å®šçš„åªæœ‰æ»¤æ³¢å™¨çš„æ•°é‡ï¼Œä¹Ÿæ˜¯è¾“å‡ºçš„channelæ•°ç›®ï¼Œè¿˜æœ‰æ»¤æ³¢å™¨çš„å¤§å°ï¼Œkernel sizeã€‚\nå¡«å……ï¼ˆpaddingï¼‰\nä¸€ä¸ª4x4çš„æ•°æ®ï¼Œç”¨ä¸€ä¸ª3x3çš„æ»¤æ³¢å™¨ï¼Œè¾“å‡ºçš„æ•°æ®å°±å˜æˆäº†2x2ï¼Œæ‰€ä»¥è¿™æ ·å­ï¼Œå¦‚æœå åŠ å·ç§¯å±‚ï¼Œå°±æœ‰å¯èƒ½åœ¨ä¸­é—´å˜æˆ1x1ï¼Œåé¢æ²¡æ³•å†ç»§ç»­åšå·ç§¯äº†ã€‚æ‰€ä»¥å°±éœ€è¦åœ¨æ•°æ®çš„è¾¹ç¼˜è¿›è¡Œå¡«å……ï¼Œåƒä¸‹é¢è¿™ä¸ªä¾‹å­ï¼Œé€šè¿‡å¡«å……å°±å¯ä»¥è®©è¾“å…¥å’Œè¾“å‡ºä¿æŒ4x4çš„å½¢çŠ¶ã€‚\n\næ­¥å¹…ï¼ˆstrideï¼‰\nåœ¨åº”ç”¨æ»¤æ³¢å™¨æ—¶ï¼Œé€šè¿‡ç§»åŠ¨çª—å£ï¼ŒæŠŠæ‰€æœ‰çš„æ•°æ®éƒ½è¿‡ä¸€éï¼Œçª—å£å’Œçª—å£ä¹‹é—´æ˜¯æœ‰é‡å çš„ï¼Œç§»åŠ¨çª—å£çš„æ­¥ä¼æœ‰å¤šå¤§ï¼Œå°±æ˜¯æ­¥å¹…ã€‚\n\næ± åŒ–\nå…¸å‹çš„CNNåŒ…æ‹¬å·ç§¯â†’æ¿€æ´»â†’æ± åŒ–ï¼Œæ¿€æ´»å°±æ˜¯ReLUè¿™äº›ï¼Œéƒ½å¾ˆæ¸…æ¥šï¼Œæœ€åå°±æ± åŒ–ï¼š\n\næ± åŒ–æ²¡æœ‰éœ€è¦å­¦ä¹ çš„å‚æ•°ï¼Œå°±æ˜¯åœ¨ç›®æ ‡åŒºåŸŸé‡Œå–ä¸ªä»£è¡¨æ€§çš„å€¼ï¼Œä¸Šå›¾æ˜¯æœ€å¤§å€¼ï¼Œä¹Ÿå¯ä»¥æ˜¯å¹³å‡å€¼ã€‚æ± åŒ–æ˜¯åœ¨æ¯ä¸ªé€šé“å•ç‹¬è¿›è¡Œï¼Œæ‰€ä»¥ä¸ä¼šæ”¹å˜é€šé“æ•°ã€‚\nè¾“å…¥æ•°æ®å‘ç”Ÿä¸€ç‚¹å¾®å°çš„å˜åŒ–ï¼Œé€šè¿‡æ± åŒ–ï¼Œè¾“å‡ºåŸºæœ¬ä¸Šæ˜¯ä¸å˜çš„ï¼Œè¿™æ ·å°±å…·æœ‰ä¸€å®šçš„é²æ£’æ€§ã€‚å½“ç„¶å…¶å®æ± åŒ–æœ€ä¸»è¦çš„ä½œç”¨æ˜¯è®©æ•°æ®å˜å°ï¼Œè¿™æœ¬èº«æ˜¯ä¸ºäº†æ›´é«˜æ•ˆçš„è®¡ç®—ã€‚ä»è¿™ä¸ªè§’åº¦æ¥è¯´ï¼Œè®¡ç®—èµ„æºå¤Ÿçš„æƒ…å†µä¸‹ï¼Œæ˜¯å¯ä»¥ä¸éœ€è¦æ± åŒ–çš„ã€‚\nä¹¦ä¸Šè®²çš„éƒ½æ˜¯è¯´è®©æ•°æ®å˜å°è¿™ä¸€ç‚¹ï¼Œæˆ‘è‡ªå·±æƒ³åˆ°çš„æ˜¯ï¼Œå› ä¸ºå·ç§¯è¿ç®—å¯ä»¥å¥—å¥½å‡ ä¸ªï¼Œé‚£ä¹ˆç»è¿‡æ± åŒ–ä¹‹åï¼Œå†åšåŒæ ·å¤§å°çš„æ»¤æ³¢è¿ç®—ï¼Œç›¸å½“äºåœ¨æ›´å¤§çš„åŒºåŸŸå»æ•è·ç‰¹å¾äº†ã€‚æˆ‘è®¤ä¸ºæ˜¯æœ‰è¿™ä¸ªä½œç”¨çš„ï¼Œç›¸å½“äºå‰é¢æ˜¯ä½ç©ºçœ‹ç»†èŠ‚ï¼Œåé¢é«˜ç©ºçœ‹è½®å»“ï¼Œæœ‰è¿™æ ·ä¸€ä¸ªè¿‡ç¨‹çš„ä½œç”¨ã€‚\nå¦å¤–ä¹Ÿè¦çœ‹å®é™…æƒ…å†µï¼Œå¯¹äºä¸€èˆ¬çš„å›¾åƒå¤„ç†æ¥è¯´ï¼Œæ± åŒ–çš„è¿‡ç¨‹ï¼Œç›¸å½“äºå‹ç¼©äº†å›¾ç‰‡ï¼Œå‹ç¼©å®Œå›¾ç‰‡çœ‹ç€å˜åŒ–ä¸å¤§ã€‚AlphaGOå°±ä½¿ç”¨äº†CNNï¼Œä½†æ˜¯å®ƒå°±æ²¡æœ‰ç”¨æ± åŒ–ï¼Œå› ä¸ºæ± åŒ–äº†ä¹‹åï¼Œæ£‹ç›˜å°±ä¸å®Œæ•´äº†ï¼Œè¿™å’Œå›¾åƒå¤„ç†æ˜¯æœ‰åŒºåˆ«çš„ï¼Œæ‰€ä»¥å®ƒä¸èƒ½å¤Ÿç”¨æ± åŒ–ã€‚æ‰€ä»¥è¯´ï¼Œè¿˜å¾—å…·ä½“æƒ…å†µå…·ä½“åˆ†æã€‚\nPyTorchå®æˆ˜\næ•°æ®\nè¿™é‡Œä½¿ç”¨çš„æ˜¯MNISTæ‰‹å†™æ•°å­—çš„æ•°æ®é›†ï¼Œæœ‰6ä¸‡å¼ å›¾ç‰‡ã€‚å…ˆåˆ›å»ºæ–‡ä»¶å¤¹ï¼Œç„¶åä¸‹è½½ï¼Œå¦‚æœæ–‡ä»¶å·²ç»å­˜åœ¨ï¼Œå°±è·³è¿‡ä¸‹è½½ã€‚\nfrom pathlib import Path\nimport requests\n \nDATA_PATH = Path(&quot;data&quot;)\nPATH = DATA_PATH / &quot;mnist&quot;\n \nPATH.mkdir(parents=True, exist_ok=True)\n \nURL = &quot;github.com/pytorch/tutorials/raw/main/_static/&quot;\nFILENAME = &quot;mnist.pkl.gz&quot;\n \nif not (PATH / FILENAME).exists():\n    content = requests.get(URL + FILENAME).content\n    (PATH / FILENAME).open(&quot;wb&quot;).write(content)\nè¿™ä¸ªæ•°æ®æ˜¯ä¸ªpickleæ–‡ä»¶ï¼Œå­˜çš„æ˜¯numpy arrayæ ¼å¼ï¼Œæˆ‘ä»¬ç›¸åº”åœ°æŠŠå®ƒè§£å‹ç¼©ï¼Œè®²è¿›æ¥ã€‚\nimport pickle\nimport gzip\n \nwith gzip.open((PATH / FILENAME).as_posix(), &quot;rb&quot;) as f:\n    ((x_train, y_train), (x_valid, y_valid), _) = pickle.load(f, encoding=&quot;latin-1&quot;)\næ€»å…±æœ‰6ä¸‡å¼ å›¾ç‰‡ï¼Œ5ä¸‡å¼ æ˜¯è®­ç»ƒé›†ï¼Œ1ä¸‡å¼ åšä¸ºéªŒè¯/æµ‹è¯•é›†ã€‚\n\nå›¾ç‰‡æ˜¯28x28åƒç´ çš„ï¼Œå·²ç»è¢«æ‰“æˆé•¿åº¦ä¸º784çš„ä¸€ç»´å‘é‡ã€‚\næˆ‘ä»¬å¯ä»¥éšä¾¿é€‰ä¸€å¼ ç”»å‡ºæ¥çœ‹çœ‹ï¼š\nfrom matplotlib import pyplot as plt\nimport numpy as np\nplt.imshow(x_train[9].reshape((28,28)), cmap=&#039;gray&#039;)\n\nNumPy to Tensor\nå› ä¸ºæ˜¯numpy arrayæ ¼å¼ï¼Œæˆ‘ä»¬éœ€è¦è½¬æ¢æˆtensorã€‚\nimport torch\n \nx_train, y_train, x_valid, y_valid = map(\n    torch.tensor, (x_train, y_train, x_valid, y_valid)\n)\nDataLoader\nfrom torch.utils.data import TensorDataset\nfrom torch.utils.data import DataLoader\n \nbs = 64\n \ntrain_ds = TensorDataset(x_train, y_train)\ntrain_dl = DataLoader(train_ds, batch_size=bs)\n \nvalid_ds = TensorDataset(x_valid, y_valid)\nvalid_dl = DataLoader(valid_ds, batch_size=bs * 2)\næˆ‘ä»¬ä½¿ç”¨TensorDataSetæ¥å­˜è¿™äº›æ•°æ®ï¼ŒåŒæ—¶å­˜sampleså’Œlabelsï¼Œå†ç”¨DataLoaderæ¥æ–¹ä¾¿æˆ‘ä»¬è®¿é—®å’Œè¿­ä»£è¿™äº›æ•°æ®ï¼Œå…¶ä¸­ä¸€ä¸ªå‚æ•°æ˜¯batch_sizeï¼Œä¹Ÿå°±æ˜¯æ‰¹å¤„ç†çš„å¤§å°ï¼ŒæŒ‡å®šä¸€æ¬¡æœ‰å¤šå°‘ä¸ªæ•°æ®æ‰“åŒ…å–‚ç»™ç¥ç»ç½‘ç»œã€‚\næ¨¡å‹\né¦–å…ˆæ˜¯çœ‹çœ‹æœ‰æ²¡æœ‰GPUï¼Œæœ‰åˆ™è®¾å¤‡è®¾ä¸ºâ€™cudaâ€™ï¼Œæ²¡æœ‰å°±è®¾ä¸ºâ€™cpuâ€™ã€‚æˆ‘ä»¬çš„è¿ç®—éƒ½åœ¨æŒ‡å®šçš„deviceä¸Šè¿›è¡Œã€‚\ndevice = torch.device(&#039;cuda&#039; if torch.cuda.is_available() else &#039;cpu&#039;)\nè®­ç»ƒæ­¥éª¤\nè®­ç»ƒçš„ä»£ç éƒ½åŸºæœ¬ä¸€æ ·ï¼Œæˆ‘ä»¬æŠŠå®ƒå†™æˆä¸€ä¸ªå‡½æ•°ï¼Œæ–¹ä¾¿è°ƒç”¨ã€‚\ndef train_step(model: torch.nn.Module,\n               data_loader,\n               loss_fn,\n               optimizer,\n               acc_fn,\n               device = device):\n \n    train_loss, train_acc = 0, 0\n    for batch, (X, y) in enumerate(data_loader):\n        X, y = X.to(device), y.to(device)\n        model.train()\n        y_pred = model(X)\n \n        loss = loss_fn(y_pred, y)\n        train_loss += loss\n        train_acc += acc_fn(y_pred, y)\n        \n        optimizer.zero_grad()\n        loss.backward()\n        optimizer.step()\n \n    train_loss /= len(data_loader)\n    train_acc /= len(data_loader)\n \n    print(f&quot;Train loss: {train_loss:.5f} | Train accuracy: {train_acc:.2f}&quot;)\næµ‹è¯•æ­¥éª¤\næµ‹è¯•æ­¥éª¤ä¹Ÿæ˜¯åŒæ ·çš„é“ç†ï¼Œä¹Ÿå†™æˆå‡½æ•°ï¼š\ndef test_step(model,\n              data_loader,\n              loss_fn,\n              acc_fn,\n              device = device):\n \n    test_loss, test_acc=0, 0\n    model.eval()\n    with torch.inference_mode():\n        for X, y in data_loader:\n            X, y = X.to(device), y.to(device)\n            \n            test_pred = model(X)\n \n            test_loss += loss_fn(test_pred, y)\n            test_acc += acc_fn(test_pred.argmax(dim=1), y)\n            \n        test_loss /= len(data_loader)\n        test_acc /= len(data_loader)\n \n        print(f&quot;Test loss: {test_loss:.5f} | Test accuracy: {test_acc:.2f}\\n&quot;)\nCNNæ¨¡å‹\næˆ‘ä»¬ç”¨poloclub.github.io/cnn-explainer/é‡Œçš„CNNæ¶æ„ï¼ŒåŒ…å«ä¸¤ä¸ªç»“æ„ä¸€æ ·çš„blocksã€‚\n\nè¿™ä¸ªæ¶æ„æ˜¯æœ‰åçš„VGGçš„ç®€åŒ–ç‰ˆæœ¬ï¼ŒTinyVGG:\n\nfrom torch import nn\n \nclass MNIST(nn.Module):\n    def __init__(self, input_shape, hidden_units, output_shape):\n        super().__init__()\n        self.block_1 = nn.Sequential(\n            nn.Unflatten(1, (1, 28, 28)),\n            nn.Conv2d(\n                in_channels = input_shape,\n                out_channels = hidden_units,\n                kernel_size = 3,\n                stride=1,\n                padding=1),\n            nn.ReLU(),\n            nn.Conv2d(\n                hidden_units, hidden_units, 3, stride=1, padding=1),\n            nn.ReLU(),\n            nn.MaxPool2d(kernel_size=2,\n                         stride=2)\n        )\n \n        self.block_2 = nn.Sequential(\n            nn.Conv2d(hidden_units, hidden_units, 3, padding=1),\n            nn.ReLU(),\n            nn.Conv2d(hidden_units, hidden_units, 3, padding=1),\n            nn.ReLU(),\n            nn.MaxPool2d(kernel_size=2, stride=2)\n        )\n \n        self.classifier = nn.Sequential(\n            nn.Flatten(),\n            nn.Linear(in_features=hidden_units*7*7,\n                      out_features=output_shape)\n        )\n \n    def forward(self, x):\n        return self.classifier(self.block_2(self.block_1(x)))\nä¸¤ä¸ªblockséƒ½æ˜¯Conv2dâ†’ReLUâ†’Conv2dâ†’ReLUâ†’MaxPool2dã€‚å‚æ•°å‰é¢éƒ½æœ‰è§£æè¿‡ç›¸åº”çš„æ¦‚å¿µäº†ï¼Œè¿™é‡Œéœ€è¦è®²çš„æ˜¯åœ¨block_1é‡Œç”¨äº†nn.Unflattenï¼Œæ˜¯å› ä¸ºåŸæ¥çš„æ•°æ®28x28åƒç´ å·²ç»è¢«è½¬æˆä¸€ç»´å‘é‡äº†ï¼Œæ‰€ä»¥æ­¤å¤„éœ€è¦æå›2ç»´çš„æ•°æ®ã€‚ç„¶åè¿™é‡Œçš„å·ç§¯è¿ç®—ï¼Œç”¨çš„kernel_size=3ï¼Œstride=1ï¼Œpadding=1ï¼Œè¿™æ ·å­æ•°æ®çš„å½¢çŠ¶å¤§å°æ˜¯ä¸å˜çš„ï¼›å†é€šè¿‡MaxPool2dçš„æ—¶å€™ï¼Œkernel_size=2, stride=2ï¼Œæ‰€ä»¥ä¸€ä¸ª2x2çš„æ•°æ®å°±å˜æˆäº†1ä¸ªæ•°ï¼Œæ•°æ®å°±ä»28x28ï¼Œå˜æˆäº†14x14ã€‚æœ‰ä¸¤ä¸ªblocksï¼Œè¿‡äº†ä¸¤æ¬¡MaxPoolingï¼Œæœ€ç»ˆå°±å˜æˆäº†7x7ï¼Œæ‰€ä»¥æœ€åç»™nn.Linearçš„æ•°æ®ï¼Œå°±æ˜¯7x7xhidden_unitsï¼ˆä¹Ÿå°±æ˜¯æœ€åæ•°æ®çš„é€šé“æ•°ï¼‰ã€‚\nè®­ç»ƒæ¨¡å‹\nå…ˆåˆå§‹åŒ–ä¸€ä¸ªæ¨¡å‹ï¼Œinput_shapeå°±æ˜¯ä¼ ç»™å·ç§¯å±‚çš„é€šé“æ•°ï¼Œè¿™é‡Œæ˜¯ç°åº¦å›¾ï¼Œæ‰€ä»¥åªæœ‰ä¸€ä¸ªé€šé“ï¼Œhidden_unitså°±æ˜¯ä¸­é—´çš„é€šé“æ•°ï¼Œè€Œoutput_shapeå°±æ˜¯æœ€åè¿‡å…¨è¿æ¥ç¥ç»ç½‘ç»œçš„è¾“å‡ºï¼Œå› ä¸ºæ˜¯0-9çš„æ•°æ®ï¼Œæ‰€ä»¥æ˜¯10ä¸ªåˆ†ç±»ã€‚\ntorch.manual_seed(42)\n \nmodel = MNIST(input_shape=1, hidden_units=10, output_shape=10).to(device)\n\nè¿˜æœ‰ç›¸åº”çš„æŸå¤±å‡½æ•°å’Œä¼˜åŒ–å™¨ç­‰ï¼š\nfrom torchmetrics.classification import Accuracy\nacc_fn = Accuracy(task=&quot;multiclass&quot;, num_classes=10).to(device)\n \nloss_fn = nn.CrossEntropyLoss()\noptimizer = torch.optim.SGD(params=model.parameters(), \n                             lr=0.1)\nä¸‡äº‹ä¿±å¤‡ï¼Œæˆ‘ä»¬å°±å¯ä»¥å¼€å§‹è®­ç»ƒäº†ï¼Œæœ‰äº†å‰é¢è®­ç»ƒæ­¥éª¤å’Œæµ‹è¯•æ­¥éª¤ä¸¤ä¸ªå‡½æ•°ï¼Œå°±æ˜¯æŠŠè¿™äº›æ¨¡å‹ã€æŸå¤±å‡½æ•°ã€å‡†ç¡®ç‡å‡½æ•°å’Œä¼˜åŒ–å™¨ç»™ä¼ è¿›å»å°±å¯ä»¥äº†ã€‚æ¢ä¸€ä¸ªæ¨¡å‹å’Œç›¸åº”çš„è¿™äº›å‡½æ•°ï¼Œå†ä¼ è¿›å»ï¼Œå°±å˜æˆäº†è®­ç»ƒå¦ä¸€ä¸ªæ¨¡å‹ã€‚\nfrom timeit import default_timer as timer \n \nstart_time = timer()\n \nepochs = 3\nfor epoch in range(epochs):\n    print(f&quot;Epoch: {epoch}\\n---&quot;)\n    \n    train_step(model=model, \n               data_loader=train_dl, \n               loss_fn=loss_fn, \n               optimizer=optimizer,\n               acc_fn=acc_fn)\n \n    test_step(model=model, \n              data_loader=valid_dl,\n              loss_fn=loss_fn,\n              acc_fn=acc_fn)\n \nend_time = timer()\n\nå‡†ç¡®ç‡è¾¾åˆ°äº†98%ï¼Œ6ä¸‡å¼ å›¾ç‰‡è¿‡äº†3éï¼Œåªç”¨äº†17ç§’ã€‚\nè¯„ä¼°\ny_preds = []\nmodel.eval()\nwith torch.inference_mode():\n  for X, y in valid_dl:\n    X, y = X.to(device), y.to(device)\n    y_logit = model(X)\n    y_pred = torch.softmax(y_logit, dim=1).argmax(dim=1)\n    y_preds.append(y_pred.cpu())\n    \ny_pred_tensor = torch.cat(y_preds)\næŠŠéªŒè¯æ•°æ®é›†ä¼ ç»™æ¨¡å‹ï¼ŒæŠŠé¢„æµ‹çš„ç»“æœæ‹¿åˆ°ã€‚æˆ‘ä»¬å°±å¯ä»¥ç”¨å‰é¢å®šä¹‰çš„acc_fnæ¥ç®—ä¸€ä¸‹å‡†ç¡®ç‡ã€‚\n\nå’Œå‰é¢é‚£ä¸ªæµ‹è¯•æ­¥éª¤æœ€åçš„å‡†ç¡®ç‡æ˜¯ä¸€æ ·çš„ï¼Œå› ä¸ºæˆ‘ä»¬è¿™é‡Œç”¨çš„åŒä¸€ä¸ªæ•°æ®é›†ï¼Œä¹Ÿå°±æ˜¯è¯´è¿™ä¸ªæ•°æ®é›†ï¼Œæ—¢æ‹¿æ¥æµ‹è¯•ï¼Œåˆæ‹¿æ¥éªŒè¯ã€‚ä¸€èˆ¬æƒ…å†µä¸‹ï¼Œæˆ‘ä»¬å¯ä»¥æŠŠæ•°æ®åˆ†æˆ3ä¸ªæ•°æ®é›†ï¼Œä¸€ä¸ªè®­ç»ƒï¼Œä¸€ä¸ªéªŒè¯ï¼Œä¸€ä¸ªæµ‹è¯•ã€‚å› ä¸ºè¿™ä¸ªä¸‹è½½çš„MNISTæ•°æ®ï¼Œæœ¬èº«å°±æ˜¯åˆ†ä¸¤å—çš„ï¼Œæ‡’å¾—å†å»åˆ‡åˆ†å®ƒï¼Œå°±å…ˆè¿™æ ·ç”¨äº†ã€‚\nå•çº¯ä¸€ä¸ªå‡†ç¡®ç‡ï¼Œæ˜¯ä¸æ¸…æ¥šé‚£äº›åˆ†ç±»åšå¾—ä¸å¥½çš„ï¼Œæˆ‘ä»¬å¯ä»¥ç”¨æ··æ·†çŸ©é˜µæ¥çœ‹ä¸€ä¸‹ã€‚\nfrom torchmetrics import ConfusionMatrix\nconfmat = ConfusionMatrix(num_classes=10, task=&#039;multiclass&#039;)\nconfmat_tensor = confmat(preds=y_pred_tensor, target=y_valid)\nè¿™ä¸ªä»£ç å°±è®¡ç®—å‡ºäº†æ··æ·†çŸ©é˜µï¼Œæˆ‘ä»¬å†ç”»ä¸ªå›¾æ¥çœ‹ï¼š\nfrom mlxtend.plotting import plot_confusion_matrix\n \nfig, ax = plot_confusion_matrix(\n    conf_mat = confmat_tensor.numpy(),\n    class_names = range(10)\n)\n"},"æœºå™¨å­¦ä¹ ä¸ç»Ÿè®¡æ–¹æ³•/æ·±åº¦å­¦ä¹ /åŸºå› ç»„å­¦æ·±åº¦å­¦ä¹ å…¥é—¨æŒ‡å—":{"slug":"æœºå™¨å­¦ä¹ ä¸ç»Ÿè®¡æ–¹æ³•/æ·±åº¦å­¦ä¹ /åŸºå› ç»„å­¦æ·±åº¦å­¦ä¹ å…¥é—¨æŒ‡å—","filePath":"æœºå™¨å­¦ä¹ ä¸ç»Ÿè®¡æ–¹æ³•/æ·±åº¦å­¦ä¹ /åŸºå› ç»„å­¦æ·±åº¦å­¦ä¹ å…¥é—¨æŒ‡å—.md","title":"åŸºå› ç»„å­¦æ·±åº¦å­¦ä¹ å…¥é—¨æŒ‡å—-è½¬å½•å› å­ç»“åˆä½ç‚¹è¯†åˆ«","links":["[nature.com/articles/s41588-018-0295-5](https:/www.nature.com/articles/s41588-018-0295-5)"],"tags":["CNN","Pytorch","Genomics","DeepLearning","Classification"],"content":"è¿™ä»½æ•™ç¨‹æ˜¯åŸºäº Nature Genetics, 2018 çš„è®ºæ–‡ â€œA Primer on Deep Learning in Genomicsâ€ çš„è¡¥å……ææ–™ç¼–å†™çš„ã€‚æˆ‘ä»¬å°†ä¸€æ­¥æ­¥çœ‹å¦‚ä½•åˆ©ç”¨æ·±åº¦å­¦ä¹ æ¥è§£å†³åŸºå› ç»„å­¦ä¸­çš„ä¸€ä¸ªç»å…¸é—®é¢˜ï¼šå‘ç°DNAä¸­çš„è½¬å½•å› å­ç»“åˆä½ç‚¹ã€‚\nè™½ç„¶åŸæ•™ç¨‹ä½¿ç”¨çš„æ˜¯ Keras/TensorFlowï¼Œä½†ä¸ºäº†é€‚åº”ç°ä»£æ·±åº¦å­¦ä¹ çš„è¶‹åŠ¿ï¼Œè¿™é‡Œä½¿ç”¨ PyTorch æ¡†æ¶è¿›è¡Œé‡å†™å’Œè®²è§£ã€‚\n\n0. èƒŒæ™¯çŸ¥è¯†\nä»€ä¹ˆæ˜¯è½¬å½•å› å­ç»“åˆä½ç‚¹ï¼Ÿ\nåœ¨ç”Ÿç‰©å­¦ä¸­ï¼Œè½¬å½•å› å­ï¼ˆTranscription Factor, TFï¼‰æ˜¯ä¸€ç§è›‹ç™½è´¨ï¼Œå®ƒä»¬èƒ½å¤Ÿç»“åˆåˆ°DNAçš„ç‰¹å®šåŒºåŸŸï¼Œä»è€Œæ§åˆ¶åŸºå› çš„è¡¨è¾¾ï¼ˆå³åŸºå› æ˜¯å¦è¢«â€œå¼€å¯â€æˆ–â€œå…³é—­â€ï¼‰ã€‚è¿™äº›ç‰¹å®šçš„DNAåŒºåŸŸè¢«ç§°ä¸ºè½¬å½•å› å­ç»“åˆä½ç‚¹ï¼ˆBinding Sitesï¼‰ã€‚\næˆ‘ä»¬çš„ä»»åŠ¡\næˆ‘ä»¬å¸Œæœ›è®­ç»ƒä¸€ä¸ªç¥ç»ç½‘ç»œæ¨¡å‹ï¼Œè®©å®ƒé€šè¿‡è§‚å¯Ÿä¸€æ®µDNAåºåˆ—ï¼Œè‡ªåŠ¨åˆ¤æ–­è¿™æ®µåºåˆ—æ˜¯å¦åŒ…å«æŸä¸ªç‰¹å®šçš„è½¬å½•å› å­ç»“åˆä½ç‚¹ã€‚\n\nè¾“å…¥ (Input): ä¸€æ®µé•¿åº¦ä¸º 50 ä¸ªç¢±åŸºå¯¹ (bp) çš„ DNA åºåˆ—ï¼ˆç”± A, C, G, T ç»„æˆï¼‰ã€‚\nè¾“å‡º (Output): ä¸€ä¸ªäºŒåˆ†ç±»æ ‡ç­¾ï¼ˆ0 æˆ– 1ï¼‰ã€‚\n\n1: è¡¨ç¤ºè¯¥åºåˆ—ä¸è›‹ç™½ç»“åˆï¼ˆåŒ…å«ç»“åˆä½ç‚¹ï¼‰ã€‚\n0: è¡¨ç¤ºè¯¥åºåˆ—ä¸ä¸è›‹ç™½ç»“åˆï¼ˆä¸å«ç»“åˆä½ç‚¹ï¼‰ã€‚\n\n\n\næ•°æ®é›†\nä¸ºäº†æ–¹ä¾¿å­¦ä¹ ï¼Œæˆ‘ä»¬å°†ä½¿ç”¨ä¸€ä¸ªæ¨¡æ‹Ÿæ•°æ®é›†ã€‚\n\næ¯ä¸ªåºåˆ—é•¿åº¦å›ºå®šä¸º 50ã€‚\nå®é™…ä¸Šï¼ŒåŒ…å«ç»“åˆä½ç‚¹çš„åºåˆ—é‡Œè—ç€ä¸€ä¸ªç‰¹å®šçš„æ¨¡å¼ï¼ˆMotifï¼‰ï¼šCGACCGAACTCCã€‚\næˆ‘ä»¬çš„ç¥ç»ç½‘ç»œåœ¨è®­ç»ƒå‰å¹¶ä¸çŸ¥é“è¿™ä¸ª Motif æ˜¯ä»€ä¹ˆï¼Œå®ƒéœ€è¦è‡ªå·±å»â€œå­¦ä¹ â€å¹¶å‘ç°è¿™ä¸ªè§„å¾‹ã€‚\n\n\n1. ç¯å¢ƒå‡†å¤‡\né¦–å…ˆï¼Œæˆ‘ä»¬éœ€è¦å¯¼å…¥å¿…è¦çš„ Python åº“ã€‚æˆ‘ä»¬å°†ä½¿ç”¨ numpy å’Œ pandas å¤„ç†æ•°æ®ï¼Œä½¿ç”¨ sklearn è¿›è¡Œæ•°æ®é¢„å¤„ç†ï¼Œä½¿ç”¨ torch æ„å»ºå’Œè®­ç»ƒæ¨¡å‹ã€‚\nimport numpy as np\nimport pandas as pd\nimport requests\nimport matplotlib.pyplot as plt\nfrom sklearn.preprocessing import LabelEncoder, OneHotEncoder\nfrom sklearn.model_selection import train_test_split\nfrom sklearn.metrics import confusion_matrix, accuracy_score\n \nimport torch\nimport torch.nn as nn\nimport torch.optim as optim\nfrom torch.utils.data import DataLoader, TensorDataset\nimport torch.nn.functional as F\n \n# è®¾ç½®éšæœºç§å­ï¼Œä¿è¯ç»“æœå¯å¤ç°\ntorch.manual_seed(42)\nnp.random.seed(42)\n\n2. æ•°æ®å‡†å¤‡ä¸é¢„å¤„ç† (Data Curation)\n2.1 åŠ è½½æ•°æ®\næ•°æ®æ‰˜ç®¡åœ¨ GitHub ä¸Šï¼Œæˆ‘ä»¬å¯ä»¥ç›´æ¥é€šè¿‡ URL è¯»å–ã€‚\n# å®šä¹‰æ•°æ® URL\nSEQUENCES_URL = &#039;raw.githubusercontent.com/abidlabs/deep-learning-genomics-primer/master/sequences.txt&#039;\nLABELS_URL = &#039;raw.githubusercontent.com/abidlabs/deep-learning-genomics-primer/master/labels.txt&#039;\n \n# åŠ è½½åºåˆ—æ•°æ®\nprint(&quot;æ­£åœ¨ä¸‹è½½åºåˆ—æ•°æ®...&quot;)\nsequences = requests.get(SEQUENCES_URL).text.split(&#039;\\n&#039;)\nsequences = list(filter(None, sequences))  # ç§»é™¤å¯èƒ½çš„ç©ºè¡Œ\n \n# åŠ è½½æ ‡ç­¾æ•°æ®\nprint(&quot;æ­£åœ¨ä¸‹è½½æ ‡ç­¾æ•°æ®...&quot;)\nlabels = requests.get(LABELS_URL).text.split(&#039;\\n&#039;)\nlabels = list(filter(None, labels))  # ç§»é™¤å¯èƒ½çš„ç©ºè¡Œ\n \n# æŸ¥çœ‹ä¸€ä¸‹æ•°æ®é‡\nprint(f&quot;æ€»å…±æœ‰ {len(sequences)} æ¡åºåˆ—ï¼Œ{len(labels)} ä¸ªæ ‡ç­¾ã€‚&quot;)\n \n# æŸ¥çœ‹ç¬¬ä¸€æ¡æ•°æ®ç¤ºä¾‹\nprint(f&quot;ç¤ºä¾‹åºåˆ—: {sequences[0]}&quot;)\nprint(f&quot;ç¤ºä¾‹æ ‡ç­¾: {labels[0]}&quot;)\n \n# æ­£åœ¨ä¸‹è½½åºåˆ—æ•°æ®... \n# æ­£åœ¨ä¸‹è½½æ ‡ç­¾æ•°æ®... \n# æ€»å…±æœ‰ 2000 æ¡åºåˆ—ï¼Œ2000 ä¸ªæ ‡ç­¾ã€‚ \n# ç¤ºä¾‹åºåˆ—: CCGAGGGCTATGGTTTGGAAGTTAGAACCCTGGGGCTTCTCGCGGACACC \n# ç¤ºä¾‹æ ‡ç­¾: 0\n2.2 One-Hot ç¼–ç  (ç‹¬çƒ­ç¼–ç )\nç¥ç»ç½‘ç»œæ— æ³•ç›´æ¥ç†è§£ â€œACGTâ€ è¿™æ ·çš„å­—ç¬¦ã€‚æˆ‘ä»¬éœ€è¦å°† DNA åºåˆ—è½¬åŒ–ä¸ºæ•°å­—çŸ©é˜µã€‚æœ€å¸¸ç”¨çš„æ–¹æ³•æ˜¯ One-Hot Encodingã€‚\nå¯¹äº DNA çš„ 4 ä¸ªç¢±åŸºï¼Œæˆ‘ä»¬å¯ä»¥è¿™æ ·è¡¨ç¤ºï¼š\n\nA: [1, 0, 0, 0]\nC: [0, 1, 0, 0]\nG: [0, 0, 1, 0]\nT: [0, 0, 0, 1]\n\nå¦‚æœä¸€æ®µåºåˆ—é•¿åº¦ä¸º L (è¿™é‡Œæ˜¯ 50)ï¼Œé‚£ä¹ˆå®ƒå°±ä¼šå˜æˆä¸€ä¸ª L \\times 4 çš„çŸ©é˜µã€‚\n# 1. LabelEncoder: å°†å­—ç¬¦ (A, C, G, T) è½¬æ¢ä¸ºæ•´æ•° (0, 1, 2, 3)\ninteger_encoder = LabelEncoder()\n# 2. OneHotEncoder: å°†æ•´æ•°è½¬æ¢ä¸º One-Hot å‘é‡\none_hot_encoder = OneHotEncoder(categories=&#039;auto&#039;)\n \ninput_features = []\n \nprint(&quot;æ­£åœ¨è¿›è¡Œ One-Hot ç¼–ç ...&quot;)\nfor sequence in sequences:\n    # å°†å­—ç¬¦ä¸²è½¬ä¸ºæ•´æ•°åˆ—è¡¨\n    integer_encoded = integer_encoder.fit_transform(list(sequence))\n    integer_encoded = np.array(integer_encoded).reshape(-1, 1)\n    \n    # å°†æ•´æ•°è½¬ä¸º One-Hot çŸ©é˜µ\n    one_hot_encoded = one_hot_encoder.fit_transform(integer_encoded)\n    input_features.append(one_hot_encoded.toarray())\n \n# å †å æˆä¸€ä¸ªå¤§çš„ numpy æ•°ç»„\n# æœ€ç»ˆå½¢çŠ¶åº”è¯¥æ˜¯ (æ ·æœ¬æ•°, åºåˆ—é•¿åº¦, 4)\ninput_features = np.stack(input_features)\n \nprint(f&quot;è¾“å…¥ç‰¹å¾çš„å½¢çŠ¶: {input_features.shape}&quot;)\n \n# æ­£åœ¨è¿›è¡Œ One-Hot ç¼–ç ... \n# è¾“å…¥ç‰¹å¾çš„å½¢çŠ¶: (2000, 50, 4)\nåŒæ ·åœ°ï¼Œæˆ‘ä»¬ä¹Ÿéœ€è¦å¤„ç†æ ‡ç­¾ã€‚è™½ç„¶æ ‡ç­¾å·²ç»æ˜¯ 0 å’Œ 1ï¼Œä½†ä¸ºäº†è§„èŒƒï¼Œæˆ‘ä»¬ä¹Ÿå¯ä»¥å°†å…¶è½¬åŒ–ä¸º numpy æ•°ç»„ã€‚\nlabels = np.array(labels).astype(np.float32).reshape(-1, 1)\nprint(f&quot;æ ‡ç­¾å½¢çŠ¶: {labels.shape}&quot;)\n# æ ‡ç­¾å½¢çŠ¶: (2000, 1)\n2.3 åˆ’åˆ†æ•°æ®é›†\næˆ‘ä»¬å°†æ•°æ®åˆ†ä¸º è®­ç»ƒé›† (Training Set) å’Œ æµ‹è¯•é›† (Test Set)ã€‚è®­ç»ƒé›†ç”¨äºè®­ç»ƒæ¨¡å‹ï¼Œæµ‹è¯•é›†ç”¨äºè¯„ä¼°æ¨¡å‹åœ¨æœªè§è¿‡çš„æ•°æ®ä¸Šçš„è¡¨ç°ã€‚\n# åˆ’åˆ†æ¯”ä¾‹ï¼š75% è®­ç»ƒï¼Œ25% æµ‹è¯•\nX_train, X_test, y_train, y_test = train_test_split(\n    input_features, labels, test_size=0.25, random_state=42\n)\n \nprint(f&quot;è®­ç»ƒé›†å¤§å°: {X_train.shape}&quot;)\nprint(f&quot;æµ‹è¯•é›†å¤§å°: {X_test.shape}&quot;)\n# è®­ç»ƒé›†å¤§å°: (1500, 50, 4) \n# æµ‹è¯•é›†å¤§å°: (500, 50, 4)\n2.4 è½¬æ¢ä¸º PyTorch Tensor\nPyTorch éœ€è¦ç‰¹å®šçš„æ•°æ®æ ¼å¼ï¼š\n\næ•°æ®ç±»å‹: é€šå¸¸ä½¿ç”¨ float32ã€‚\nç»´åº¦é¡ºåº: PyTorch çš„ä¸€ç»´å·ç§¯å±‚ (Conv1d) è¦æ±‚çš„è¾“å…¥å½¢çŠ¶æ˜¯ (Batch_Size, Channels, Length)ã€‚\n\næˆ‘ä»¬è¦æŠŠ (N, 50, 4) è½¬æ¢ä¸º (N, 4, 50)ã€‚è¿™å¾ˆé‡è¦ï¼\n\n\n\n\n# è½¬æ¢ä¸º Tensor å¹¶è°ƒæ•´ç»´åº¦ (Permute)\nX_train_t = torch.tensor(X_train, dtype=torch.float32).permute(0, 2, 1)\nX_test_t = torch.tensor(X_test, dtype=torch.float32).permute(0, 2, 1)\n\ny_train_t = torch.tensor(y_train, dtype=torch.float32)\ny_test_t = torch.tensor(y_test, dtype=torch.float32)\n\n# åˆ›å»º DataLoaderï¼Œç”¨äºæ‰¹é‡åŠ è½½æ•°æ®\ntrain_dataset = TensorDataset(X_train_t, y_train_t)\ntest_dataset = TensorDataset(X_test_t, y_test_t)\n\n# æ‰¹é‡å¤§å° (Batch Size) è®¾ä¸º 32\ntrain_loader = DataLoader(train_dataset, batch_size=32, shuffle=True)\ntest_loader = DataLoader(test_dataset, batch_size=32, shuffle=False)\n\nprint(&quot;æ•°æ®å‡†å¤‡å®Œæˆï¼&quot;)\n\n\n3. æ„å»ºæ¨¡å‹ (Model Architecture)\næˆ‘ä»¬å°†æ„å»ºä¸€ä¸ªç®€å•çš„ä¸€ç»´å·ç§¯ç¥ç»ç½‘ç»œ (1D CNN)ã€‚è¿™åœ¨åŸºå› ç»„å­¦ä¸­éå¸¸å¸¸ç”¨ï¼Œå› ä¸ºå·ç§¯æ ¸ (Kernel/Filter) å¯ä»¥è¢«çœ‹ä½œæ˜¯ç”¨æ¥æ‰«æ DNA åºåˆ—çš„â€œæ¢é’ˆâ€ï¼Œä¸“é—¨å¯»æ‰¾ç‰¹å®šçš„ Motifã€‚\næ¨¡å‹ç»“æ„è®¾è®¡\n\nConv1d å±‚:\n\nFilters (å·ç§¯æ ¸æ•°é‡): 32ã€‚è¿™æ„å‘³ç€æˆ‘ä»¬è®­ç»ƒ 32 ä¸ªä¸åŒçš„â€œæ¢é’ˆâ€æ¥å¯»æ‰¾ç‰¹å¾ã€‚\nKernel Size (å·ç§¯æ ¸å¤§å°): 12ã€‚æ¯ä¸ªæ¢é’ˆé•¿åº¦ä¸º 12 ä¸ªç¢±åŸºï¼ˆå¯¹åº”æˆ‘ä»¬è¦æ‰¾çš„ Motif é•¿åº¦çº¦ä¸º 12ï¼‰ã€‚\nInput Channels: 4 (å¯¹åº” A, C, G, T)ã€‚\n\n\nReLU æ¿€æ´»å‡½æ•°: å¼•å…¥éçº¿æ€§ã€‚\nMaxPool1d å±‚: æ± åŒ–å±‚ã€‚\n\nKernel Size: 4ã€‚å¯¹æ¯ 4 ä¸ªä½ç½®å–æœ€å¤§å€¼ï¼Œå‡å°‘æ•°æ®ç»´åº¦ï¼Œä¿ç•™æœ€æ˜¾è‘—çš„ç‰¹å¾ã€‚\n\n\nFlatten å±‚: å°†å¤šç»´ç‰¹å¾å±•å¹³ä¸ºä¸€ç»´å‘é‡ã€‚\nLinear (å…¨è¿æ¥) å±‚ 1: éšè—å±‚ï¼Œ16 ä¸ªç¥ç»å…ƒã€‚\nLinear (å…¨è¿æ¥) å±‚ 2: è¾“å‡ºå±‚ï¼Œ1 ä¸ªç¥ç»å…ƒï¼ˆè¾“å‡ºå±äºæ­£ç±»çš„æ¦‚ç‡ï¼Œé…åˆ Sigmoidï¼‰ã€‚\n\næ³¨æ„ï¼šåŸ Keras ä»£ç ä½¿ç”¨çš„æ˜¯ Softmax è¾“å‡º 2 ä¸ªå€¼ï¼ŒPyTorch ä¸­æˆ‘ä»¬å¯ä»¥ç®€åŒ–ä¸ºè¾“å‡º 1 ä¸ªå€¼å¹¶ä½¿ç”¨ Sigmoidï¼Œæˆ–è€…è¾“å‡º 2 ä¸ªå€¼ä½¿ç”¨ CrossEntropyã€‚è¿™é‡Œæˆ‘ä»¬é‡‡ç”¨è¾“å‡º 1 ä¸ªå€¼ + BCELoss (äºŒå…ƒäº¤å‰ç†µæŸå¤±) çš„æ–¹å¼ï¼Œè¿™æ›´ç¬¦åˆäºŒåˆ†ç±»é—®é¢˜çš„ç›´è§‰ã€‚\nclass GenomicsCNN(nn.Module):\n    def __init__(self):\n        super(GenomicsCNN, self).__init__()\n        \n        # 1. ä¸€ç»´å·ç§¯å±‚\n        # in_channels=4 (A,C,G,T)\n        # out_channels=32 (æˆ‘ä»¬è¦å­¦ä¹ 32ç§ç‰¹å¾)\n        # kernel_size=12 (æ¯æ¬¡çœ‹12ä¸ªç¢±åŸºçš„çª—å£)\n        self.conv1 = nn.Conv1d(in_channels=4, out_channels=32, kernel_size=12)\n        \n        # 2. æœ€å¤§æ± åŒ–å±‚\n        self.pool = nn.MaxPool1d(kernel_size=4)\n        \n        # 3. å±•å¹³å±‚\n        self.flatten = nn.Flatten()\n        \n        # 4. è®¡ç®— Flatten åçš„ç»´åº¦\n        # è¾“å…¥é•¿åº¦ L_in = 50\n        # Conv1d åé•¿åº¦ L_out = L_in - kernel_size + 1 = 50 - 12 + 1 = 39\n        # MaxPool åé•¿åº¦ L_out = floor(39 / 4) = 9\n        # æ‰€ä»¥å±•å¹³åçš„ç»´åº¦æ˜¯ 32 (channels) * 9 (length) = 288\n        self.flatten_dim = 32 * 9\n        \n        # 5. å…¨è¿æ¥å±‚\n        self.fc1 = nn.Linear(self.flatten_dim, 16)\n        self.fc2 = nn.Linear(16, 1) # è¾“å‡ºä¸€ä¸ªåˆ†æ•°\n \n    def forward(self, x):\n        # x shape: [Batch, 4, 50]\n        \n        # å·ç§¯ + ReLU\n        x = self.conv1(x)       # -&gt; [Batch, 32, 39]\n        x = F.relu(x)\n        \n        # æ± åŒ–\n        x = self.pool(x)        # -&gt; [Batch, 32, 9]\n        \n        # å±•å¹³\n        # x = x.view(x.size(0), -1) # -&gt; [Batch, 288]\n        x = self.flatten(x)\n \n        # å…¨è¿æ¥å±‚ 1\n        x = self.fc1(x)\n        x = F.relu(x)\n        \n        # è¾“å‡ºå±‚ (è¿™é‡Œä¸åŠ  Sigmoidï¼Œå› ä¸ºæˆ‘ä»¬åœ¨ Loss å‡½æ•°ä¸­ä¼šç”¨ BCEWithLogitsLossï¼Œå®ƒåŒ…å«äº† Sigmoidï¼Œæ•°å€¼æ›´ç¨³å®š)\n        x = self.fc2(x)\n        \n        return x\n \n# å®ä¾‹åŒ–æ¨¡å‹\nmodel = GenomicsCNN()\nprint(model)\nGenomicsCNN( (conv1): Conv1d(4, 32, kernel_size=(12,), stride=(1,)) (pool): MaxPool1d(kernel_size=4, stride=4, padding=0, dilation=1, ceil_mode=False) (flatten): Flatten(start_dim=1, end_dim=-1) (fc1): Linear(in_features=288, out_features=16, bias=True) (fc2): Linear(in_features=16, out_features=1, bias=True) )\n\n\n4. è®­ç»ƒæ¨¡å‹ (Training)\n4.1 å®šä¹‰æŸå¤±å‡½æ•°å’Œä¼˜åŒ–å™¨\n\nLoss Function: BCEWithLogitsLossã€‚è¿™æ˜¯å¤„ç†äºŒåˆ†ç±»é—®é¢˜çš„æ ‡å‡†æŸå¤±å‡½æ•°ï¼Œå®ƒç»“åˆäº† Sigmoid æ¿€æ´»å’Œ Binary Cross Entropy æŸå¤±ã€‚\nOptimizer: Adamã€‚ä¸€ç§è‡ªé€‚åº”å­¦ä¹ ç‡çš„ä¼˜åŒ–ç®—æ³•ï¼Œæ”¶æ•›é€Ÿåº¦å¿«ã€‚\n\ncriterion = nn.BCEWithLogitsLoss()\noptimizer = optim.Adam(model.parameters(), lr=0.001)\n4.2 è®­ç»ƒå¾ªç¯\næˆ‘ä»¬å°†éå†æ•°æ®é›†å¤šæ¬¡ï¼ˆEpochsï¼‰ï¼Œæ¯æ¬¡é€šè¿‡å‰å‘ä¼ æ’­è®¡ç®—é¢„æµ‹å€¼ï¼Œè®¡ç®—æŸå¤±ï¼Œç„¶åé€šè¿‡åå‘ä¼ æ’­æ›´æ–°æ¨¡å‹å‚æ•°ã€‚\nepochs = 50\ntrain_losses = []\n \nprint(&quot;å¼€å§‹è®­ç»ƒ...&quot;)\nfor epoch in range(epochs):\n    model.train() # è®¾ç½®ä¸ºè®­ç»ƒæ¨¡å¼\n    running_loss = 0.0\n    \n    for inputs, labels in train_loader:\n        # 1. æ¸…ç©ºæ¢¯åº¦\n        optimizer.zero_grad()\n        \n        # 2. å‰å‘ä¼ æ’­\n        outputs = model(inputs)\n        \n        # 3. è®¡ç®—æŸå¤±\n        loss = criterion(outputs, labels)\n        \n        # 4. åå‘ä¼ æ’­ä¸å‚æ•°æ›´æ–°\n        loss.backward()\n        optimizer.step()\n        \n        running_loss += loss.item()\n    \n    # è®¡ç®—å¹³å‡æŸå¤±\n    avg_loss = running_loss / len(train_loader)\n    train_losses.append(avg_loss)\n    \n    if (epoch + 1) % 5 == 0:\n        print(f&quot;Epoch [{epoch+1}/{epochs}], Loss: {avg_loss:.4f}&quot;)\nå¼€å§‹è®­ç»ƒ...\nEpoch [5/50], Loss: 0.1314\nEpoch [10/50], Loss: 0.0297\nEpoch [15/50], Loss: 0.0097\nEpoch [20/50], Loss: 0.0043\nEpoch [25/50], Loss: 0.0023\nEpoch [30/50], Loss: 0.0014\nEpoch [35/50], Loss: 0.0009\nEpoch [40/50], Loss: 0.0007\nEpoch [45/50], Loss: 0.0005\nEpoch [50/50], Loss: 0.0004\n# ç»˜åˆ¶æŸå¤±æ›²çº¿\nplt.figure(figsize=(10, 5))\nplt.plot(train_losses, label=&#039;Training Loss&#039;)\nplt.title(&#039;Training Loss over Epochs&#039;)\nplt.xlabel(&#039;Epoch&#039;)\nplt.ylabel(&#039;Loss&#039;)\nplt.legend()\nplt.show()\n\n5. æ¨¡å‹è¯„ä¼° (Evaluation)\nè®­ç»ƒå®Œæˆåï¼Œæˆ‘ä»¬éœ€è¦åœ¨æµ‹è¯•é›†ä¸Šè¯„ä¼°æ¨¡å‹çš„æ€§èƒ½ã€‚\nmodel.eval() # è®¾ç½®ä¸ºè¯„ä¼°æ¨¡å¼\nall_preds = []\nall_labels = []\n \nprint(&quot;æ­£åœ¨è¯„ä¼°...&quot;)\nwith torch.no_grad(): # ä¸è®¡ç®—æ¢¯åº¦ï¼ŒèŠ‚çœå†…å­˜\n    for inputs, labels in test_loader:\n        outputs = model(inputs)\n        # å°†è¾“å‡º logits è½¬æ¢ä¸ºæ¦‚ç‡ (Sigmoid)\n        probs = torch.sigmoid(outputs)\n        # å°†æ¦‚ç‡è½¬æ¢ä¸º 0 æˆ– 1 çš„é¢„æµ‹ (é˜ˆå€¼ 0.5)\n        preds = (probs &gt; 0.5).float()\n        \n        all_preds.extend(preds.numpy())\n        all_labels.extend(labels.numpy())\n \n# è®¡ç®—å‡†ç¡®ç‡\naccuracy = accuracy_score(all_labels, all_preds)\nprint(f&quot;æµ‹è¯•é›†å‡†ç¡®ç‡ (Accuracy): {accuracy:.4f}&quot;)\n \n# æ··æ·†çŸ©é˜µ\ncm = confusion_matrix(all_labels, all_preds)\nprint(&quot;æ··æ·†çŸ©é˜µ (Confusion Matrix):&quot;)\nprint(cm)\n \n# æ­£åœ¨è¯„ä¼°...\n# æµ‹è¯•é›†å‡†ç¡®ç‡ (Accuracy): 1.0000\n# æ··æ·†çŸ©é˜µ (Confusion Matrix):\n# [[259   0]\n#  [  0 241]]\nå‡†ç¡®ç‡æ˜¯ 1.0 (100%)ï¼Œè¯´æ˜æˆ‘ä»¬çš„æ¨¡å‹éå¸¸å®Œç¾åœ°å­¦ä¼šäº†è¯†åˆ«é‚£ä¸ªéšè—çš„ Motifï¼\n\n6. æ€»ç»“ä¸ä¸‹ä¸€æ­¥\nè‡³æ­¤ï¼Œæˆ‘ä»¬å·²ç»æˆåŠŸæ„å»ºå¹¶è®­ç»ƒäº†ä¸€ä¸ªåŸºäº PyTorch çš„æ·±åº¦å­¦ä¹ æ¨¡å‹ï¼Œç”¨äºè¯†åˆ« DNA åºåˆ—ä¸­çš„åŠŸèƒ½æ€§ä½ç‚¹ã€‚\nä¸»è¦æ­¥éª¤å›é¡¾ï¼š\n\næ•°æ®å¤„ç†: å°† ACGT åºåˆ—è½¬æ¢ä¸º One-Hot çŸ©é˜µã€‚\nç»´åº¦è°ƒæ•´: ç¡®ä¿è¾“å…¥ç¬¦åˆ PyTorch Conv1d çš„ (N, C, L) æ ¼å¼ã€‚\næ¨¡å‹æ„å»º: ä½¿ç”¨ Conv1d æå–å±€éƒ¨ç‰¹å¾ (Motifs)ã€‚\nè®­ç»ƒ: ä½¿ç”¨äºŒå…ƒäº¤å‰ç†µæŸå¤±å‡½æ•°è¿›è¡Œä¼˜åŒ–ã€‚\n\nè¿›é˜¶æ€è€ƒï¼š\n\nå¯è§£é‡Šæ€§ (Interpretation): æˆ‘ä»¬å¦‚ä½•çŸ¥é“æ¨¡å‹åˆ°åº•å­¦åˆ°äº†ä»€ä¹ˆï¼Ÿæˆ‘ä»¬å¯ä»¥é€šè¿‡åˆ†æç¬¬ä¸€å±‚å·ç§¯æ ¸çš„æƒé‡ï¼Œçœ‹çœ‹å®ƒä»¬æœ€å–œæ¬¢æ¿€æ´»ä»€ä¹ˆæ ·çš„ DNA åºåˆ—ï¼Œä»è€Œåæ¨å‡ºæ¨¡å‹å­¦åˆ°çš„ Motif æ˜¯å¦å°±æ˜¯çœŸå®çš„ CGACCGAACTCCã€‚è¿™æ˜¯è®¡ç®—ç”Ÿç‰©å­¦ä¸­éå¸¸é‡è¦çš„ä¸€æ­¥ï¼ˆé€šå¸¸ç§°ä¸º Motif Discoveryï¼‰ã€‚\n\n7. å¯è§£é‡Šæ€§ï¼šæ‰“å¼€é»‘ç›’å­ (Interpretation)\nç¥ç»ç½‘ç»œé€šå¸¸è¢«è®¤ä¸ºæ˜¯â€œé»‘ç›’å­â€ï¼Œä½†å¯¹äº CNNï¼Œæˆ‘ä»¬å¯ä»¥é€šè¿‡å¯è§†åŒ–å·ç§¯æ ¸çš„æƒé‡æ¥ç†è§£å®ƒå­¦åˆ°äº†ä»€ä¹ˆã€‚\næˆ‘ä»¬çš„æ¨¡å‹ç¬¬ä¸€å±‚æœ‰ 32 ä¸ªå·ç§¯æ ¸ï¼ˆFiltersï¼‰ï¼Œæ¯ä¸ªå¤§å°ä¸º 12ã€‚è¿™ 32 ä¸ªå·ç§¯æ ¸å°±åƒ 32 ä¸ªâ€œæ¢é’ˆâ€ï¼Œæ¯ä¸ªæ¢é’ˆéƒ½åœ¨å¯»æ‰¾ä¸€ç§ç‰¹å®šçš„ DNA åºåˆ—æ¨¡å¼ï¼ˆMotifï¼‰ã€‚\nå¦‚æœä¸€ä¸ª Filter çš„æƒé‡åœ¨æŸä¸ªä½ç½®å¯¹ â€œAâ€ çš„å€¼ç‰¹åˆ«é«˜ï¼Œè¯´æ˜å®ƒå¾ˆå¸Œæœ›åœ¨è¯¥ä½ç½®çœ‹åˆ° â€œAâ€ã€‚\næˆ‘ä»¬å¯ä»¥ç¼–å†™ä¸€ä¸ªç®€å•çš„è„šæœ¬ interpret_pytorch.py æ¥å¯è§†åŒ–è¿™äº›æƒé‡ï¼š\nimport matplotlib.pyplot as plt\n \ndef plot_filters(model):\n    # 1. è·å–ç¬¬ä¸€å±‚å·ç§¯å±‚çš„æƒé‡\n    # shape: [32, 4, 12] -&gt; [Filters, Channels, Length]\n    weights = model.conv1.weight.detach().cpu().numpy()\n    \n    # æˆ‘ä»¬åªé€‰å‰ 4 ä¸ª Filter æ¥å±•ç¤º\n    fig, axes = plt.subplots(4, 1, figsize=(10, 8))\n    \n    for i in range(4):\n        # è·å–ç¬¬ i ä¸ª Filter çš„æƒé‡\n        w = weights[i]\n        \n        # ç»˜åˆ¶çƒ­å›¾ (Heatmap)\n        ax = axes[i]\n        # cmap=&#039;viridis&#039; æ˜¯ä¸€ç§å¸¸ç”¨çš„é¢œè‰²æ˜ å°„ï¼Œé»„è‰²ä»£è¡¨é«˜æ•°å€¼ï¼Œç´«è‰²ä»£è¡¨ä½æ•°å€¼\n        ax.imshow(w, cmap=&#039;viridis&#039;, aspect=&#039;auto&#039;)\n        \n        ax.set_yticks([0, 1, 2, 3])\n        ax.set_yticklabels([&#039;A&#039;, &#039;C&#039;, &#039;G&#039;, &#039;T&#039;])\n        ax.set_title(f&#039;Filter {i+1} Weights&#039;)\n        \n    plt.tight_layout()\n    plt.show()\n \n# åœ¨è®­ç»ƒç»“æŸåè°ƒç”¨\nplot_filters(model)\n\nå¦‚ä½•è§£è¯»å›¾è¡¨ï¼Ÿ\n\næ¨ªè½´: å·ç§¯æ ¸çš„ä½ç½® (0 åˆ° 11)ã€‚\nçºµè½´: 4 ç§ç¢±åŸº (A, C, G, T)ã€‚\né¢œè‰²: é¢œè‰²è¶Šäº®ï¼ˆæ•°å€¼è¶Šå¤§ï¼‰ï¼Œè¯´æ˜è¯¥ Filter åœ¨è¯¥ä½ç½®è¶Šå€¾å‘äºåŒ¹é…è¯¥ç¢±åŸºã€‚\nMotif å‘ç°: æˆ‘ä»¬æŠŠé¢œè‰²æœ€äº®çš„è‰²å—è¿èµ·æ¥ï¼Œé‚£ä¹ˆå°±æˆåŠŸâ€œå‘ç°â€äº†éšè—åœ¨æ•°æ®ä¸­çš„ Motifï¼\n\n8. è¿›é˜¶å¯è§†åŒ–ï¼šSequence Logo (åºåˆ—å›¾æ ‡)\nè™½ç„¶çƒ­å›¾å¾ˆæœ‰ç”¨ï¼Œä½†æˆ‘ä»¬æ›´å–œæ¬¢çœ‹ Sequence Logoã€‚åœ¨ Sequence Logo ä¸­ï¼Œå­—æ¯çš„é«˜åº¦ä»£è¡¨äº†è¯¥ä½ç½®ä¸Šè¯¥ç¢±åŸºçš„é‡è¦æ€§ã€‚\næˆ‘ä»¬å¯ä»¥é€šè¿‡å¯¹æƒé‡è¿›è¡Œç®€å•çš„æ•°å­¦è½¬æ¢ï¼ˆå½’ä¸€åŒ–ä¸ºæ¦‚ç‡ï¼‰ï¼Œç„¶åä½¿ç”¨ Matplotlib ç»˜åˆ¶â€œå˜å½¢â€çš„å­—ç¬¦æ¥å®ç°ã€‚\nfrom matplotlib.text import Text\nfrom matplotlib.patches import PathPatch\nfrom matplotlib.textpath import TextPath\nfrom matplotlib.font_manager import FontProperties\n \ndef draw_logo(all_scores, ax=None):\n    &quot;&quot;&quot;\n    ç»˜åˆ¶ Sequence Logoã€‚\n    all_scores: shape [Length, 4], æ¯ä¸€è¡Œæ˜¯ A, C, G, T çš„åˆ†æ•°(é«˜åº¦)\n    &quot;&quot;&quot;\n    if ax is None:\n        fig, ax = plt.subplots(figsize=(10, 3))\n    \n    # å®šä¹‰ç¢±åŸºé¢œè‰²\n    colors = {&#039;A&#039;: &#039;green&#039;, &#039;C&#039;: &#039;blue&#039;, &#039;G&#039;: &#039;orange&#039;, &#039;T&#039;: &#039;red&#039;}\n    bases = [&#039;A&#039;, &#039;C&#039;, &#039;G&#039;, &#039;T&#039;]\n    \n    x_len = all_scores.shape[0]\n    \n    # éå†æ¯ä¸€ä¸ªä½ç½®\n    for i in range(x_len):\n        scores = all_scores[i] # å½“å‰ä½ç½®çš„ [score_A, score_C, score_G, score_T]\n        \n        # å°†åˆ†æ•°å’Œç¢±åŸºæ‰“åŒ…ï¼Œå¹¶æŒ‰åˆ†æ•°ä»å°åˆ°å¤§æ’åº\n        # æ’åºæ˜¯ä¸ºäº†è®©é«˜çš„å­—æ¯ç”»åœ¨ä¸Šé¢ï¼Œæˆ–è€…æŒ‰ç…§æŸç§å †å é€»è¾‘\n        # è¿™é‡Œæˆ‘ä»¬ç®€å•åœ°ä»ä¸‹å¾€ä¸Šå †å \n        sorted_indices = np.argsort(scores)\n        \n        y_offset = 0\n        for idx in sorted_indices:\n            base = bases[idx]\n            score = scores[idx]\n            \n            if score &gt; 0:\n                # æ ¸å¿ƒé»‘ç§‘æŠ€ï¼šä½¿ç”¨ TextPath åˆ›å»ºå­—æ¯çš„è·¯å¾„ï¼Œç„¶åæ‹‰ä¼¸å®ƒ\n                # è¿™é‡Œçš„ä»£ç å‚è€ƒäº† logomaker çš„åº•å±‚å®ç°åŸç†\n                \n                # 1. åˆ›å»ºå­—ä½“è·¯å¾„\n                txt = TextPath((0, 0), base, size=1, prop=FontProperties(family=&#039;sans-serif&#039;, weight=&#039;bold&#039;))\n                \n                # 2. è·å–åŒ…å›´ç›’ (Bounding Box)\n                # è¿™æ˜¯ä¸€ä¸ªå¤æ‚çš„æ“ä½œï¼Œä¸ºäº†ç®€åŒ–ï¼Œæˆ‘ä»¬å‡è®¾å­—æ¯æ˜¯æ ‡å‡†åŒ–çš„\n                # ç›´æ¥ç”¨ Transform ç¼©æ”¾\n                \n                # æ›´åŠ ç®€å•çš„æ–¹æ³•ï¼šä½¿ç”¨ ax.text å¹¶é…åˆ transform\n                # ä½† ax.text ä¸èƒ½éç­‰æ¯”ç¼©æ”¾ (æ‹‰é•¿)ã€‚\n                # æ‰€ä»¥æˆ‘ä»¬å¿…é¡»ç”¨ PathPatchã€‚\n                \n                # é‡æ–°è®¡ç®—å˜æ¢\n                # åŸç†ï¼šTextPath é»˜è®¤é«˜åº¦çº¦ä¸º 1 (å½“ size=1)\n                # æˆ‘ä»¬éœ€è¦å°†å…¶ç¼©æ”¾åˆ°é«˜åº¦ = score\n                # å®½åº¦ä¿æŒä¸º 1\n                \n                vertices = txt.vertices\n                codes = txt.codes\n                \n                # é‡æ–°å½’ä¸€åŒ–å­—æ¯çš„å½¢çŠ¶ (ä½¿å…¶åº•è¾¹åœ¨ y=0, é«˜åº¦ä¸º 1)\n                # è¿™æ­¥å¾®è°ƒæ˜¯ä¸ºäº†è®©ä¸åŒå­—æ¯å¯¹é½\n                min_y = vertices[:, 1].min()\n                max_y = vertices[:, 1].max()\n                height_raw = max_y - min_y\n                \n                # å¹³ç§»å’Œç¼©æ”¾\n                new_vertices = vertices.copy()\n                new_vertices[:, 1] = (new_vertices[:, 1] - min_y) / height_raw * score + y_offset # æ‹‰ä¼¸é«˜åº¦å¹¶å¹³ç§»\n                new_vertices[:, 0] = new_vertices[:, 0] + i # å¹³ç§»åˆ°ç¬¬ i ä¸ªä½ç½®\n                \n                patch = PathPatch(plt.matplotlib.path.Path(new_vertices, codes), facecolor=colors[base], edgecolor=&#039;none&#039;)\n                ax.add_patch(patch)\n                \n                y_offset += score\n \n    ax.set_xlim(-0.5, x_len + 0.5)\n    ax.set_ylim(0, np.max(all_scores.sum(axis=1)) * 1.1)\n    ax.set_xticks(range(x_len))\n    ax.set_xticklabels(range(1, x_len + 1)) # æ”¹ä¸ºä» 1 å¼€å§‹è®¡æ•°ï¼Œæ›´ç¬¦åˆç”Ÿç‰©å­¦ä¹ æƒ¯\n    ax.set_xlabel(&#039;Position&#039;)\n    ax.set_ylabel(&#039;Importance / Probability&#039;)\n \ndef plot_motif_logos(model):\n    # 1. è·å–æƒé‡ [32, 4, 12]\n    weights = model.conv1.weight.detach().cpu().numpy()\n    \n    # 2. é€‰æ‹©å‡ ä¸ªæ˜¾è‘—çš„ Filter\n    # ç®€å•çš„å¯å‘å¼ï¼šé€‰æ‹©æƒé‡æ–¹å·®æœ€å¤§çš„ Filterï¼Œè¿™æ„å‘³ç€å®ƒå¯¹æŸäº›ç¢±åŸºæœ‰å¼ºçƒˆçš„åå¥½\n    variances = weights.var(axis=(1, 2))\n    top_indices = np.argsort(variances)[-4:][::-1] # å–æ–¹å·®æœ€å¤§çš„å‰4ä¸ª\n    \n    fig, axes = plt.subplots(4, 1, figsize=(12, 10))\n    \n    for i, idx in enumerate(top_indices):\n        w = weights[idx] # [4, 12]\n        \n        # 3. è½¬æ¢ä¸º PPM (Position Probability Matrix) è¿‘ä¼¼å€¼\n        # æ–¹æ³•ï¼šå…ˆ ReLU (æŠŠè´Ÿå€¼å»æ‰)ï¼Œå› ä¸ºæˆ‘ä»¬åªå…³å¿ƒæ­£å‘æ¿€æ´»\n        # ç„¶åå½’ä¸€åŒ–\n        w = np.maximum(w, 0) \n        \n        # é¿å…é™¤ä»¥ 0\n        row_sums = w.sum(axis=0, keepdims=True)\n        row_sums[row_sums == 0] = 1\n        ppm = w / row_sums \n        \n        # è¿™é‡Œçš„ ppm shape æ˜¯ [4, 12]ï¼Œæˆ‘ä»¬è¦è½¬ç½®æˆ [12, 4] ç»™ç»˜å›¾å‡½æ•°\n        ppm = ppm.T\n        \n        # å¦‚æœä½ æƒ³åŠ å…¥ Information Content çš„æ¦‚å¿µï¼š\n        # IC = ppm * (2 - entropy) ... è¿™é‡Œä¸ºäº†ç®€å•ï¼Œç›´æ¥ç”» PPM\n        \n        draw_logo(ppm, ax=axes[i])\n        axes[i].set_title(f&#039;Filter {idx} Sequence Logo&#039;)\n        \n    plt.tight_layout()\n    plt.show()\n \nplot_motif_logos(model)\n\nè¿™ä¸ªä»£ç ä¼šï¼š\n\nè‡ªåŠ¨æŒ‘é€‰å‡ºæœ€â€œæ˜¾è‘—â€çš„ 4 ä¸ªå·ç§¯æ ¸ï¼ˆæ–¹å·®æœ€å¤§çš„ï¼‰ã€‚\nç”»å‡º 4 å¼  Sequence Logo å›¾ã€‚\n\n9. è¿›é˜¶ï¼šæ¢ç´¢æ¨¡å‹çš„æ³¨æ„åŠ› (Saliency Maps)\nè™½ç„¶çœ‹æƒé‡ï¼ˆWeightsï¼‰æ˜¯æœ€ç›´æ¥çš„æ–¹æ³•ï¼Œä½†åœ¨æ›´å¤æ‚çš„åœºæ™¯ä¸‹ï¼Œæˆ‘ä»¬é€šå¸¸ä¼šä½¿ç”¨ Saliency Mapsï¼ˆæ˜¾è‘—æ€§å›¾ï¼‰ã€‚\nè¿™äº›æ–¹æ³•ä¸æ˜¯çœ‹â€œæ¨¡å‹è„‘å­é‡Œå­˜äº†ä»€ä¹ˆæ¨¡æ¿â€ï¼Œè€Œæ˜¯çœ‹â€œå¯¹äºå½“å‰çš„è¾“å…¥ï¼Œå“ªä¸ªç¢±åŸºå¯¹é¢„æµ‹ç»“æœè´¡çŒ®æœ€å¤§â€ã€‚\nè¿™åˆ©ç”¨äº†æ¢¯åº¦çš„æ¦‚å¿µï¼šå¦‚æœæˆ‘ä»¬ç¨å¾®æ”¹å˜è¾“å…¥åºåˆ—ä¸­ç¬¬ i ä¸ªä½ç½®çš„ç¢±åŸºï¼Œæ¨¡å‹çš„é¢„æµ‹åˆ†æ•°ä¼šå‘ç”Ÿå‰§çƒˆå˜åŒ–å—ï¼Ÿå¦‚æœä¼šï¼Œè¯´æ˜ç¬¬ i ä¸ªä½ç½®éå¸¸é‡è¦ï¼ˆæ¢¯åº¦å¤§ï¼‰ã€‚\næ¢¯åº¦å°±æ˜¯â€œæ•æ„Ÿåº¦â€ï¼Œè¿™å°±æ˜¯Saliency Mapsçš„å®ç°åŸç†ã€‚è¿™æ˜¯åå‘ä¼ æ’­çš„ä¸€ä¸ªå¦™ç”¨ï¼š\n\n\né€šå¸¸æˆ‘ä»¬è®­ç»ƒæ—¶ï¼Œæ˜¯æ±‚Losså¯¹æƒé‡çš„æ¢¯åº¦ï¼Œä»¥æ­¤æ¥æ›´æ–°æƒé‡ã€‚\n\n\nä½†åœ¨Saliency Mapsä¸­ï¼Œæˆ‘ä»¬å›ºå®šæƒé‡ï¼Œæ±‚Scoreï¼ˆé¢„æµ‹å€¼ï¼‰å¯¹è¾“å…¥çš„æ¢¯åº¦ã€‚\n\n\nprint(&quot;åŠ è½½æ•°æ®...&quot;)\n \n# æˆ‘ä»¬åªéœ€è¦åŠ è½½ä¸€æ¡æ­£æ ·æœ¬ (Label=1)\nSEQUENCES_URL = &#039;raw.githubusercontent.com/abidlabs/deep-learning-genomics-primer/master/sequences.txt&#039;\nLABELS_URL = &#039;raw.githubusercontent.com/abidlabs/deep-learning-genomics-primer/master/labels.txt&#039;\n \n# ç®€å•ç²—æš´ï¼šä¸‹è½½å¹¶æ‰¾åˆ°ç¬¬ä¸€ä¸ª Label ä¸º 1 çš„åºåˆ—\nsequences = list(filter(None, requests.get(SEQUENCES_URL).text.split(&#039;\\n&#039;)))\nlabels = list(filter(None, requests.get(LABELS_URL).text.split(&#039;\\n&#039;)))\n \n# æ‰¾åˆ°ç¬¬ä¸€ä¸ªæ­£æ ·æœ¬çš„ç´¢å¼•\ntarget_idx = -1\nfor i, label in enumerate(labels):\nÂ  Â  if label == &#039;1&#039;:\nÂ  Â  Â  Â  target_idx = i\nÂ  Â  Â  Â  break\n \nif target_idx == -1:\nÂ  Â  print(&quot;æœªæ‰¾åˆ°æ­£æ ·æœ¬ï¼&quot;)\nÂ  Â  exit()\n \ntarget_seq = sequences[target_idx]\nprint(f&quot;åˆ†æåºåˆ— #{target_idx}: {target_seq}&quot;)\n \n# é¢„å¤„ç†ï¼šOne-Hot ç¼–ç \ninteger_encoder = LabelEncoder()\none_hot_encoder = OneHotEncoder(categories=&#039;auto&#039;)\ninteger_encoded = integer_encoder.fit_transform(list(target_seq))\ninteger_encoded = np.array(integer_encoded).reshape(-1, 1)\none_hot_encoded = one_hot_encoder.fit_transform(integer_encoded)\ninput_feature = one_hot_encoded.toarray() # shape [50, 4]\n \n# è½¬ä¸º Tensor: [1, 4, 50]\ninput_tensor = torch.tensor(input_feature, dtype=torch.float32).permute(1, 0).unsqueeze(0)\n \n \n# ==========================================\n# Saliency Map è®¡ç®— (æ ¸å¿ƒé€»è¾‘)\n# ==========================================\n \nprint(&quot;è®¡ç®— Saliency Map...&quot;)\n \n# å…³é”®æ­¥éª¤ 1: å¯ç”¨è¾“å…¥æ¢¯åº¦\ninput_tensor.requires_grad_()\n \n# å…³é”®æ­¥éª¤ 2: å‰å‘ä¼ æ’­\noutput = model(input_tensor)\n \n# å…³é”®æ­¥éª¤ 3: åå‘ä¼ æ’­\n# æˆ‘ä»¬å¸Œæœ›è§£é‡Š&quot;ä¸ºä»€ä¹ˆé¢„æµ‹ç»“æœæ˜¯æ­£ç±»&quot;ï¼Œæ‰€ä»¥ç›´æ¥å¯¹ output æ±‚å¯¼\noutput.backward()\n \n# å…³é”®æ­¥éª¤ 4: è·å–æ¢¯åº¦å¹¶å¤„ç†\n# æ¢¯åº¦å½¢çŠ¶: [1, 4, 50] -&gt; å–ç»å¯¹å€¼ -&gt; åœ¨é€šé“ç»´åº¦æ±‚å’Œ -&gt; [50]\ngradients = input_tensor.grad.data.abs().squeeze().numpy()\nsaliency = gradients.sum(axis=0)\n \n \n# ==========================================\n# 4. å¯è§†åŒ–\n# ==========================================\n \nfig, ax = plt.subplots(figsize=(15, 5))\nax.bar(range(50), saliency, color=&#039;purple&#039;, alpha=0.7)\nax.set_title(f&#039;Saliency Map for Sequence #{target_idx} (Label=1)&#039;)\nax.set_xlabel(&#039;Position&#039;)\nax.set_ylabel(&#039;Gradient Magnitude (Importance)&#039;)\nax.set_xlim(-0.5, 49.5)\n \n# åœ¨ X è½´ä¸‹æ–¹æ ‡è®°ç¢±åŸº\nax.set_xticks(range(50))\nax.set_xticklabels(list(target_seq), fontsize=9, fontfamily=&#039;monospace&#039;)\n \nplt.tight_layout()\nplt.show()\n\nè¿™å¼ æŸ±çŠ¶å›¾ï¼Œå±•ç¤ºäº† DNA åºåˆ—çš„æ¯ä¸€ä¸ªä½ç½®å¯¹æ¨¡å‹å†³ç­–çš„â€œè´¡çŒ®åº¦â€ã€‚é€šå¸¸ï¼ŒçœŸæ­£çš„ç»“åˆä½ç‚¹ï¼ˆMotifï¼‰æ‰€åœ¨çš„ä½ç½®ï¼Œå…¶æ¢¯åº¦å€¼ä¼šè¿œè¿œé«˜äºèƒŒæ™¯å™ªå£°ã€‚"},"æœºå™¨å­¦ä¹ ä¸ç»Ÿè®¡æ–¹æ³•/æ·±åº¦å­¦ä¹ /ç”¨PyTorchè®­ç»ƒç®€å•çº¿æ€§å›å½’":{"slug":"æœºå™¨å­¦ä¹ ä¸ç»Ÿè®¡æ–¹æ³•/æ·±åº¦å­¦ä¹ /ç”¨PyTorchè®­ç»ƒç®€å•çº¿æ€§å›å½’","filePath":"æœºå™¨å­¦ä¹ ä¸ç»Ÿè®¡æ–¹æ³•/æ·±åº¦å­¦ä¹ /ç”¨PyTorchè®­ç»ƒç®€å•çº¿æ€§å›å½’.md","title":"ç”¨PyTorchè®­ç»ƒç®€å•çº¿æ€§å›å½’","links":[],"tags":["DeepLearning","Pytorch","Regression"],"content":"ä¸Šæ¬¡æ‰‹æ“ä¸€ä¸ªç®€å•çš„çº¿æ€§å›å½’ï¼Œè¿™æ¬¡è¯¥ä¸ŠPyTorchäº†ã€‚\nimportÂ torch  \nfromÂ torchÂ importÂ nn\næ•°æ®\nè¿˜ç”¨ä¸Šä¸€æ¬¡çš„æ•°æ®ï¼š\n\nå…ˆè½¬æˆTensor:\nX = torch.tensor(df[&#039;population&#039;].values, dtype=torch.float)  \ny = torch.tensor(df[&#039;profit&#039;].values, dtype=torch.float)  \nX = X.view(len(X),Â 1)  \ny = y.view(len(y),Â 1)\nå®šä¹‰æ¨¡å‹\nclassÂ LinearRegressionModel(nn.Module):  \nÂ  Â Â defÂ __init__(self):  \nÂ  Â  Â  Â  super().__init__()  \nÂ  Â  Â  Â  self.linear_layer = nn.Linear(in_features=1, out_features=1)  \nÂ  Â Â   \nÂ  Â Â defÂ forward(self, x: torch.Tensor)Â -&gt; torch.Tensor:  \nÂ  Â  Â  Â Â returnÂ self.linear_layer(x)\nç„¶åæˆ‘ä»¬éœ€è¦åˆå§‹åŒ–ä¸€ä¸ªæ¨¡å‹å¯¹è±¡ï¼ŒæŒ‡å®šç”¨ä»€ä¹ˆloss functionå’Œoptimizerï¼š\nmodel = LinearRegressionModel()  \n  \nloss_fn = nn.L1Loss()  \n  \noptimizer = torch.optim.SGD(params=model.parameters(), lr=0.01)\nè®­ç»ƒ\næ— éæ˜¯æ­ç§¯æœ¨ï¼š\nepochs =Â 5000  \n  \nforÂ epochÂ inÂ range(epochs):  \nÂ  Â  model.train()  \nÂ  Â Â   \nÂ  Â  y_pred = model(X)  \nÂ  Â  loss = loss_fn(y_pred, y)  \nÂ  Â Â   \nÂ  Â  optimizer.zero_grad()  \nÂ  Â  loss.backward()  \nÂ  Â  optimizer.step()\nç»“æœ\n"},"æœºå™¨å­¦ä¹ ä¸ç»Ÿè®¡æ–¹æ³•/æ·±åº¦å­¦ä¹ /ç¥ç»ç½‘ç»œå¯¹æ•°æ®è¿›è¡ŒäºŒåˆ†ç±»":{"slug":"æœºå™¨å­¦ä¹ ä¸ç»Ÿè®¡æ–¹æ³•/æ·±åº¦å­¦ä¹ /ç¥ç»ç½‘ç»œå¯¹æ•°æ®è¿›è¡ŒäºŒåˆ†ç±»","filePath":"æœºå™¨å­¦ä¹ ä¸ç»Ÿè®¡æ–¹æ³•/æ·±åº¦å­¦ä¹ /ç¥ç»ç½‘ç»œå¯¹æ•°æ®è¿›è¡ŒäºŒåˆ†ç±».md","title":"ç¥ç»ç½‘ç»œå¯¹æ•°æ®è¿›è¡ŒäºŒåˆ†ç±»","links":[],"tags":["DeepLearning","Classification","Pytorch"],"content":"\næ²¡æœ‰GPUï¼Œæ— æ³•AI :)\næ•°æ®\nè¿™ä¸ªæ•°æ®æ˜¯éšæœºç”Ÿæˆçš„ï¼Œç”¨çš„sklearné‡Œçš„make_moons\nRANDOM_SEED = 42\n \nfrom sklearn.datasets import make_moons\n \nn_samples = 1000\n \nX, y = make_moons(n_samples = n_samples, noise = 0.2, random_state=RANDOM_SEED)\nç”»ä¸ªå›¾çœ‹ä¸€çœ¼ï¼š\nimport pandas as pd\n \nX_df = pd.DataFrame(X)\n \nimport matplotlib.pyplot as plt\n \nplt.scatter(X_df[0], X_df[1], c=y)\n\nå› ä¸ºæˆ‘ä»¬è®­ç»ƒæ˜¯åœ¨GPUä¸Šï¼Œæ‰€ä»¥æ•°æ®æˆ‘ä»¬éœ€è¦ä¹Ÿæ”¾åˆ°GPUä¸Šï¼Œå†è€…æ•°æ®è¦æ‹†åˆ†ä¸ºè®­ç»ƒé›†å’Œæµ‹è¯•é›†ï¼Œè¿™é‡Œä¾ç„¶ä½¿ç”¨sklearnä¸­çš„å‡½æ•°ï¼Œtrain_test_splitï¼Œ80%çš„æ•°æ®ç”¨äºè®­ç»ƒï¼Œ20%çš„æ•°æ®ç”¨äºæµ‹è¯•ã€‚\nX = torch.tensor(X, dtype=torch.float).to(device)\ny = torch.tensor(y, dtype=torch.float).to(device)\n \nfrom sklearn.model_selection import train_test_split\n \nX_train, X_test, y_train, y_test = train_test_split(X, y, test_size=0.2, random_state=RANDOM_SEED)\næ¨¡å‹\nç»§ç»­æˆ‘ä»¬çš„PyTorchå­¦ä¹ ï¼Œä¸Šä¸€æ¬¡åœ¨ã€Šç”¨PyTorchè®­ç»ƒç®€å•çº¿æ€§å›å½’ã€‹ä¸­æˆ‘ä»¬å®šä¹‰äº†ç»§æ‰¿nn.Moduleçš„ç±»ã€‚å¯¹äºç®€å•çš„ç¥ç»ç½‘ç»œæ¥è¯´ï¼Œæˆ‘ä»¬ç”¨nn.Sequentialå°±å¯ä»¥äº†ï¼Œè¿forwardå‡½æ•°éƒ½çœäº†ã€‚\nimport torch\nfrom torch import nn\n \nBinaryClassification = nn.Sequential(\n    nn.Linear(in_features = 2, out_features = 10),\n    nn.ReLU(),\n    nn.Linear(in_features = 10, out_features = 10),\n    nn.ReLU(),\n    nn.Linear(in_features = 10, out_features = 1)\n).to(device)\n\nè¿™é‡Œç”¨çš„æ•°æ®æ˜¯ä¸ªäºŒç»´çš„æ•°æ®ï¼Œå½“ç„¶å¤šå°‘ç»´éƒ½ä¸€æ ·ï¼Œå°±æ˜¯in_featuresæ•°æ”¹ä¸€ä¸‹è€Œå·²ï¼Œè¿™é‡ŒäºŒç»´ï¼Œè¿›æ¥å°±æ¥10ä¸ªç¥ç»å…ƒï¼Œæˆ‘ä»¬ä¹Ÿå¯ä»¥è®¤ä¸ºæ˜¯å¯¹æ•°æ®è¿›è¡Œäº†å‡ç»´ï¼Œç„¶åå†æ¥10ä¸ªç¥ç»å…ƒï¼Œæœ€åçš„è¾“å‡ºå°±æ˜¯æ‰€è°“çš„logitï¼Œæ‰€ä»¥åˆ†ç±»å«logistic regressionå˜›ã€‚æŠŠè¿™ä¸ªlogitå€¼å†è¿‡ä¸€ä¸ªsigmoidå‡½æ•°ï¼Œå°±æ˜¯åˆ†ç±»çš„æ¦‚ç‡äº†ã€‚è¿™é‡Œæ¯ä¸€å±‚çº¿æ€§å›å½’ï¼Œéƒ½è¦åŠ ä¸€ä¸ªæ¿€æ´»å‡½æ•°ï¼Œè¿™é‡Œç”¨äº†ReLUï¼Œä½†ä¹Ÿå¯ä»¥æ˜¯åˆ«çš„ã€‚è¿™å°±æ˜¯æˆ‘åœ¨ã€Šç®€å•çº¿æ€§å›å½’ã€‹æœ€åå†™çš„ï¼š\n\næŸå¤±å‡½æ•°\nloss_fn = nn.BCEWithLogitsLoss()\nè¿™é‡Œæ˜¯åˆ†ç±»ï¼Œåˆ†ç±»çš„æŸå¤±å‡½æ•°å¯ä»¥ç”¨äº¤å‰ç†µï¼ˆCross Entropyï¼‰ï¼Œè¿™é‡Œæ˜¯äºŒåˆ†ç±»å°±æœ‰ç›¸åº”çš„Binary Cross Entropyï¼Œæ‰€è°“æŸå¤±å‡½æ•°ï¼Œå°±æ˜¯æ¯”è¾ƒçœŸå®labelå’Œé¢„æµ‹çš„labelçš„å·®è·ï¼Œä¼˜åŒ–çš„è¿‡ç¨‹å°±æ˜¯å¸Œæœ›è¿™ä¸ªå·®è·è¶Šæ¥è¶Šå°ã€‚æˆ‘ä»¬çš„æ¨¡å‹è¾“å‡ºçš„æ˜¯logitsï¼Œéœ€è¦è¿‡ä¸€ä¸ªsigmoidï¼Œæ‰èƒ½é¢„æµ‹labelï¼Œç„¶åæ‰èƒ½ä½¿ç”¨äº¤å‰ç†µæ¥è®¡ç®—æŸå¤±ï¼Œæ‰€ä»¥æ˜¯ä¸¤æ­¥ã€‚é‚£ä¹ˆè¿™é‡Œä½¿ç”¨çš„nn.BCEWithLogitsLoss()å°±æ˜¯æ•´åˆäº†è¿™ä¸¤æ­¥ï¼Œè€Œä¸”ä¼šæ¯”è‡ªå·±æ‹†åˆ†ä¸¤æ­¥æ¥è®¡ç®—åœ¨æ•°å€¼ä¸Šä¼šæ›´ç¨³å¥ä¸€äº›ã€‚\nä¼˜åŒ–å™¨\noptimizer = torch.optim.SGD(params = BinaryClassification.parameters(), lr = 0.1)\nè¿™é‡Œç”¨äº†torch.optim.SGDä¹Ÿå°±æ˜¯éšæœºæ¢¯åº¦ä¸‹é™ï¼Œè¿™æ˜¯å¾ˆå¸¸è§çš„ä¼˜åŒ–å™¨ï¼Œè¿™é‡Œè®¾ç½®å­¦ä¹ ç‡ä¸º0.1ã€‚\nå‡†ç¡®ç‡\næˆ‘ä»¬éœ€è¦å®šä¹‰ä¸€ä¸ªå‡½æ•°ï¼Œæ¥åº¦é‡ä¸€ä¸‹æ¨¡å‹çš„å‡†ç¡®ç‡ï¼Œè¿™ä¸ªå‡½æ•°å¾ˆç®€å•ï¼Œå°±æ˜¯é¢„æµ‹çš„labelå’ŒçœŸå®çš„labelæ˜¯å¦ç›¸ç­‰çš„å¹³å‡å€¼ï¼ˆç›¸ç­‰çš„ä¸ªæ•°/æ€»æ•°ï¼‰ã€‚è™½ç„¶å‡½æ•°å¾ˆç®€å•ï¼Œä½†æˆ‘ä»¬ä¸éœ€è¦è‡ªå·±å®šä¹‰ï¼Œå¯ä»¥ç”¨torchmetricsï¼Œç”¨è¿™ä¸ªæ¨¡å—è¿˜èƒ½æ–¹ä¾¿æˆ‘ä»¬åœ¨éœ€è¦çš„æ—¶å€™ç”¨æ›´å¤šçš„æŒ‡æ ‡ã€‚\nfrom torchmetrics.classification import Accuracy\n \nacc_fn = Accuracy(task=&quot;multiclass&quot;, num_classes=2).to(device)\nè®­ç»ƒæ¨¡å‹\nfrom timeit import default_timer as timer \n \nstart_time = timer()\n \nepochs = 1000\n \nfor epoch in range(epochs):\n    ## Training\n    BinaryClassification.train()\n \n    y_logits = BinaryClassification(X_train).squeeze()\n    y_pred = torch.round(torch.sigmoid(y_logits))\n \n    loss = loss_fn(y_logits, y_train)\n    acc = acc_fn(y_pred, y_train)\n    \n    optimizer.zero_grad()\n    loss.backward()\n    optimizer.step()\n \n    ## Testing\n    BinaryClassification.eval()\n    with torch.inference_mode():\n        test_logits = BinaryClassification(X_test).squeeze()\n        test_pred = torch.round(torch.sigmoid(test_logits))\n        test_loss = loss_fn(test_logits, y_test)\n        test_acc = acc_fn(test_pred, y_test)\n \n    if epoch % 100 == 0:\n        print(f&quot;Epoch: {epoch} | Loss: {loss:.5f}, Accuracy: {acc:.2f}% | Test loss: {test_loss:.5f}, Test acc: {test_acc:.2f}%&quot;)\n \nend_time = timer()\nè¿™é‡Œä½¿ç”¨äº†timeitæ¥è®°å½•æ—¶é—´ï¼Œepochsç”¨äº†1000ï¼Œå…¶å®ä¸ç”¨è¿™ä¹ˆå¤šï¼Œå¾ˆå¿«å°±æ”¶æ•›äº†ã€‚æ¯ä¸ªepoché‡Œåˆ†ä¸¤æ®µï¼Œä¸€æ®µæ˜¯è®­ç»ƒï¼Œå°±æ˜¯æ•°æ®è¿›å»ï¼Œè®¡ç®—æŸå¤±ï¼Œä¼˜åŒ–å‚æ•°ã€‚å¦ä¸€æ®µæ˜¯æ˜¯ç”¨æµ‹è¯•é›†è¿›è¡Œæµ‹è¯•ï¼Œè¿™é‡Œç”¨äº†torch.inference_mode()ï¼Œå› ä¸ºæµ‹è¯•çš„æ—¶å€™ï¼Œæ²¡æœ‰ä¼˜åŒ–è¿‡ç¨‹ï¼Œä¹Ÿå°±ä¸éœ€è¦å»è·Ÿè¸ªå‚æ•°ï¼Œä¼šæ›´å¿«æ›´çœå†…å­˜ï¼Œæµ‹è¯•é˜¶æ®µå°±åªéœ€è¦æŠŠæ•°æ®æ‰”è¿›æ¨¡å‹ï¼Œè®¡ç®—ä¸€ä¸ªæŸå¤±å’Œå‡†ç¡®ç‡ã€‚\næœ€åæ˜¯æ¯100ä¸ªepochsï¼Œæ‰“å°ä¸€ä¸‹ç›¸åº”çš„ä¿¡æ¯ï¼Œè®©æˆ‘ä»¬äº†è§£æ¨¡å‹è®­ç»ƒçš„è¡¨ç°ã€‚\n\nåˆ°äº†100ä¸ªepochsçš„æ—¶å€™ï¼Œå‡†ç¡®ç‡åœ¨è®­ç»ƒé›†å’Œæµ‹è¯•é›†ä¸Šéƒ½å·²ç»&gt;80%äº†\n\næ‰€ç”¨çš„æ—¶é—´ï¼Œä¸åˆ°3ç§’ã€‚\nå¯è§†åŒ–\næœ€åæˆ‘ä»¬å¯ä»¥ç”»ä¸€ä¸‹ï¼Œæ¨¡å‹åœ¨è®­ç»ƒé›†å’Œæµ‹è¯•é›†ä¸­çš„åˆ†ç±»æƒ…å†µï¼š\n"},"æœºå™¨å­¦ä¹ ä¸ç»Ÿè®¡æ–¹æ³•/æ·±åº¦å­¦ä¹ /ç®€å•çº¿æ€§å›å½’":{"slug":"æœºå™¨å­¦ä¹ ä¸ç»Ÿè®¡æ–¹æ³•/æ·±åº¦å­¦ä¹ /ç®€å•çº¿æ€§å›å½’","filePath":"æœºå™¨å­¦ä¹ ä¸ç»Ÿè®¡æ–¹æ³•/æ·±åº¦å­¦ä¹ /ç®€å•çº¿æ€§å›å½’.md","title":"ç®€å•çº¿æ€§å›å½’","links":[],"tags":["DeepLearning","Regression"],"content":"ä¸Šä¸€æ¬¡è¯´AIå­¦èµ·æ¥ï¼Œè¿™å°±å­¦èµ·æ¥ã€‚\nå…ˆæ¥ä¸ªç®€å•çš„çº¿æ€§å›å½’ã€‚\nå‡å¦‚è¦å¼€ä¸€å®¶é¤é¦†ï¼Œè¡—åŒºäººå£å’Œåˆ©æ¶¦æ˜¯å…³è”ï¼Œä»å·²ç»å¼€çš„åº—çš„æ•°æ®ï¼Œé¢„æµ‹ä¸€ä¸‹ï¼Œé¢„æµ‹åœ¨æ–°çš„è¡—åŒºå¼€åº—çš„æ”¶å…¥æ˜¯å¤šå°‘ã€‚\nè¯»å…¥æ•°æ®\nimportÂ pandasÂ asÂ pd  \ndfÂ =Â pd.read_csv(&quot;data/street-profits.csv&quot;,Â names=[&#039;population&#039;,Â &#039;profit&#039;])\ndf.head()  \n  \npopulationÂ profit  \n0Â 6.1101Â 17.5920  \n1Â 5.5277Â 9.1302  \n2Â 8.5186Â 13.6620  \n3Â 7.0032Â 11.8540  \n4Â 5.8598Â 6.8233\nçº¿æ€§å›å½’\ny = theta_0 + theta_1 * xï¼ŒæŠŠ xåŠ ä¸€ä¸ªcolumnæ˜¯1ï¼Œè¿™æ ·å­å°±å¯ä»¥å˜æˆy = theta @ X.\nimportÂ numpyÂ asÂ np  \ndf[&#039;b&#039;]Â =Â np.ones(df.shape[0])  \nXÂ =Â df[[&#039;population&#039;,Â &#039;b&#039;]]  \nthetaÂ =Â np.zeros(X.shape[1])  \nyÂ =Â df.profit\nç”¨å‡æ–¹è¯¯å·®ï¼ˆMSEï¼‰æ¥å®šä¹‰cost functionã€‚\ndefÂ mse(theta,Â X,Â y):  \nÂ Â Â Â #Â MSE:Â MeanÂ SquaredÂ Error  \nÂ Â Â Â mÂ =Â X.size  \nÂ Â Â Â innerÂ =Â XÂ @Â thetaÂ -Â y  \nÂ Â Â Â square_sumÂ =Â inner.TÂ @Â inner  \nÂ Â Â Â costÂ =Â square_sumÂ /Â (2*m)  \nÂ Â Â Â returnÂ cost\nçº¿æ€§å›å½’å˜æˆä¸€ä¸ªä¼˜åŒ–çš„é—®é¢˜ï¼Œå°±æ˜¯è®©ä»£ä»·å‡½æ•°æœ€å°ã€‚è¿›è¡Œåå¾®åˆ†ï¼Œå°±å¯ä»¥å¾—åˆ°å‚æ•°æ›´æ–°çš„æ–¹å‘å’Œå¤§å°ã€‚alphaæ˜¯æ‰€è°“çš„learning rateã€‚\n:= \\theta_j - \\alpha \\frac{1}{m} \\sum_{i=1}^{m} \\bigl( h_\\theta(x^{(i)}) - y^{(i)} \\bigr) x_j^{(i)}$$\nè¿™ä¸ªå…¬å¼å…¶å®æ˜¯æˆ‘ä»¬å¤§ä¸€éƒ½å­¦è¿‡çš„æ³°å‹’å…¬å¼ã€‚  \n\n![](assets/ç®€å•çº¿æ€§å›å½’/file-20251219233631986.png)\n\nåœ¨xæ¥è¿‘açš„æ—¶å€™ï¼Œ(x-a)å°±å¾ˆå°‘ï¼Œåé¢å¤šæ¬¡æ–¹çš„é¡¹å°±å¯ä»¥å¿½ç•¥ï¼Œè¿™å°±æˆä¸ºäº†ä¸Šé¢çš„å…¬å¼äº†ï¼Œè€Œè¿™ä¸ª(x-a)å°±æ˜¯alphaï¼Œå°±æ˜¯åœ¨è¿™é‡Œè¢«ç§°ä¸ºlearning rateçš„è¿™ä¸€é¡¹ï¼Œä¹Ÿå°±æ˜¯è¯´è¿™ä¸ªå…¬å¼æœ¬èº«è¦æˆç«‹ï¼Œå‰æå°±æ˜¯alphaå¾ˆå°ã€‚  \n\nä¸‹é¢çš„`gradient`å‡½æ•°ç®—çš„å°±æ˜¯åå¾®åˆ†çš„è¿™å—ï¼š\n\n```python\ndefÂ gradient(theta,Â X,Â y):  \nÂ Â Â Â mÂ =Â X.size  \nÂ Â Â Â innerÂ =Â X.TÂ @Â (XÂ @Â thetaÂ -Â y)  \nÂ Â Â Â returnÂ inner/m\n```\n### æ‰¹é‡æ¢¯åº¦ä¸‹é™ç®—æ³•\n\næŒ‰ç…§ä¸Šé¢çš„å…¬å¼æ¥è®¡ç®—ã€‚\n\n```python\ndefÂ batch_gradient_descent(theta,Â X,Â y,Â epoch,Â alpha=0.01):  \nÂ Â Â Â cost_dataÂ =Â [mse(theta,Â X,Â y)]  \nÂ Â Â Â _thetaÂ =Â theta.copy()  \n  \nÂ Â Â Â forÂ _Â inÂ range(epoch):  \nÂ Â Â Â Â Â Â Â _thetaÂ =Â _thetaÂ -Â alphaÂ *Â gradient(_theta,Â X,Â y)  \nÂ Â Â Â Â Â Â Â cost_data.append(mse(_theta,Â X,Â y))  \nÂ Â Â Â returnÂ _theta,Â cost_data\n```\n\næä¸ª5000æ¬¡è¿­ä»£ï¼Œå‡ºæ¥æœ€åçš„å‚æ•°ï¼š\n```python\nepochÂ =Â 5000  \nfinal_theta,Â cost_dataÂ =Â batch_gradient_descent(theta,Â X,Â y,Â epoch)\n```\n\n\n\n## scikit-learn\n\næ¯”è¾ƒä¸€ä¸‹ï¼Œæ‰çŸ¥é“è¡Œä¸è¡Œã€‚\n\n```python\nfromÂ sklearnÂ importÂ linear_model   modelÂ =Â linear_model.LinearRegression()   model.fit(X,Â y)`\n```\n\n![Image](mmbiz.qpic.cn/mmbiz_png/MPBFtnFrw4kcgwEwBWf2ibGdkNBMW5waHlAfnfOqLhWgLSibCK0IWJicnD2Sxc6bEcDZeoc9UuQCmf5z611icV79oA/640#imgIndex=1)\n\nå­¦ä¼šäº†çº¿æ€§å›å½’ï¼Œå°±ç¦»ç¥ç»ç½‘ç»œä¸è¿œäº†ğŸ˜„\n\n\nå› ä¸ºæ¯ä¸ªç¥ç»å…ƒéƒ½æ˜¯ä¸€ä¸ªçº¿æ€§å›å½’ï¼Œå†åŠ ä¸€ä¸ªæ¿€æ´»å‡½æ•°ã€‚ç¥ç»ç½‘ç»œå°±æ˜¯ä¸€å †ç¥ç»å…ƒï¼Œè€Œå†å¤šçš„çº¿æ€§å›å½’ç»„åˆåœ¨ä¸€èµ·ï¼Œå®ƒè¿˜æ˜¯ä¸€ä¸ªçº¿æ€§å‡½æ•°ï¼Œä»¥äºŒç»´æ¥è¯´ï¼Œå°±è¿˜æ˜¯ä¸€æ¡ç›´çº¿ï¼Œé‚£æœ‰æ²¡æœ‰åŠæ³•æ‹Ÿåˆä»»æ„æ›²çº¿ï¼Œé‚£å°±éœ€è¦å¸¦æ‹å¼¯çš„ï¼Œè¿™å°±æ˜¯æ¿€æ´»å‡½æ•°è¦å¹²çš„äº‹ï¼Œç®€å•å¦‚ReLUï¼Œå°±æ˜¯å¸¦ä¸ªæ‹ï¼Œå°±å¯ä»¥äº†ã€‚æœ‰æ‹å¼¯ï¼Œåªè¦å¤Ÿå¤šï¼Œç»è¿‡ç¼©æ”¾ã€ä½ç§»ã€ç»„åˆï¼Œå°±å¯ä»¥å„ç§æ‹ï¼Œè€Œåªè¦ç‚¹è¶³å¤Ÿå¤šï¼Œç›´çº¿æ‹ä¹Ÿèƒ½å¹³æ»‘åœ°æ‹Ÿå’Œæ›²çº¿ï¼Œæ‰€ä»¥å®ƒå°±èƒ½æ‹Ÿåˆæ‰€æœ‰æ›²çº¿ï¼Œæ¨å¹¿åˆ°é«˜ç»´ç©ºé—´ï¼Œä¹Ÿæ˜¯ä¸€æ ·ã€‚"},"æœºå™¨å­¦ä¹ ä¸ç»Ÿè®¡æ–¹æ³•/ç®€å•çš„KMeans":{"slug":"æœºå™¨å­¦ä¹ ä¸ç»Ÿè®¡æ–¹æ³•/ç®€å•çš„KMeans","filePath":"æœºå™¨å­¦ä¹ ä¸ç»Ÿè®¡æ–¹æ³•/ç®€å•çš„KMeans.md","title":"ç®€å•çš„KMeans","links":[],"tags":["MachineLearning","Classification","KMeans"],"content":"KMeansç®—æ³•æœ‰ä¸¤ä¸ªå‡è®¾ï¼š\n\n\nâ€œç°‡ä¸­å¿ƒç‚¹â€æ˜¯å±äºè¯¥ç°‡çš„æ‰€æœ‰æ•°æ®ç‚¹åæ ‡çš„ç®—æœ¯å¹³å‡å€¼ã€‚\n\n\nä¸€ä¸ªç°‡çš„æ¯ä¸ªç‚¹åˆ°è¯¥ç°‡ä¸­å¿ƒç‚¹çš„è·ç¦»ï¼Œæ¯”åˆ°å…¶ä»–ç°‡ä¸­å¿ƒç‚¹çš„è·ç¦»çŸ­ã€‚\n\n\nsklearnå®ä¾‹\næ•°æ®\nfrom sklearn.datasets import make_blobs\n \nX, y = make_blobs(n_samples = 300, centers = 4, cluster_std=0.5, random_state=0)\nç”¨sklearnç”Ÿæˆä¸€ä¸ªç¤ºä¾‹æ•°æ®ã€‚æˆ‘ä»¬ç”»ä¸ªå›¾çœ‹çœ‹ï¼š\nimport matplotlib.pyplot as plt\n \nplt.scatter(X[:, 0], X[:, 1], s=50)\n\nå¾ˆæ¸…æ¥šï¼Œå°±æ˜¯4ä¸ªç±»ã€‚ç„¶åæˆ‘ä»¬ç”¨kmeansç®—æ³•æ¥èšç±»ã€‚\nKMeansèšç±»\nfrom sklearn.cluster import KMeans\nkmeans = KMeans(n_clusters=4)\nkmeans.fit(X)\n \ny_pred = kmeans.predict(X)\nsklearnçš„å¥—è·¯ï¼š1. åˆå§‹åŒ–æ¨¡å‹ï¼ˆåŒ…æ‹¬æŒ‡å®šä¸€äº›è¶…å‚æ•°ï¼‰ï¼Œ2. æ‹Ÿåˆæ•°æ®ï¼ˆæˆ–è€…å«è®­ç»ƒï¼‰ï¼Œ3. é¢„æµ‹ã€‚æ‰“å®Œæ”¶å·¥ï¼Œæˆ‘ä»¬ç”»ä¸ªå›¾çœ‹çœ‹ï¼š\nplt.scatter(X[:, 0], X[:, 1], s=50, c=y_pred, cmap=&#039;viridis&#039;)\n\næˆ‘ä»¬ä¹Ÿå¯ä»¥æŠŠä¸­å¿ƒç‚¹ç”»åœ¨ä¸Šé¢ï¼š\nplt.scatter(X[:, 0], X[:, 1], s=50, c=y_pred, cmap=&#039;viridis&#039;)\ncenters = kmeans.cluster_centers_\nplt.scatter(centers[:, 0], centers[:, 1], c=&#039;red&#039;, s=200, alpha=0.8)\n\nè‡ªå·±å†™ä¸ªKMeansçš„ä¹è¶£\nè‡ªå·±å†™çš„ä¸€ä¸ªå¥½å¤„æ˜¯ä½ å¯ä»¥è®°å½•ä¸€ä¸‹è¿­ä»£è¿‡ç¨‹ä¸­çš„ä¸­å¿ƒç‚¹ä½ç½®ï¼Œç„¶åæ‹¿æ¥ç”»å›¾ï¼Œå¯¹äºKMeansçš„è¿‡ç¨‹ä¼šæœ‰ç›´è§‚çš„æ„Ÿå—ï¼Œä½ ä¹Ÿä¼šå‘ç°æ”¶æ•›å¾—å¾ˆå¿«ã€‚è¿™å°±æ˜¯æˆ‘åœ¨2011å¹´çš„æ—¶å€™ç”¨Rå†™çš„ä»£ç å‡ºçš„å›¾ï¼š\n\næ­¤å¤„è¿˜æœ‰ä¸€æ®µç”¨Pythonå†™çš„KMeanså¯ä¾›å‚è€ƒã€‚\nKMeansè¿˜èƒ½å¹²ç‚¹å•¥ï¼Ÿ\nå®ƒèƒ½åšå›¾ç‰‡å‹ç¼©ï¼Œå¯¹é¢œè‰²è¿›è¡Œèšç±»ï¼Œç„¶åç”¨ä¸­å¿ƒç‚¹å»æ›¿æ¢ç›¸ä¼¼çš„é¢œè‰²ï¼Œæ¯”å¦‚è¯´ä¸€å¼ å›¾ï¼Œä½ ç»™å‹ç¼©æˆ16è‰²çš„ï¼Œå›¾ç‰‡å°±å¯ä»¥å°å¾ˆå¤šã€‚è¿™ä¹Ÿæ˜¯å½“å¹´å†™äº†KMeansä¹‹åï¼Œå¹²è¿‡çš„ä¸€ä»¶äº‹æƒ…ã€‚ç„¶åè¿˜å¯ä»¥æœ‰ä¸€ä¸ªç±»ä¼¼çš„äº‹æƒ…å¯ä»¥å¹²ï¼Œæˆ‘æŠŠå›¾ç‰‡é¢œè‰²çš„ä¸­å¿ƒç‚¹æ‹¿å‡ºæ¥ï¼Œè¿™ä¸ç­‰åˆ°æŠŠé…è‰²æ–¹æ¡ˆæ‹¿åˆ°æ‰‹äº†ä¹ˆï¼Ÿç„¶åä½ å°±å¯ä»¥å°†å…¶åº”ç”¨äºè‡ªå·±çš„å›¾ä¸­ã€‚ä¹Ÿå°±æ˜¯è¯´ä½ ä¸Šç­æ‘¸é±¼åœ¨çœ‹å›¾ï¼Œå°±æœ‰å€Ÿå£è¯´è‡ªå·±åœ¨æ‰¾é…è‰²æ–¹æ¡ˆäº†ã€‚è¿™å°±æ˜¯å½“å¹´å†™ä¸‹è¿™ç¯‡ã€Šé£Ÿè‰²æ€§ä¹Ÿã€‹æ‰€ä»‹ç»çš„ã€‚\n\nKMeansä¸èƒ½å¹²å•¥\nä»å‰é¢è¯´åˆ°çš„KMeansçš„ä¸¤ä¸ªå‡è®¾ï¼Œå°±å¯ä»¥çœ‹å‡ºæ¥ï¼Œä¸ç¬¦åˆè¿™ä¸¤ä¸ªå‡è®¾ï¼Œå®ƒå°±ä¸èƒ½å¹²å•Šã€‚å› ä¸ºKMeansåªèƒ½ç¡®å®šçº¿æ€§èšç±»è¾¹ç•Œï¼Œæ‰€ä»¥å½“è¾¹ç•Œå¾ˆå¤æ‚çš„æ—¶å€™ï¼Œå®ƒæ˜¯åšä¸å¥½çš„ã€‚æ¯”å¦‚æˆ‘åœ¨ã€ŠAIå­¦èµ·æ¥ï¼Œæ¯•ç«ŸAIè®©åœ°çƒè¿è½¬ã€‹é‡Œæ”¾çš„è¿™å¼ ç”¨SVMåˆ†ç±»çš„å›¾ï¼Œç”¨KMeanså°±åšä¸å¥½ã€‚\n\nä½†æ˜¯æˆ‘ä»¬æƒ³ä¸€æƒ³ï¼ŒSVMæ˜¯æ€ä¹ˆåšçš„ï¼Ÿåº”ç”¨ä¸€ä¸ªæ ¸å‡½æ•°ï¼Œå°†æ•°æ®æŠ•å½±åˆ°æ›´é«˜ç»´çš„ç©ºé—´ï¼Œç„¶åæ˜¯çº¿æ€§å¯åˆ†çš„ï¼Œåœ¨é«˜ç»´ç©ºé—´è¿›è¡Œåˆ†ç±»ã€‚æ—¢ç„¶åœ¨é«˜ç»´ç©ºé—´æ˜¯çº¿æ€§å¯åˆ†çš„ï¼Œé‚£ä¹ˆç”¨KMeansä¹Ÿæ˜¯å¯ä»¥çš„ã€‚æ‰€ä»¥åƒè¿™ç§KMeanså¹²ä¸æ¥çš„åˆ†ç±»ï¼Œå¦‚æœæˆ‘ä»¬ç»„åˆä¸€ä¸ªæ ¸å˜æ¢+KMeansï¼Œé‚£ä¹ˆå®ƒä¹Ÿæ˜¯å¹²å¾—æ¥çš„ã€‚\næ¬²çŸ¥åäº‹å¦‚ä½•ï¼Œè¯·å¬ä¸‹å›åˆ†è§£ã€‚"}}